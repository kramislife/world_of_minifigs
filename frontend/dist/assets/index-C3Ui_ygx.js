import{r as g,j as e,O as tt,C as at,a as rt,X as es,T as nt,D as lt,P as Pa,b as Ia,c as Da,d as ss,S as Mn,e as os,f as Fa,A as As,u as ee,g as ae,h as Un,M as qn,i as gs,k as it,l as Ie,m as Te,n as js,B as N,H as Aa,o as Ta,p as qt,I as Es,W as Vn,L as Vt,q as ds,U as Ge,s as zn,N as Ts,t as Ea,v as La,w as fs,x as Oa,y as Bn,z as Ra,E as $a,F as Ma,G as Ua,J as Ls,K as qa,Q as Wn,V as Va,Y as za,Z as Hn,_ as Gn,$ as Kn,a0 as Ba,a1 as ct,a2 as De,a3 as Yn,a4 as Ze,a5 as Qn,a6 as Jn,a7 as Zn,a8 as Wa,a9 as zt,aa as ot,ab as Xn,ac as el,ad as sl,ae as Js,af as Ha,ag as tl,ah as ie,ai as Ga,aj as al,ak as Ka,al as rl,am as Ya,an as nl,ao as Qa,ap as ll,aq as Ja,ar as Za,as as il,at as cl,au as Xa,av as ol,aw as dl,ax as hs,ay as er,az as ml,aA as sr,aB as me,aC as ul,aD as tr,aE as xl,aF as ar,aG as hl,aH as pl,aI as gl,aJ as jl,aK as rr,aL as fl,aM as bl,aN as yl,aO as nr,aP as dt,aQ as Nl,aR as ca,aS as Os,aT as Bt,aU as lr,aV as mt,aW as ir,aX as is,aY as vl,aZ as ms,a_ as wl,a$ as Cl,b0 as kl,b1 as Sl,b2 as _l,b3 as Wt,b4 as Pl,b5 as Il,b6 as cr,b7 as or,b8 as Dl,b9 as dr,ba as Fl,bb as Al,bc as Tl,bd as Ht,be as mr,bf as El,bg as Gt,bh as ur,bi as Lt,bj as oa,bk as Ll,bl as ut,bm as xr,bn as hr,bo as pr,bp as Ot,bq as gr,br as jr,bs as Zs,bt as Se,bu as Ol,bv as Rl,bw as $l,bx as Kt,by as fr,bz as Ml,bA as br,bB as yr,bC as Nr,bD as Ul,bE as ql,bF as da,bG as Rt,bH as ma,bI as xt,bJ as Vl,bK as zl,bL as vr,bM as Bl,bN as Wl,bO as Hl,bP as Gl,bQ as Kl,bR as Yl,bS as wr,bT as Cr,bU as kr,bV as Ql,bW as Jl,bX as Sr,bY as Zl,bZ as ua,b_ as Xl,b$ as Z,c0 as _r,c1 as ei,c2 as si,c3 as ti,c4 as ai}from"./react-vendor-9LUFNKKg.js";import{a6 as ri,n as ni,a7 as ht,a8 as ts,a9 as Yt,j as Pr,aa as Qt,ab as T,F as li,ac as ii,ad as ci,ae as oi,af as di,ag as mi,ah as ui,ai as xi,aj as hi,ak as pi,al as gi,am as ji,an as fi,ao as Me,ap as xa,aq as bi,ar as yi,as as Ni,at as vi,au as wi}from"./lib-DKZZK6ez.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();function K(...s){return ri(ni(s))}const bs=Ia,ys=Da,Ns=rt,Ci=Pa,Ir=g.forwardRef(({className:s,...t},a)=>e.jsx(tt,{className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));Ir.displayName=tt.displayName;const ki=ht("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),vs=g.forwardRef(({side:s="right",className:t,children:a,...r},n)=>e.jsxs(Ci,{children:[e.jsx(Ir,{}),e.jsxs(at,{ref:n,className:K(ki({side:s}),"w-full max-w-[400px] lg:max-w-[600px] bg-brand-start gap-0 p-0 border-brand-end/50 flex flex-col h-full",t),...r,children:[a,e.jsxs(rt,{className:"absolute right-4 top-5 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100  disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(es,{className:"h-5 w-5 text-white"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vs.displayName=at.displayName;const ws=({className:s,...t})=>e.jsx("div",{className:K("flex flex-col space-y-2 text-center sm:text-left p-5 border-b border-brand-end/50",s),...t});ws.displayName="SheetHeader";const Cs=g.forwardRef(({className:s,...t},a)=>e.jsx(nt,{ref:a,className:K(" font-semibold text-2xl text-accent mb-5 text-left",s),...t}));Cs.displayName=nt.displayName;const ks=g.forwardRef(({className:s,...t},a)=>e.jsx(lt,{ref:a,className:K("text-sm text-muted-foreground",s),...t}));ks.displayName=lt.displayName;const Si="/assets/wof_logo-8Dx8qJeg.png",He=ss({reducerPath:"productApi",baseQuery:ts({baseUrl:"/api/v1"}),endpoints:s=>({getProducts:s.query({query:()=>"/products",providesTags:t=>t?[...t.products.map(({_id:a})=>({type:"Product",id:a})),{type:"Products",id:"LIST"}]:[{type:"Products",id:"LIST"}]}),getProductDetails:s.query({query:t=>`/products/${t}`,providesTags:(t,a,r)=>[{type:"ProductDetails",id:r},{type:"Product",id:r}]}),createProduct:s.mutation({query:t=>({url:"/admin/newProduct",method:"POST",body:t}),invalidatesTags:["Products"]}),updateProduct:s.mutation({query:({id:t,productData:a})=>({url:`/admin/product/${t}`,method:"PUT",body:a}),invalidatesTags:(t,a,{id:r})=>["Products",{type:"Product",id:r},{type:"ProductDetails",id:r}]}),deleteProduct:s.mutation({query:t=>({url:`/admin/product/${t}`,method:"DELETE"}),invalidatesTags:["Products"]}),uploadProductImages:s.mutation({query({id:t,body:a}){return{url:`/admin/products/${t}/upload_images`,method:"PATCH",body:a}},invalidatesTags:["Product"]}),deleteProductImage:s.mutation({query({id:t,body:a}){return{url:`/admin/products/${t}/delete_images`,method:"DELETE",body:a}},invalidatesTags:["Product"]}),getCategory:s.query({query:()=>"/categories",providesTags:["Categories"]}),getCategoryByKey:s.query({query:t=>`/categories/${t}`}),createCategory:s.mutation({query:t=>({url:"/admin/newCategory",method:"POST",body:t}),invalidatesTags:["Categories"]}),updateCategory:s.mutation({query:({id:t,...a})=>({url:`/admin/categories/${t}`,method:"PUT",body:a}),invalidatesTags:["Categories"]}),deleteCategory:s.mutation({query:t=>({url:`/admin/categories/${t}`,method:"DELETE"}),invalidatesTags:["Categories"]}),uploadCategoryImage:s.mutation({query({id:t,body:a}){return{url:`/admin/categories/${t}/upload_image`,method:"PATCH",body:a}},invalidatesTags:["Categories"]}),getSubCategories:s.query({query:()=>"/subcategories",providesTags:["SubCategories"]}),createSubCategory:s.mutation({query:t=>({url:"/admin/newSubCategory",method:"POST",body:t}),invalidatesTags:["SubCategories"]}),updateSubCategory:s.mutation({query:({id:t,...a})=>({url:`/admin/subcategories/${t}`,method:"PUT",body:a}),invalidatesTags:["SubCategories"]}),deleteSubCategory:s.mutation({query:t=>({url:`/admin/subcategories/${t}`,method:"DELETE"}),invalidatesTags:["SubCategories"]}),uploadSubCategoryImage:s.mutation({query({id:t,body:a}){return{url:`/admin/subcategories/${t}/upload_image`,method:"PATCH",body:a}},invalidatesTags:["SubCategories"]}),getCollection:s.query({query:()=>"/collections",providesTags:["Collections"]}),getCollectionByKey:s.query({query:t=>`/collections/${t}`}),getCollectionDetails:s.query({query:t=>`/collections/${t}`,providesTags:(t,a,r)=>[{type:"CollectionDetails",id:r},{type:"Collection",id:r}]}),createCollection:s.mutation({query:t=>({url:"/admin/newCollection",method:"POST",body:t}),invalidatesTags:["Collections"]}),updateCollection:s.mutation({query:({id:t,...a})=>({url:`/admin/collections/${t}`,method:"PUT",body:a}),invalidatesTags:["Collections"]}),deleteCollection:s.mutation({query:t=>({url:`/admin/collections/${t}`,method:"DELETE"}),invalidatesTags:["Collections"]}),uploadCollectionImage:s.mutation({query({id:t,body:a}){return{url:`/admin/collections/${t}/upload_image`,method:"PATCH",body:a}},invalidatesTags:["Collections"]}),getSubCollections:s.query({query:()=>"/subcollections",providesTags:["SubCollections"]}),createSubCollection:s.mutation({query:t=>({url:"/admin/newSubCollection",method:"POST",body:t}),invalidatesTags:["SubCollections"]}),updateSubCollection:s.mutation({query:({id:t,...a})=>({url:`/admin/subcollections/${t}`,method:"PUT",body:a}),invalidatesTags:["SubCollections"]}),deleteSubCollection:s.mutation({query:t=>({url:`/admin/subcollections/${t}`,method:"DELETE"}),invalidatesTags:["SubCollections"]}),uploadSubCollectionImage:s.mutation({query({id:t,body:a}){return{url:`/admin/subcollections/${t}/upload_image`,method:"PATCH",body:a}},invalidatesTags:["SubCollections"]}),getSkillLevels:s.query({query:()=>"/skillLevels",providesTags:["SkillLevels"]}),getSkillLevelByKey:s.query({query:t=>`/skillLevels/${t}`}),createSkillLevel:s.mutation({query:t=>({url:"/admin/newSkillLevel",method:"POST",body:t}),invalidatesTags:["SkillLevels"]}),updateSkillLevel:s.mutation({query:({id:t,...a})=>({url:`/admin/skillLevels/${t}`,method:"PUT",body:a}),invalidatesTags:["SkillLevels"]}),deleteSkillLevel:s.mutation({query:t=>({url:`/admin/skillLevels/${t}`,method:"DELETE"}),invalidatesTags:["SkillLevels"]}),getDesigners:s.query({query:()=>"/designers",providesTags:["Designers"]}),getDesignerByKey:s.query({query:t=>`/designers/${t}`}),createDesigner:s.mutation({query:t=>({url:"/admin/newDesigner",method:"POST",body:t}),invalidatesTags:["Designers"]}),updateDesigner:s.mutation({query:({id:t,...a})=>({url:`/admin/designers/${t}`,method:"PUT",body:a}),invalidatesTags:["Designers"]}),deleteDesigner:s.mutation({query:t=>({url:`/admin/designers/${t}`,method:"DELETE"}),invalidatesTags:["Designers"]}),getColors:s.query({query:()=>"/colors",providesTags:["Colors"]}),createColor:s.mutation({query:t=>({url:"/admin/newColor",method:"POST",body:t}),invalidatesTags:["Colors"]}),updateColor:s.mutation({query:({id:t,...a})=>({url:`/admin/colors/${t}`,method:"PATCH",body:a}),invalidatesTags:["Colors"]}),deleteColor:s.mutation({query:t=>({url:`/admin/colors/${t}`,method:"DELETE"}),invalidatesTags:["Colors"]}),getBanners:s.query({query:()=>"/banners",providesTags:["Banners"]}),createBanner:s.mutation({query:t=>({url:"/admin/banners",method:"POST",body:t}),invalidatesTags:["Banners"]}),deleteBanner:s.mutation({query:t=>({url:`/admin/banners/${t}`,method:"DELETE"}),invalidatesTags:["Banners"]}),getDashboardStats:s.query({query:()=>"/admin/dashboard/stats",providesTags:["Orders","Products","Users"]})})}),{useGetProductsQuery:Rs,useGetProductDetailsQuery:pt,useCreateProductMutation:_i,useUpdateProductMutation:Pi,useGetCategoryQuery:Ss,useGetCollectionQuery:as,useGetSkillLevelsQuery:gt,useGetDesignersQuery:jt,useGetCategoryByKeyQuery:Ii,useDeleteProductMutation:Di,useCreateCategoryMutation:Fi,useUpdateCategoryMutation:Ai,useDeleteCategoryMutation:Ti,useCreateCollectionMutation:Ei,useCreateSkillLevelMutation:Li,useCreateDesignerMutation:Oi,useUpdateCollectionMutation:Ri,useDeleteCollectionMutation:$i,useUpdateSkillLevelMutation:Mi,useDeleteSkillLevelMutation:Ui,useUpdateDesignerMutation:qi,useDeleteDesignerMutation:Vi,useUploadProductImagesMutation:zi,useDeleteProductImageMutation:Bi,useGetCollectionDetailsQuery:Wi,useUploadCollectionImageMutation:Hi,useGetColorsQuery:ft,useCreateColorMutation:Gi,useUpdateColorMutation:Ki,useDeleteColorMutation:Yi,useGetSubCategoriesQuery:bt,useCreateSubCategoryMutation:Qi,useUpdateSubCategoryMutation:Ji,useDeleteSubCategoryMutation:Zi,useGetSubCollectionsQuery:_s,useCreateSubCollectionMutation:Xi,useUpdateSubCollectionMutation:ec,useDeleteSubCollectionMutation:sc,useUploadCategoryImageMutation:rh,useUploadSubCategoryImageMutation:nh,useUploadSubCollectionImageMutation:tc,useGetBannersQuery:ac,useCreateBannerMutation:rc,useDeleteBannerMutation:nc,useGetDashboardStatsQuery:lh}=He,Hs=ss({reducerPath:"searchApi",baseQuery:ts({baseUrl:"/api/v1"}),tagTypes:["SearchHistory"],endpoints:s=>({getSearchHistory:s.query({query:()=>"/search/history",providesTags:["SearchHistory"]}),addToSearchHistory:s.mutation({query:t=>({url:"/search/history",method:"POST",body:t}),invalidatesTags:["SearchHistory"]}),deleteSearchTerm:s.mutation({query:t=>({url:"/search/history/term",method:"DELETE",body:t}),invalidatesTags:["SearchHistory"]}),clearSearchHistory:s.mutation({query:()=>({url:"/search/history",method:"DELETE"}),invalidatesTags:["SearchHistory"]})})}),{useGetSearchHistoryQuery:lc,useAddToSearchHistoryMutation:ic,useDeleteSearchTermMutation:cc,useClearSearchHistoryMutation:oc}=Hs,Ps=({height:s="min-h-screen"})=>e.jsx("div",{className:`flex items-center justify-center ${s}`,children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-accent"})}),Q=g.forwardRef(({className:s,type:t,...a},r)=>e.jsx("input",{type:t,className:K("flex h-12 w-full rounded-md border bg-background px-3 py-2 text-sm text-foreground transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...a}));Q.displayName="Input";const dc=ht("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",cart:"bg-brand-end hover:bg-brand-end/80 hover:scale-105 transition-all duration-300",accent:"bg-accent text-foreground hover:bg-accent/80 hover:scale-105 transition-all duration-300",popup:"bg-accent hover:bg-accent/80 text-foreground absolute bottom-4 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 rounded-full",submit:"bg-blue-600 hover:bg-blue-700 text-white"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=g.forwardRef(({className:s,variant:t,size:a,asChild:r=!1,...n},l)=>{const i=r?Mn:"button";return e.jsx(i,{className:K(dc({variant:t,size:a,className:s})),ref:l,...n})});O.displayName="Button";const mc=({searchQuery:s,setSearchQuery:t,handleSearch:a,isSearching:r})=>{const n=l=>{l.key==="Enter"&&s.trim()&&(l.preventDefault(),document.getElementById("search-submit-button").click())};return e.jsxs("div",{className:"relative",children:[e.jsx(Q,{type:"text",value:s,onChange:l=>t(l.target.value),onKeyDown:n,placeholder:"Search products, categories, collections...",className:"pl-10 pr-4 py-2 text-sm",disabled:r}),e.jsx(os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s&&!r&&e.jsx(O,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2",onClick:()=>t(""),children:e.jsx(es,{className:"h-4 w-4"})}),e.jsx(Ns,{asChild:!0,children:e.jsx("button",{id:"search-submit-button",className:"hidden",onClick:()=>a(s)})})]})},uc=({searchHistory:s,handleSearch:t,handleDeleteSearchTerm:a,handleClearAllHistory:r})=>{var l;if(!((l=s==null?void 0:s.searchHistory)!=null&&l.length))return null;const n=i=>{t(i)};return e.jsxs("section",{className:"my-5",children:[e.jsxs("header",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400",children:"Recent Searches"}),e.jsxs(O,{variant:"ghost",size:"sm",onClick:r,className:"h-8 text-gray-400 hover:text-red-400 hover:bg-transparent",children:[e.jsx(Fa,{className:"h-4 w-4"}),e.jsx("span",{children:"Clear All"})]})]}),s.searchHistory.map((i,c)=>e.jsxs("li",{className:"flex items-center justify-between rounded-md hover:bg-brand-dark/50 transition-all duration-200 group",children:[e.jsx(Ns,{asChild:!0,children:e.jsxs(O,{variant:"ghost",className:"flex-1 h-auto p-3 justify-start text-sm hover:bg-transparent group-hover:text-accent min-w-0",onClick:()=>n(i),children:[e.jsx(os,{className:"h-4 w-4 shrink-0 text-gray-400 group-hover:text-accent"}),e.jsx("span",{className:"text-background group-hover:text-accent truncate ml-2",children:i})]})}),e.jsx(O,{variant:"ghost",size:"icon",onClick:o=>a(i,o),className:"h-8 w-8 shrink-0 text-background hover:text-red-400 hover:bg-transparent",children:e.jsx(es,{className:"h-4 w-4"})})]},c))]})},xc=({searchResults:s,searchQuery:t,handleSearch:a})=>{var c;if(!((c=s==null?void 0:s.products)!=null&&c.length))return null;const r={names:new Set,categories:new Set,subCategories:new Set,collections:new Set,subCollections:new Set,colors:new Set},n=o=>o==null?void 0:o.toLowerCase().includes(t.toLowerCase());s.products.forEach(o=>{var x,p,m,u,h;o.product_name.toLowerCase().split(" ").some(j=>j.includes(t.toLowerCase()))&&r.names.add(o.product_name),(x=o.product_category)==null||x.forEach(j=>{n(j.name)&&r.categories.add(j.name)}),(p=o.product_sub_categories)==null||p.forEach(j=>{n(j.name)&&r.subCategories.add(j.name)}),(m=o.product_collection)==null||m.forEach(j=>{n(j.name)&&r.collections.add(j.name)}),(u=o.product_sub_collections)==null||u.forEach(j=>{n(j.name)&&r.subCollections.add(j.name)}),n((h=o.product_color)==null?void 0:h.name)&&r.colors.add(o.product_color.name)});const l=o=>{a(o)},i=(o,d)=>{if(d.size===0)return null;const x=Array.from(d).sort((p,m)=>{const u=p.toLowerCase(),h=m.toLowerCase(),j=t.toLowerCase();if(u===j)return-1;if(h===j)return 1;const y=u.includes(` ${j} `)||u.startsWith(`${j} `)||u.endsWith(` ${j}`),v=h.includes(` ${j} `)||h.startsWith(`${j} `)||h.endsWith(` ${j}`);if(y&&!v)return-1;if(!y&&v)return 1;const f=j.split(/\s+/).filter(b=>b.length>2),w=f.every(b=>u.includes(b)),k=f.every(b=>h.includes(b));return w&&!k?-1:!w&&k?1:u.startsWith(j)?-1:h.startsWith(j)?1:u.localeCompare(h)});return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 mt-5",children:o}),e.jsx("div",{className:"space-y-2",children:x.map((p,m)=>e.jsx(Ns,{asChild:!0,children:e.jsxs("div",{className:"flex items-center text-sm rounded-md hover:bg-brand-dark/50 p-3 cursor-pointer group",onClick:()=>l(p),children:[e.jsx(os,{className:"h-4 w-4 text-gray-400 group-hover:text-accent shrink-0"}),e.jsx("span",{className:"text-background group-hover:text-accent truncate ml-2",children:p})]})},m))})]})};return e.jsxs("div",{className:"space-y-3",children:[i("Product Names",r.names),i("Categories",r.categories),i("Sub Categories",r.subCategories),i("Collections",r.collections),i("Sub Collections",r.subCollections),i("Colors",r.colors)]})},hc=({searchQuery:s,handleSearch:t})=>e.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-10",children:[e.jsx("div",{className:"bg-brand-dark/50 rounded-full p-5 mb-6",children:e.jsx(os,{size:36,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-background mb-2",children:"No Results Found"}),e.jsxs("p",{className:"text-gray-400 mb-6 text-sm md:text-base",children:[`We couldn't find any matches for "`,s,'". Try checking for typos or using more general terms.']}),e.jsx(Ns,{asChild:!0,children:e.jsxs(O,{variant:"accent",onClick:()=>t(s),children:["Search anyway",e.jsx(As,{className:"h-4 w-4"})]})})]}),pc=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-10",children:[e.jsx("div",{className:"bg-brand-dark/50 rounded-full p-5 mb-6",children:e.jsx(os,{size:36,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-background mb-3",children:"No Search History"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm md:text-base",children:"Your recent searches will appear here. Try searching for products, categories, or collections to get started."})]}),gc=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx(Ps,{height:"h-12 w-12"}),e.jsx("p",{className:"text-gray-300 mt-5",children:"Searching..."})]}),Vs="searchHistory",jc=({searchQuery:s,setSearchQuery:t})=>{const a=ee(),[r,n]=g.useState(!1),[l,i]=g.useState([]),{user:c}=ae(k=>k.auth),{data:o}=lc(void 0,{skip:!c}),[d]=ic(),[x]=cc(),[p]=oc();g.useEffect(()=>{if(!c){const k=localStorage.getItem(Vs);i(k?JSON.parse(k):[])}},[c]);const{data:m,isFetching:u}=Rs(s?{keyword:s}:void 0,{skip:!s}),h=k=>{const b=k.trim();i(S=>{const _=[b,...S.filter(P=>P!==b)];return localStorage.setItem(Vs,JSON.stringify(_)),_})},j=async k=>{if(k.trim()){if(n(!0),c)try{await d({term:k.trim()})}catch(b){console.error("Failed to add to search history:",b)}else h(k);setTimeout(()=>{n(!1),a(`/products?keyword=${encodeURIComponent(k.trim())}`)},500)}},y=async(k,b)=>{if(b.stopPropagation(),c)try{await x({term:k}).unwrap()}catch(S){console.error("Failed to delete search term:",S)}else i(S=>{const _=S.filter(P=>P!==k);return localStorage.setItem(Vs,JSON.stringify(_)),_})},v=async()=>{if(c)try{await p().unwrap()}catch(k){console.error("Failed to clear search history:",k)}else i([]),localStorage.removeItem(Vs)},f=c?o==null?void 0:o.searchHistory:l,w=()=>{var k;return r?e.jsx(gc,{}):s?u?e.jsx("div",{className:"py-12",children:e.jsx(Ps,{height:"h-32"})}):(k=m==null?void 0:m.products)!=null&&k.length?e.jsx(xc,{searchResults:m,searchQuery:s,handleSearch:j}):e.jsx(hc,{searchQuery:s,handleSearch:j}):f!=null&&f.length?e.jsx(uc,{searchHistory:c?o:{searchHistory:l},handleSearch:j,handleDeleteSearchTerm:y,handleClearAllHistory:v}):e.jsx(pc,{})};return e.jsxs(vs,{children:[e.jsxs(ws,{children:[e.jsx(Cs,{children:"Search"}),e.jsx(ks,{className:"sr-only",children:"Search for products, categories, collections and more"}),e.jsx(mc,{searchQuery:s,setSearchQuery:t,handleSearch:j,isSearching:r})]}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-none",children:e.jsx("div",{className:"px-5 py-0",children:w()})})]})},fc=ht("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",warning:"border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-200",info:"border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200",success:"border-transparent bg-green-100 text-green-800 hover:bg-green-200",accent:"bg-accent text-foreground border-none",category:"bg-green-600/10 text-green-400 hover:bg-green-600/20 border border-green-600/20 py-1.5",subCategory:"bg-blue-600/10 text-blue-400 hover:bg-blue-600/20 border border-blue-600/20 py-1.5",collection:"bg-purple-600/10 text-purple-400 hover:bg-purple-600/20 border border-purple-600/20 py-1.5",subCollection:"bg-orange-600/10 text-orange-400 hover:bg-orange-600/20 border border-orange-600/20 py-1.5"}},defaultVariants:{variant:"default"}});function oe({className:s,variant:t,...a}){return e.jsx("div",{className:K(fc({variant:t}),s),...a})}const Dr="/assets/worldofminifigs-D8U30pL5.png",Ye=({width:s="w-28"})=>e.jsx("div",{className:"w-full h-full aspect-square bg-brand-dark/50 flex flex-col items-center justify-center gap-4 group-hover:scale-110 transition-transform duration-500 border-b border-gray-600/50",children:e.jsx("img",{src:Dr,alt:"logo",className:`${s} h-auto opacity-30 grayscale`})}),bc=({width:s="w-16"})=>e.jsx("div",{className:"w-full flex md:flex-col gap-2",children:[...Array(6)].map((t,a)=>e.jsx("div",{className:"min-w-[130px] md:min-w-0 aspect-square rounded-lg bg-brand-dark/50 border border-slate-700 flex items-center justify-center",children:e.jsx("img",{src:Dr,alt:"logo",className:`${s} h-auto opacity-30 grayscale`})},a))}),je=({title:s,message:t,minHeight:a="min-h-[700px]"})=>e.jsxs("div",{className:`w-full ${a} flex flex-col items-center justify-center px-5 gap-5 rounded-xl`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-brand/20 rounded-full blur-md"}),e.jsx(Un,{className:"w-20 h-20 text-gray-300 relative animate-pulse"})]}),e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-200 tracking-tight",children:s}),e.jsx("p",{className:"text-gray-400 leading-relaxed text-sm md:text-base",children:t})]})]}),Fr=({item:s,onQuantityUpdate:t})=>{const a=[{Icon:qn,onClick:()=>t(s.product,s.quantity-1,s.stock),disabled:!1},{isQuantity:!0},{Icon:gs,onClick:()=>t(s.product,s.quantity+1,s.stock),disabled:s.quantity>=s.stock}];return e.jsxs("li",{className:"flex gap-3 items-start border-b border-brand-end/50 pb-5 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden",children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx(Ye,{width:"w-24"}),s.discount>0&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsxs(oe,{variant:"accent",children:[s.discount,"% OFF"]})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-medium text-lg line-clamp-1",children:s.name}),e.jsx("div",{className:"h-6 mt-1",children:e.jsx("p",{className:"text-sm text-gray-300",children:s.color})}),e.jsx("div",{className:"h-6",children:e.jsx("p",{className:"text-sm text-gray-300 line-clamp-1",children:s.includes.replace(/^,\s*/,"")})}),e.jsxs("div",{className:"flex items-center justify-between pt-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:gap-2",children:[e.jsxs("span",{className:"text-emerald-400 font-medium text-lg",children:["$",(s.discounted_price||0).toFixed(2)]}),s.price&&s.price>s.discounted_price&&e.jsxs("span",{className:"text-sm text-gray-300 line-through",children:["$",s.price.toFixed(2)]})]}),e.jsx("div",{className:"flex items-center gap-2 border border-brand-end/50 rounded-lg text-white p-1",children:a.map((r,n)=>r.isQuantity?e.jsx("span",{className:"w-8 text-center",children:s.quantity},n):e.jsx(O,{variant:"ghost",size:"icon",className:"h-6 w-6 md:h-8 md:w-8 hover:bg-brand-end/50",onClick:r.onClick,disabled:r.disabled,children:e.jsx(r.Icon,{})},n))})]}),s.stock===0?e.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Currently out of stock"}):s.quantity>=s.stock&&e.jsx("p",{className:"text-xs text-accent mt-1",children:"Maximum stock reached"})]})]})},yc=({total:s,onCheckout:t,checkoutDisabled:a,isAuthenticated:r,hasOutOfStockItems:n})=>e.jsxs("div",{className:"sticky bottom-0 border-t border-brand-end/50 px-5 py-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-200",children:"Total"}),e.jsxs("span",{className:"text-emerald-400 text-xl font-semibold",children:["$",s.toFixed(2)]})]}),e.jsxs("div",{children:[n&&e.jsxs("div",{className:"flex items-start gap-2 pb-5 text-red-400",children:[e.jsx(it,{className:"w-4 h-4 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm",children:"Some items are out of stock. Please remove them to proceed."})]}),e.jsxs(O,{variant:"accent",onClick:t,disabled:a||n,className:"w-full",children:[e.jsx(Ie,{size:18}),r?"Proceed to Checkout":"Login to Checkout"]})]})]}),Nc=()=>{try{const s=localStorage.getItem("cart"),t=s?JSON.parse(s):{cartItems:[],externalItems:[]};return t.externalItems||(t.externalItems=[]),t}catch(s){return console.error("Error loading cart from localStorage:",s),{cartItems:[],externalItems:[]}}},ha=s=>{localStorage.setItem("cart",JSON.stringify({...s,cartItems:s.cartItems,externalItems:s.externalItems||[]}))},vc=Nc(),us=(s,t)=>{var a,r,n;return{...s,name:t.product_name,image:((r=(a=t.product_images)==null?void 0:a[0])==null?void 0:r.url)||s.image,discounted_price:t.discounted_price||t.price,price:t.price,discount:t.discount,stock:t.stock,color:((n=t.product_color)==null?void 0:n.name)||null,includes:t.product_includes||""}},Ar=Yt({name:"cart",initialState:vc,reducers:{addToCart:(s,t)=>{const a=t.payload,r=s.cartItems.findIndex(n=>n.product===a.product);if(r!==-1){const n=s.cartItems[r].quantity,l=s.cartItems[r].stock;if(n>=l)return;s.cartItems[r].quantity+=1}else s.cartItems.unshift({...a,quantity:1});ha(s)},removeFromCart:(s,t)=>{s.cartItems=s.cartItems.filter(a=>a.product!==t.payload),localStorage.setItem("cart",JSON.stringify(s))},updateQuantity:(s,t)=>{const{product:a,quantity:r}=t.payload,n=s.cartItems.findIndex(l=>l.product===a);n!==-1&&(s.cartItems[n].quantity=r),localStorage.setItem("cart",JSON.stringify(s))},clearCart:s=>{s.cartItems=[],localStorage.setItem("cart",JSON.stringify(s))},setExternalCartItems:(s,t)=>{const a=t.payload.reduce((r,n)=>{const l=r.find(i=>i.product===n.product);if(l){const i=Math.min(l.quantity+n.quantity,l.stock);return l.quantity=i,r}return r.push({...n}),r},[]);s.externalItems=a,ha(s)},updateExternalCartQuantity:(s,t)=>{const{_id:a,quantity:r}=t.payload,n=s.externalItems.findIndex(l=>l.product===a);n!==-1&&(s.externalItems[n].quantity=r),localStorage.setItem("cart",JSON.stringify(s))},removeExternalCartItem:(s,t)=>{s.externalItems=s.externalItems.filter(a=>a.product!==t.payload),localStorage.setItem("cart",JSON.stringify(s))},clearExternalCart:s=>{s.externalItems=[],localStorage.setItem("cart",JSON.stringify(s))}},extraReducers:s=>{s.addMatcher(He.endpoints.updateProduct.matchFulfilled,(t,{payload:a})=>{const r=a==null?void 0:a.product;r&&(t.cartItems=t.cartItems.map(n=>n._id===r._id?us(n,r):n),t.externalItems=t.externalItems.map(n=>n._id===r._id?us(n,r):n),localStorage.setItem("cart",JSON.stringify(t)))}),s.addMatcher(He.endpoints.getProducts.matchFulfilled,(t,{payload:a})=>{if(a!=null&&a.products){const r=t.cartItems.map(l=>{const i=a.products.find(c=>c._id===l._id);return i?us(l,i):l}),n=t.externalItems.map(l=>{const i=a.products.find(c=>c._id===l._id);return i?us(l,i):l});(JSON.stringify(r)!==JSON.stringify(t.cartItems)||JSON.stringify(n)!==JSON.stringify(t.externalItems))&&(t.cartItems=r,t.externalItems=n,localStorage.setItem("cart",JSON.stringify(t)))}}),s.addMatcher(He.endpoints.getProductDetails.matchFulfilled,(t,{payload:a})=>{const r=a==null?void 0:a.product;r&&(t.cartItems=t.cartItems.map(n=>n._id===r._id?us(n,r):n),t.externalItems=t.externalItems.map(n=>n._id===r._id?us(n,r):n),localStorage.setItem("cart",JSON.stringify(t)))})}}),wc=s=>s.cart.cartItems,Cc=s=>s.cart.externalItems,Tr=Pr([wc],s=>s.reduce((t,a)=>{const r=Number(a.discounted_price)||0,n=Number(a.quantity)||0;return t+r*n},0)),kc=Pr([Cc],s=>s.reduce((t,a)=>{const r=Number(a.discounted_price)||0,n=Number(a.quantity)||0;return t+r*n},0)),{addToCart:Sc,removeFromCart:Er,updateQuantity:Lr,clearCart:Or,setExternalCartItems:_c,updateExternalCartQuantity:Rr,removeExternalCartItem:$r,clearExternalCart:ih}=Ar.actions,Pc=Ar.reducer,Ic=()=>{const s=ee(),t=Te(),a=js(),{cartItems:r,externalItems:n}=ae(b=>b.cart),{isAuthenticated:l}=ae(b=>b.auth),i=ae(Tr),[c,o]=g.useState(!1),[d,x]=g.useState(!1),p=[...r,...n].map(b=>b.product),{data:m,refetch:u,isLoading:h}=Rs(p.length>0?`ids=${p.join(",")}`:void 0,{skip:p.length===0,pollingInterval:3e4});g.useEffect(()=>{l&&(o(!1),x(!1))},[l]),g.useEffect(()=>{(r.length>0||n.length>0)&&u()},[r.length,n.length,u]);const j=g.useMemo(()=>{const b=S=>S.map(_=>{var D;const P=(D=m==null?void 0:m.products)==null?void 0:D.find(B=>B._id===_.product);return P?{..._,...P}:_});return[...b(r),...b(n)]},[r,n,m]),y=g.useMemo(()=>n.reduce((b,S)=>b+(S.discounted_price??S.price)*S.quantity,0),[n]),v=i+y,f=(b,S,_)=>{const P=n.some(D=>D.product===b);S<1?a(P?$r(b):Er(b)):S>_?N.error(`Only ${_} items available in stock`):a(P?Rr({_id:b,quantity:S}):Lr({product:b,quantity:S}))},w=()=>{if(!l){N.info("Please login to proceed with checkout"),s("/login",{state:{from:t.pathname}});return}s("/checkout?mode=cart")},k=j.some(b=>b.stock===0);return{isLoading:h,updatedCartItems:j,isAuthenticated:l,showLoginMessage:c,checkoutDisabled:d,total:v,hasOutOfStockItems:k,handleQuantityUpdate:f,handleCheckout:w,refetch:u}},yt=()=>{const s=ee(),{isLoading:t,updatedCartItems:a,isAuthenticated:r,showLoginMessage:n,checkoutDisabled:l,total:i,hasOutOfStockItems:c,handleQuantityUpdate:o,handleCheckout:d}=Ic(),x=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-5",children:[e.jsx("div",{className:"bg-brand-dark/50 rounded-full p-8",children:e.jsx(Ie,{size:48,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mt-5 mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm md:text-base leading-6",children:"Looks like you haven't added anything to your cart yet. Explore our top products and build up with awesome bricks!"}),e.jsx(Ns,{asChild:!0,children:e.jsxs(O,{variant:"accent",onClick:()=>{s("/products")},children:["Start Shopping",e.jsx(As,{className:"h-4 w-4"})]})})]});return e.jsxs(vs,{children:[e.jsxs(ws,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-accent rounded-lg",children:e.jsx(Ie,{size:20,className:"text-foreground"})}),e.jsx(Cs,{className:"m-0 sticky top-0 z-50",children:"Shopping Cart"})]}),e.jsx(ks,{className:"sr-only",children:"View your shopping cart items, adjust quantities, and proceed to checkout."})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-5",children:t?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(Ps,{height:"h-full"})}):a.length===0?e.jsx(x,{}):e.jsx("div",{children:e.jsx("ul",{className:"space-y-5",children:a.map(p=>e.jsx(Fr,{item:p,onQuantityUpdate:o},p.product))})})})}),!t&&a.length>0&&e.jsx(yc,{total:i,onCheckout:d,showLoginMessage:n,checkoutDisabled:l,isAuthenticated:r,hasOutOfStockItems:c})]})},Mr=[{id:"home",label:"Home",path:"/",icon:Aa},{id:"products",label:"Product",path:"/products",icon:Ta},{id:"contact",label:"Contact",path:"/contact",icon:qt},{id:"about",label:"About",path:"/about",icon:Es},{id:"minifig-builder",label:"Builder",icon:Vn,path:"https://world-of-minifigs-fig-builder.vercel.app",isExternalLink:!0}],Ur=[{id:"dashboard",label:"Dashboard",path:"/admin",icon:Vt,roleRequired:["admin","employee","superAdmin"]},{id:"orders",label:"My Orders",path:"/my-orders?status=all",icon:ds},{id:"profile",label:"Profile",path:"/profile",icon:Ge},{id:"settings",label:"Settings",path:"/settings",icon:zn}],qr=s=>{const{user:t}=ae(l=>l.auth),a=g.useCallback(()=>{var i;return(i=document.cookie.split("; ").find(c=>c.startsWith("token=")))==null?void 0:i.split("=")[1]},[]),r=g.useCallback(()=>{var i;const l=a();if(t){const c=new URLSearchParams({userName:t.name||"",userEmail:t.email||"",imageUrl:((i=t==null?void 0:t.profile_picture)==null?void 0:i.url)||"",token:l||""});return`${s}?${c.toString()}`}return s},[t,s,a]),n=g.useCallback(l=>{l.preventDefault();const i=r();window.location.href=i},[r]);return{getExternalUrl:r,handleExternalClick:n}},Dc=()=>{const{handleExternalClick:s}=qr("https://world-of-minifigs-fig-builder.vercel.app");return e.jsx("ul",{className:"hidden md:flex items-center justify-center space-x-12 text-md",children:Mr.map(t=>e.jsx("li",{children:t.isExternalLink?e.jsx("a",{href:"#",onClick:a=>s(a,t),className:"text-white hover:text-accent transition-colors duration-200",target:"_blank",children:t.label}):e.jsx(Ts,{to:t.path,className:({isActive:a})=>a?"text-accent font-medium decoration-2 underline underline-offset-8":"text-white hover:text-accent transition-colors duration-200",children:t.label})},t.id))})},Fc={user:null,isAuthenticated:!1},Vr=Yt({initialState:Fc,name:"userSlice",reducers:{setUser(s,t){s.user=t.payload},setisAuthenticated(s,t){s.isAuthenticated=t.payload}}}),Ac=Vr.reducer,{setUser:Pt,setisAuthenticated:pa}=Vr.actions,Ds=ss({reducerPath:"userApi",baseQuery:ts({baseUrl:"/api/v1",credentials:"include",prepareHeaders:s=>{var a;const t=(a=document.cookie.split("; ").find(r=>r.startsWith("token=")))==null?void 0:a.split("=")[1];return t&&s.set("authorization",`Bearer ${t}`),s}}),tagTypes:["User"],endpoints:s=>({getMe:s.query({query:()=>({url:"/profile/me",credentials:"include"}),transformResponse:t=>t.user,providesTags:["User"],async onQueryStarted(t,{dispatch:a,queryFulfilled:r}){try{const{data:n}=await r;a(Pt(n)),a(pa(!0))}catch{a(pa(!1)),a(Pt(null))}}}),getUserAddresses:s.query({query:()=>({url:"/me/addresses",credentials:"include"}),transformResponse:t=>t.addresses,providesTags:["User"]}),getSingleAddress:s.query({query:t=>({url:`/me/addresses/${t}`,credentials:"include"}),transformResponse:t=>t.address}),createAddress:s.mutation({query:t=>({url:"/me/createAddress",method:"POST",body:t,credentials:"include"}),invalidatesTags:["User"]}),updateAddress:s.mutation({query:({id:t,addressData:a})=>({url:`/me/addresses/${t}`,method:"PATCH",body:a,credentials:"include"}),invalidatesTags:["User"]}),deleteAddress:s.mutation({query:t=>({url:`/me/addresses/${t}`,method:"DELETE",credentials:"include"}),invalidatesTags:["User"]}),getAllUsers:s.query({query:()=>({url:"/admin/users",credentials:"include"}),transformResponse:t=>t,providesTags:["User"]}),deleteUser:s.mutation({query:t=>({url:`/admin/users/${t}`,method:"DELETE",credentials:"include"}),invalidatesTags:["User"]}),getSingleUser:s.query({query:t=>({url:`/admin/users/${t}`,credentials:"include"}),transformResponse:t=>t,providesTags:["User"]}),updateUser:s.mutation({query:({id:t,...a})=>({url:`/admin/users/${t}`,method:"PUT",body:a,credentials:"include"}),invalidatesTags:["User"]}),updateProfilePicture:s.mutation({query:t=>({url:"/me/profile/updateAvatar",method:"PUT",body:t,credentials:"include"}),invalidatesTags:["User"],async onQueryStarted(t,{dispatch:a,queryFulfilled:r}){try{const{data:n}=await r;a(Pt(n.user))}catch{}}}),updateProfile:s.mutation({query:t=>({url:"/me/profile/updateProfile",method:"PUT",body:t,credentials:"include"}),invalidatesTags:["User"]}),updatePassword:s.mutation({query:t=>({url:"/me/profile/updatePassword",method:"PUT",body:t,credentials:"include"})})})}),{useGetMeQuery:Nt,useGetUserAddressesQuery:Jt,useGetSingleAddressQuery:ch,useCreateAddressMutation:Tc,useUpdateAddressMutation:zr,useDeleteAddressMutation:Br,useGetAllUsersQuery:Ec,useDeleteUserMutation:Lc,useGetSingleUserQuery:Oc,useUpdateUserMutation:Rc,useUpdateProfilePictureMutation:$c,useUpdateProfileMutation:Mc,useUpdatePasswordMutation:Uc}=Ds,Gs=ss({reducerPath:"authApi",baseQuery:ts({baseUrl:"/api/v1",credentials:"include"}),endpoints:s=>({register:s.mutation({query(t){return{url:"/register",method:"POST",body:t}}}),login:s.mutation({query:t=>({url:"/login",method:"POST",body:t}),async onQueryStarted(t,{dispatch:a,queryFulfilled:r}){try{await r,await a(Ds.endpoints.getMe.initiate(null))}catch(n){console.log(n)}}}),logout:s.query({query:()=>({url:"/logout",method:"POST"})}),verifyEmail:s.mutation({query:t=>({url:`/verify_user/${t}`,method:"GET",credentials:"include"}),transformResponse:t=>({success:t.status==="success",message:t.message})}),forgotPassword:s.mutation({query:t=>({url:"/password/forgot",method:"POST",body:t})}),resetPassword:s.mutation({query:({token:t,...a})=>({url:`/password/reset/${t}`,method:"PUT",body:a})}),contact:s.mutation({query:t=>({url:"/contact",method:"POST",body:t})})})}),{useLoginMutation:qc,useRegisterMutation:Vc,useLazyLogoutQuery:Wr,useVerifyEmailMutation:zc,useForgotPasswordMutation:Bc,useResetPasswordMutation:Wc,useContactMutation:Hc}=Gs,$=g.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:K("rounded-lg bg-brand-dark/50 text-card-foreground shadow-sm",s),...t}));$.displayName="Card";const H=g.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:K("flex flex-col space-y-1.5 p-6",s),...t}));H.displayName="CardHeader";const re=g.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:K("text-2xl font-semibold leading-none tracking-tight",s),...t}));re.displayName="CardTitle";const rs=g.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:K("text-sm text-muted-foreground",s),...t}));rs.displayName="CardDescription";const M=g.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:K("p-6 pt-0",s),...t}));M.displayName="CardContent";const Hr=g.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:K("flex items-center p-6 pt-0",s),...t}));Hr.displayName="CardFooter";const Zt=({children:s,...t})=>e.jsx(Ns,{asChild:!0,...t,children:s}),ga=({to:s,icon:t,label:a,isActive:r,isExternalLink:n})=>{const{handleExternalClick:l}=qr("https://world-of-minifigs-fig-builder.vercel.app");return e.jsx(Zt,{children:n?e.jsxs("a",{href:"#",onClick:l,className:"flex items-center gap-3 px-4 py-3 rounded-md transition-all duration-200 w-full text-background hover:bg-brand-dark/50 hover:text-accent",target:"_blank",children:[t,e.jsx("span",{className:"flex-1 text-left",children:a})]}):e.jsxs(Ts,{to:s,className:`flex items-center gap-3 px-4 py-3 rounded-md transition-all duration-200 w-full ${r?"bg-accent text-foreground font-medium":"text-background hover:bg-brand-dark/50 hover:text-accent"}`,children:[t,e.jsx("span",{className:"flex-1 text-left",children:a})]})})},ja=({variant:s,icon:t,label:a,onClick:r})=>e.jsx(Zt,{children:e.jsxs(O,{variant:s,className:"w-full flex items-center justify-center gap-2",onClick:r,children:[e.jsx("span",{children:a}),t]})}),Gc=({user:s})=>{const t=ee(),a=Te(),[r,{data:n,isError:l,error:i,isSuccess:c}]=Wr();g.useEffect(()=>{var h;l&&N.error(((h=i==null?void 0:i.data)==null?void 0:h.message)||"An error occurred during logout"),c&&N.success((n==null?void 0:n.message)||"Logout successful",{autoClose:1e3,onClose:()=>t(0)})},[l,i,c,n,t]);const o=s?Ur.filter(h=>!h.roleRequired||Array.isArray(h.roleRequired)&&h.roleRequired.includes(s.role)):[],d=h=>{const j=h.split("?")[0];return a.pathname.startsWith(j)},x=()=>{var h;return e.jsx($,{className:"flex items-center gap-3 mb-5 p-5",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:(h=s==null?void 0:s.profile_picture)!=null&&h.url?e.jsx("img",{src:s.profile_picture.url,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-accent flex items-center justify-center text-foreground text-lg font-semibold",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-lg text-background font-medium line-clamp-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-300 line-clamp-1",children:s.email})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-dark flex items-center justify-center",children:e.jsx(Ge,{size:24,className:"text-accent"})}),e.jsx(Zt,{children:e.jsxs(Ts,{to:"/login",className:"flex items-center justify-between flex-1 text-background group hover:text-accent",children:[e.jsx("span",{className:"font-medium",children:"Sign In"}),e.jsx(As,{size:20,className:"group-hover:text-accent"})]})})]})})},p=()=>e.jsx("div",{className:"space-y-2",children:Mr.map(h=>e.jsx(ga,{to:h.path,icon:e.jsx(h.icon,{size:20}),label:h.label,isActive:a.pathname===h.path,isExternalLink:h.isExternalLink},h.id))}),m=()=>s&&o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-3 border-t border-brand-end/50"}),e.jsx("div",{className:"space-y-2",children:o.map(h=>e.jsx(ga,{to:h.path,icon:e.jsx(h.icon,{size:20}),label:h.label,isActive:d(h.path)},h.id))})]}),u=()=>e.jsx("div",{className:"p-3 border-t border-brand-end/50 mt-auto",children:s?e.jsx(ja,{variant:"destructive",icon:e.jsx(Ea,{size:20}),label:"Logout",onClick:()=>r()}):e.jsx(ja,{variant:"accent",icon:e.jsx(As,{size:20}),label:"Create Account",onClick:()=>t("/register")})});return e.jsxs(vs,{children:[e.jsxs(ws,{className:"sr-only",children:[e.jsx(Cs,{children:"Mobile Menu"}),e.jsx(ks,{children:"This is the mobile menu. It is used to navigate the website on a mobile device."})]}),e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"px-5 pt-16",children:x()}),e.jsxs("nav",{className:"px-5 flex-1",children:[p(),m()]}),u()]})]})},Gr=Hn,Kr=Gn,Kc=g.forwardRef(({className:s,inset:t,children:a,...r},n)=>e.jsxs(La,{ref:n,className:K("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...r,children:[a,e.jsx(fs,{className:"ml-auto"})]}));Kc.displayName=La.displayName;const Yc=g.forwardRef(({className:s,...t},a)=>e.jsx(Oa,{ref:a,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Yc.displayName=Oa.displayName;const Xt=g.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(Bn,{children:e.jsx(Ra,{ref:r,sideOffset:t,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md bg-brand-dark border border-brand-end/50 p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ",s),...a})}));Xt.displayName=Ra.displayName;const Xs=g.forwardRef(({className:s,inset:t,...a},r)=>e.jsx($a,{ref:r,className:K("relative flex select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors text-background cursor-pointer focus:bg-accent focus:text-foreground focus:font-medium data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...a}));Xs.displayName=$a.displayName;const Qc=g.forwardRef(({className:s,children:t,checked:a,...r},n)=>e.jsxs(Ma,{ref:n,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ua,{children:e.jsx(Ls,{className:"h-4 w-4"})})}),t]}));Qc.displayName=Ma.displayName;const Jc=g.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(qa,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ua,{children:e.jsx(Wn,{className:"h-2 w-2 fill-current"})})}),t]}));Jc.displayName=qa.displayName;const Yr=g.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(Va,{ref:r,className:K("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));Yr.displayName=Va.displayName;const Zc=g.forwardRef(({className:s,...t},a)=>e.jsx(za,{ref:a,className:K("-mx-1 my-1 h-px bg-muted",s),...t}));Zc.displayName=za.displayName;const Xc=()=>{var x,p,m,u;const s=ee(),t=Te(),{user:a}=ae(h=>h.auth),[r,{data:n,isError:l,error:i,isSuccess:c}]=Wr();g.useEffect(()=>{var h;l&&N.error(((h=i==null?void 0:i.data)==null?void 0:h.message)||"An error occurred during logout"),c&&N.success((n==null?void 0:n.message)||"Logout successful",{autoClose:1e3,onOpen:()=>{s(0)}})},[l,i,c,n,s]);const o=Ur.filter(h=>!h.roleRequired||Array.isArray(h.roleRequired)&&h.roleRequired.includes(a.role)),d=h=>{const j=h.split("?")[0];return t.pathname.startsWith(j)};return e.jsxs(Gr,{children:[e.jsx(Kr,{className:"w-8 h-8 rounded-full overflow-hidden flex items-center justify-center",children:(x=a==null?void 0:a.profile_picture)!=null&&x.url?e.jsx("img",{src:a.profile_picture.url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx(O,{variant:"accent",children:(p=a==null?void 0:a.name)==null?void 0:p.charAt(0).toUpperCase()})}),e.jsxs(Xt,{className:"text-background mr-5 mt-1",children:[e.jsxs(Yr,{className:"flex items-center space-x-3 border-b border-brand-end/50 pb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(m=a==null?void 0:a.profile_picture)!=null&&m.url?e.jsx("img",{src:a.profile_picture.url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx(O,{variant:"accent",children:(u=a==null?void 0:a.name)==null?void 0:u.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-medium",children:a==null?void 0:a.name}),e.jsx("p",{className:"text-xs text-gray-300",children:a==null?void 0:a.email})]})]}),e.jsx("div",{className:"flex flex-col gap-2 py-1 border-b border-brand-end/50",children:o.map(h=>{const j=h.icon,y=d(h.path);return e.jsxs(Xs,{onClick:()=>s(h.path),className:`${y?"bg-accent text-foreground font-medium":""}`,children:[e.jsx(j,{className:`mr-2 h-4 w-4 ${y?"text-foreground":""}`}),e.jsx("span",{children:h.label})]},h.id)})}),e.jsxs(Xs,{className:"text-red-500 mt-1",onClick:()=>r(),children:[e.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})},eo=()=>{const[s,t]=g.useState(""),{user:a}=ae(o=>o.auth),{cartItems:r=[],externalItems:n=[]}=ae(o=>o.cart),l=r.length+n.length,i=[{id:"search",icon:e.jsx(os,{size:24}),component:e.jsx(jc,{searchQuery:s,setSearchQuery:t})},{id:"cart",icon:e.jsxs(e.Fragment,{children:[e.jsx(Ie,{size:24}),e.jsx("span",{className:"absolute -top-2 -right-2 text-xs rounded-full h-4 w-4 flex items-center justify-center bg-accent text-foreground",children:l})]}),component:e.jsx(yt,{})},{id:"user",className:"hidden md:flex",content:a?e.jsx(Xc,{}):e.jsx(Ts,{to:"/login",children:e.jsx(Ge,{size:24})}),isStandalone:!0},{id:"menu",icon:e.jsx(Kn,{size:24}),component:e.jsx(Gc,{user:a}),className:"md:hidden"}],c=({id:o,icon:d,component:x,className:p,content:m,isStandalone:u})=>e.jsx("div",{className:`flex items-center justify-center ${p}`,children:u?m:e.jsxs(bs,{children:[e.jsx(ys,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer relative",children:d})}),x]})},o);return e.jsx("nav",{className:"bg-brand-start fixed w-full top-0 z-50 border-b border-brand-end/50",children:e.jsx("div",{className:"max-w-[1920px] mx-auto",children:e.jsxs("div",{className:"flex items-center justify-between h-[85px] p-5",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(Ts,{to:"/",children:e.jsx("img",{className:"h-20 p-1",src:Si,alt:"logo"})})}),e.jsx("div",{className:"flex-grow flex justify-center",children:e.jsx(Dc,{})}),e.jsx("div",{className:"flex items-center gap-5",children:i.map(c)})]})})})},so=[{id:1,title:"Account",links:[{label:"My Account",action:"myAccount"},{label:"Login",path:"/login"},{label:"Register",path:"/register"},{label:"Cart",action:"cart"}]},{id:2,title:"Quick Links",links:[{label:"Privacy Policy",path:"/privacy-policy"},{label:"Terms Of Use",path:"/terms-of-use"},{label:"Contact",path:"/contact"}]},{id:3,title:"Support",links:[{label:"Lehi, Utah 84043",action:"location"},{label:"brickextremeofficial@gmail.com",action:"email"}]},{id:4,title:"World of Minifigs",description:"Follow us on social media to stay updated on new releases, exclusive promotions, and our latest collections.",isSocial:!0,links:[{id:"facebook",icon:Ba,color:"hover:text-blue-500",href:"https://www.facebook.com/profile.php?id=61552234252330",label:"Facebook"},{id:"instagram",icon:ct,color:"hover:text-pink-500",href:"https://www.instagram.com/theworldofminifigs/",label:"Instagram"}]}],to=()=>{const{isAuthenticated:s}=ae(i=>i.auth),t=ee(),a={myAccount:()=>{s?t("/profile"):(N.info("Please login to access your account"),t("/login"))},email:()=>{window.location.href="mailto:brickextremeofficial@yahoo.com"},default:i=>i&&t(i)},r=({item:i})=>{if(i.icon){const d=i.icon;return e.jsx(De,{to:i.href,target:"_blank",rel:"noopener noreferrer","aria-label":i.label,className:"w-10 h-10 rounded-full bg-brand-end/50 flex items-center justify-center",children:e.jsx(d,{className:`w-5 h-5 text-gray-200 ${i.color} transition-colors duration-200`})})}const c="hover:text-accent hover:translate-x-2 transition-transform duration-200 py-1 text-sm sm:text-base",o=()=>{(a[i.action]||(()=>a.default(i.path)))()};return i.action==="cart"?e.jsxs(bs,{children:[e.jsx(ys,{className:c,children:i.label}),e.jsx(yt,{})]}):e.jsx("div",{onClick:o,className:`${c} cursor-pointer`,children:i.label})},n=({title:i})=>e.jsxs("h3",{className:"text-xl font-bold relative",children:[i,e.jsx("span",{className:"absolute -bottom-2 left-0 w-12 h-0.5 bg-accent"})]}),l=({id:i,title:c,description:o,links:d,isSocial:x})=>e.jsxs("div",{className:`space-y-5 ${x?"col-span-2 lg:col-span-1":""}`,children:[e.jsx(n,{title:c}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[o&&e.jsx("p",{className:"text-sm sm:text-base leading-6",children:o}),e.jsx("div",{className:x?"flex items-center space-x-2":"space-y-2",children:d.map((p,m)=>e.jsx(r,{item:p},p.id||`${p.label}-${m}`))})]})]},i);return e.jsx("footer",{className:"bg-brand-dark/50",children:e.jsxs("div",{className:"max-w-[1920px] mx-auto px-5 w-full",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 py-10",children:so.map(l)}),e.jsxs("div",{className:"text-center text-sm text-gray-300 py-5 border-t border-brand-end/50",children:[" Copyright World of Minifigs ",new Date().getFullYear(),". All rights reserved"]})]})})},ao=()=>{const[s,t]=g.useState(!1),{pathname:a}=Te(),r=()=>{window.pageYOffset>300?t(!0):t(!1)},n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return g.useEffect(()=>(window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}),[]),g.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[a]),e.jsx(Qt,{children:s&&e.jsx(T.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.3},className:"fixed bottom-4 right-4 z-[9999]",whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(T.div,{transition:{repeat:1/0,duration:2,repeatType:"reverse"},children:e.jsx(O,{className:"rounded-full p-2 bg-accent hover:bg-accent-secondary text-foreground",size:"icon",onClick:n,children:e.jsx(Yn,{className:"h-4 w-4"})})})})})},Qr=[{icon:Vt,label:"Dashboard",path:"/admin"},{icon:ds,label:"Products",path:"/admin/products"},{icon:Ze,label:"Product Colors",path:"/admin/colors"},{icon:Qn,label:"Categories",path:"/admin/categories",hasSubMenu:!0,subMenu:[{label:"All Categories",path:"/admin/categories"},{label:"Sub Categories",path:"/admin/subcategories"}]},{icon:Jn,label:"Collections",path:"/admin/collections",hasSubMenu:!0,subMenu:[{label:"All Collections",path:"/admin/collections"},{label:"Sub Collections",path:"/admin/subcollections"}]},{icon:Zn,label:"Skill Levels",path:"/admin/skill-levels"},{icon:Wa,label:"Designers",path:"/admin/designers"},{icon:Ie,label:"Orders",path:"/admin/orders"},{icon:zt,label:"Users",path:"/admin/users"}],Jr=({item:s,isActive:t,isMinimized:a,isOpen:r,onToggle:n,onNavigate:l})=>{const i=Te(),c=x=>i.pathname.startsWith(x);g.useEffect(()=>{var x;s.hasSubMenu&&((x=s.subMenu)!=null&&x.some(p=>c(p.path)))&&!r&&n()},[]);const o=`
    w-5 h-5 opacity-70 group-hover:opacity-100 transition-opacity
    ${t?"opacity-100":""}
  `,d=x=>`
    flex items-center transition-all duration-200 group
    ${a?"p-3 rounded-lg":"gap-3 px-4 py-2 rounded-lg w-full"}
    ${x?"bg-accent text-foreground font-medium":"text-md hover:bg-accent hover:text-black"}
  `;return s.hasSubMenu?e.jsxs("div",{className:`w-full ${a?"flex justify-center":""}`,children:[e.jsxs("button",{onClick:n,className:`
            flex items-center transition-all duration-200 w-full
            ${a?"justify-center p-3":"gap-5 px-4 py-3 pr-2"}
            ${t?"text-white font-medium":"text-md hover:bg-accent hover:text-foreground rounded-lg font-medium"}
          `,children:[s.icon&&e.jsx(s.icon,{className:o}),!a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 text-left",children:s.label}),r?e.jsx(ot,{className:"w-4 h-4"}):e.jsx(fs,{className:"w-4 h-4"})]})]}),!a&&e.jsx("div",{className:`
              ml-9 overflow-hidden transition-all duration-200
              ${r?"opacity-100 max-h-[500px]":"opacity-0 max-h-0"}
            `,children:e.jsx("div",{className:"mt-1 space-y-3 border-l border-gray-700 pl-2",children:s.subMenu.map((x,p)=>{const m=c(x.path);return e.jsxs(De,{to:x.path,className:d(m),onClick:()=>l==null?void 0:l(),children:[x.icon&&e.jsx(x.icon,{className:"w-4 h-4 opacity-70 group-hover:opacity-100"}),e.jsx("span",{className:"text-sm",children:x.label})]},p)})})})]}):e.jsxs(De,{to:s.path,title:s.label,onClick:()=>l==null?void 0:l(),className:`
        flex items-center transition-all duration-200 group
        ${a?"p-3 rounded-lg":"gap-5 px-4 py-3 rounded-lg w-full"}
        ${t?"bg-accent text-black":"text-md hover:bg-accent hover:text-foreground"}
      `,children:[e.jsx(s.icon,{className:o}),!a&&e.jsx("span",{className:"font-medium",children:s.label})]})},ro=()=>{const[s,t]=g.useState(!1),a=Te(),[r,n]=g.useState(()=>localStorage.getItem("openMenuPath")),l=c=>{const o=r===c?null:c;n(o),o?localStorage.setItem("openMenuPath",o):localStorage.removeItem("openMenuPath")},i=c=>{var d;return c==="/admin"?a.pathname===c:((d={"/admin/products":["/admin/products","/admin/new-product","/admin/update-product","/admin/product-gallery"],"/admin/colors":["/admin/colors","/admin/new-color","/admin/update-color"],"/admin/categories":["/admin/categories","/admin/new-category","/admin/update-category","/admin/subcategories","/admin/new-subcategory","/admin/update-subcategory"],"/admin/collections":["/admin/collections","/admin/new-collection","/admin/update-collection","/admin/subcollections","/admin/new-subcollection","/admin/update-subcollection"],"/admin/skill-levels":["/admin/skill-levels","/admin/new-skill-level","/admin/update-skill-level"],"/admin/designers":["/admin/designers","/admin/new-designer","/admin/update-designer"],"/admin/users":["/admin/users","/admin/new-user","/admin/update-user"],"/admin/orders":["/admin/orders"],"/admin/reviews":["/admin/reviews"]}[c])==null?void 0:d.some(x=>a.pathname===x||a.pathname.startsWith(x+"/")))||!1};return e.jsxs(bs,{open:s,onOpenChange:t,children:[e.jsx(ys,{className:"fixed bottom-5 right-5 z-50 p-3 bg-accent rounded-full lg:hidden",children:e.jsx(Xn,{size:28,className:"text-foreground"})}),e.jsxs(vs,{side:"left",onInteractOutside:()=>t(!1),children:[e.jsxs(ws,{className:"pb-0",children:[e.jsx(Cs,{children:"Admin Dashboard"}),e.jsx(ks,{className:"sr-only",children:"Manage your admin dashboard"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-none text-background",children:e.jsx("nav",{className:"p-4 space-y-2",children:Qr.map((c,o)=>e.jsx(Jr,{item:c,isActive:i(c.path),isMinimized:!1,isOpen:c.path===r,onToggle:()=>{l(c.path)},onNavigate:()=>{c.hasSubMenu||t(!1)}},o))})})]})]})},no=({isMinimized:s,toggleMinimize:t})=>{const a=Te(),[r,n]=g.useState(()=>localStorage.getItem("openMenuPath")),l=c=>{const o=r===c?null:c;n(o),o?localStorage.setItem("openMenuPath",o):localStorage.removeItem("openMenuPath")},i=c=>{var d;return c==="/admin"?a.pathname===c:((d={"/admin/products":["/admin/products","/admin/new-product","/admin/update-product","/admin/product-gallery"],"/admin/colors":["/admin/colors","/admin/new-color","/admin/update-color"],"/admin/categories":["/admin/categories","/admin/new-category","/admin/update-category","/admin/subcategories","/admin/new-subcategory","/admin/update-subcategory"],"/admin/collections":["/admin/collections","/admin/new-collection","/admin/update-collection","/admin/subcollections","/admin/new-subcollection","/admin/update-subcollection"],"/admin/skill-levels":["/admin/skill-levels","/admin/new-skill-level","/admin/update-skill-level"],"/admin/designers":["/admin/designers","/admin/new-designer","/admin/update-designer"],"/admin/users":["/admin/users","/admin/new-user","/admin/update-user"],"/admin/orders":["/admin/orders"],"/admin/reviews":["/admin/reviews"]}[c])==null?void 0:d.some(x=>a.pathname===x||a.pathname.startsWith(x+"/")))||!1};return e.jsxs("div",{className:`
        bg-darkBrand/30 border-r border-brand-end/50 hidden lg:block
        transition-all duration-300 ease-in-out h-full relative
        ${s?"w-24":"w-72"}
      `,children:[e.jsx(O,{variant:"ghost",size:"icon",onClick:t,className:"absolute top-6 -right-5 z-50 hover:text-black",children:s?e.jsx(el,{className:"w-10 h-10"}):e.jsx(sl,{className:"w-10 h-10"})}),e.jsxs("div",{className:"flex flex-col h-full",children:[!s&&e.jsx("div",{className:"px-8 pt-9 pb-5",children:e.jsx("h1",{className:"text-xl font-bold tracking-wide",children:"World of Minifigures"})}),e.jsx("nav",{className:`
            p-4 space-y-2 overflow-y-auto scrollbar-none flex-1
            ${s?"flex flex-col items-center":""}
          `,children:Qr.map((c,o)=>e.jsx(Jr,{item:c,isActive:i(c.path),isMinimized:s,isOpen:c.path===r,onToggle:()=>l(c.path)},o))})]})]})},lo=()=>{const[s,t]=g.useState(!1),a=()=>{t(!s)};return e.jsxs(e.Fragment,{children:[e.jsx(ro,{}),e.jsx(no,{isMinimized:s,toggleMinimize:a})]})},io=()=>{const{user:s}=ae(l=>l.auth),t=Te(),a=["admin","employee","superAdmin"].includes(s==null?void 0:s.role),r=t.pathname.startsWith("/admin"),n=a&&r;return e.jsxs("div",{className:"flex flex-col min-h-screen bg-brand-start text-background",children:[e.jsx(eo,{}),e.jsx("div",{className:`${r?"hidden lg:block":"block"}`,children:e.jsx(ao,{})}),n?e.jsxs("div",{className:"flex flex-1 pt-[90px] max-w-[1920px] mx-auto w-full",children:[e.jsx("div",{className:"lg:sticky lg:top-[85px] lg:h-[calc(100vh-85px)]",children:e.jsx(lo,{})}),e.jsx("main",{className:"flex-1 overflow-y-auto scrollbar-none",children:e.jsx(Js,{})})]}):e.jsx("main",{className:"flex-grow pt-[85px]",children:e.jsx("div",{className:"max-w-[1920px] mx-auto w-full",children:e.jsx(Js,{})})}),e.jsx(to,{})]})},co=ht("text-sm font-medium text-foreground leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=g.forwardRef(({className:s,...t},a)=>e.jsx(Ha,{ref:a,className:K(co(),s),...t}));R.displayName=Ha.displayName;const oo="/assets/Login-CNgZQuDM.png",le=({title:s})=>e.jsx(e.Fragment,{children:e.jsx(tl,{children:e.jsxs("title",{children:["World of Minifigs - ",s]})})}),Qe={containerVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},cardVariants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:12}}},titleVariants:{hidden:{opacity:0,y:-10},visible:{opacity:1,y:0,transition:{duration:.4,ease:[.22,1,.36,1]}}},buttonVariants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,delay:.1}}}};({...Qe,containerVariants:{...Qe.containerVariants,visible:{...Qe.containerVariants.visible}}});({...Qe,containerVariants:{...Qe.containerVariants,visible:{...Qe.containerVariants.visible}}});({...Qe,containerVariants:{...Qe.containerVariants,visible:{...Qe.containerVariants.visible}}});const ce={imageContainerVariants:{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},transition:{duration:.8,type:"spring",stiffness:90,damping:20}},imageVariants:{whileHover:{scale:1.03,transition:{duration:.3,ease:"easeOut"}}},formContainerVariants:{initial:{opacity:0,x:100},animate:{opacity:1,x:0},transition:{duration:.8,type:"spring",stiffness:90,damping:20,delay:.2}},headerVariants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6}},inputVariants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},getInputTransition:s=>({delay:.6+s*.1,duration:.5}),buttonVariants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5}},linkVariants:{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5}}},fa={containerVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},itemVariants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}}},cs={containerVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},formVariants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15,delay:.2}}},sideContentVariants:{hidden:{opacity:0,x:30},visible:{opacity:1,x:0,transition:{type:"spring",stiffness:100,damping:15,delay:.4}}},socialVariants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:100,damping:15}}},iconVariants:{hidden:{opacity:0,y:10},visible:s=>({opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15,delay:.1*s}})},faqVariants:{hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:100,damping:15,delay:.2}}},faqItemVariants:{hidden:{opacity:0,y:10},visible:s=>({opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15,delay:.1*s}})}},ge={heroVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},heroTitleVariants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},heroTextVariants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15,delay:.2}}},statsContainerVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15,delayChildren:.1}}},statCardVariants:{hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15}}},storyImageVariants:{hidden:{opacity:0,x:-50},visible:{opacity:1,x:0,transition:{type:"spring",stiffness:100,damping:15}}},storyContentVariants:{hidden:{opacity:0,x:50},visible:{opacity:1,x:0,transition:{type:"spring",stiffness:100,damping:15,delay:.2}}},orderContainerVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},orderHeaderVariants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},orderStepVariants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},chooseUsContainerVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},chooseUsCardVariants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},testimonialContainerVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15,delayChildren:.1}}},testimonialCardVariants:{hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15}}},exploreContainerVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5,staggerChildren:.2}}},exploreTitleVariants:{hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},exploreTextVariants:{hidden:{opacity:0},visible:{opacity:1,transition:{delay:.2,duration:.5}}},exploreButtonVariants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{delay:.4,duration:.5}}}},mo=()=>{var j,y;const[s,t]=g.useState(""),[a,r]=g.useState(""),n=ee(),l=Te(),i=typeof((j=l.state)==null?void 0:j.from)=="string"?l.state.from:"/",c=(y=l.state)==null?void 0:y.returnTo,{isAuthenticated:o,user:d}=ae(v=>v.auth),[x,{isLoading:p}]=qc();g.useEffect(()=>{var v;if(o){if(c==="product"&&((v=l.state)==null?void 0:v.action)==="vote"){n(i);return}const f=["admin","employee","superAdmin"].includes(d==null?void 0:d.role),w=typeof i=="string"&&i.startsWith("/admin")?f?i:"/":f?"/admin":i;n(w)}},[o,d,n,i,c]);const m=async v=>{var f;v.preventDefault();try{const w=await x({email_username:s,password:a}).unwrap();N.success(w==null?void 0:w.message)}catch(w){N.error(((f=w==null?void 0:w.data)==null?void 0:f.message)||"An error occurred during login")}},u=[{id:"email_username",label:"Email or Username",type:"text",placeholder:"Enter your email or username",required:!0,onChange:v=>t(v.target.value),transition:ce.getInputTransition(0)},{id:"password",label:"Password",type:"password",placeholder:"Enter your password",required:!0,onChange:v=>r(v.target.value),transition:ce.getInputTransition(1)}],h=[{to:"/terms-of-use",label:"Terms of Service"},{to:"/privacy-policy",label:"Privacy Policy"}];return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Login"}),e.jsxs("section",{className:"px-3 py-5 container mx-auto grid grid-cols-1 md:grid-cols-2 gap-2 max-w-7xl",children:[e.jsx(T.div,{...ce.formContainerVariants,className:"w-full md:px-5 py-10 md:border border-brand-end/50 rounded-2xl",children:e.jsxs("div",{children:[e.jsxs(T.div,{className:"mb-8",children:[e.jsx(T.h1,{className:"text-4xl font-bold",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Welcome back!"}),e.jsx(T.p,{className:"text-gray-400 text-sm mt-2",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Sign in to your account to continue"})]}),e.jsxs("form",{onSubmit:m,className:"space-y-5",children:[u.map((v,f)=>e.jsxs(T.div,{...ce.inputVariants,transition:v.transition,className:"space-y-2",children:[e.jsx(R,{htmlFor:v.id,className:"text-background",children:v.label}),e.jsx(Q,{id:v.id,type:v.type,placeholder:v.placeholder,required:v.required,onChange:v.onChange})]},v.id)),e.jsx("div",{className:"flex justify-end",children:e.jsx(T.div,{...ce.inputVariants,transition:ce.getInputTransition(2),children:e.jsx(De,{to:"/password/forgot-password",className:"text-sm text-accent hover:text-accent/80",children:"Forgot your password?"})})}),e.jsx(T.div,{...ce.buttonVariants,children:e.jsx(O,{type:"submit",variant:"submit",className:"w-full",size:"lg",disabled:p,children:p?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ie,{className:"animate-spin w-5 h-5"}),e.jsx("span",{children:"Logging in..."})]}):"Log In"})})]}),e.jsx(T.div,{className:"text-gray-400 text-sm pt-5 flex items-start leading-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},children:e.jsxs("p",{children:["By logging in, you agree to our"," ",h.map((v,f)=>e.jsxs("span",{children:[e.jsx(De,{to:v.to,className:"text-blue-400 hover:text-blue-300",children:v.label}),f===0&&" and "]},v.to))]})}),e.jsx(T.div,{className:"text-center text-gray-300 pt-5",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},children:e.jsxs("p",{children:["Don't have an account?"," ",e.jsx(De,{to:"/register",className:"text-accent hover:text-accent/80",children:"Register here"})]})})]})}),e.jsx(T.div,{...ce.imageContainerVariants,className:"hidden md:block place-self-center",children:e.jsx(T.div,{className:"max-w-xl w-full",...ce.imageVariants,children:e.jsx("img",{src:oo,alt:"Login illustration",className:"w-full h-auto object-contain"})})})]})]})},uo="/assets/Register-B_LO93Jy.png",xo=()=>{const[s,t]=g.useState({fullname:"",email:"",username:"",password:"",confirmPassword:"",contact:""}),{user:a}=ae(b=>b.auth),r=ee(),[n,{isLoading:l,isError:i,error:c,data:o,isSuccess:d}]=Vc(),[x,p]=g.useState({minLength:!1,hasUppercase:!1,hasLowercase:!1,hasNumber:!1,hasSpecial:!1}),[m,u]=g.useState(!1);g.useEffect(()=>{a&&r("/")},[a]),g.useEffect(()=>{var b;i&&N.error(((b=c==null?void 0:c.data)==null?void 0:b.message)||"Registration failed. Please try again."),d&&(N.success((o==null?void 0:o.message)||"Registration successful!"),r("/login"))},[i,c,d,o,r]);const h=b=>{p({minLength:b.length>=6,hasUppercase:/[A-Z]/.test(b),hasLowercase:/[a-z]/.test(b),hasNumber:/\d/.test(b),hasSpecial:/[!@#$%^&*_]/.test(b)})},j=b=>{const{name:S,value:_}=b.target;t(P=>({...P,[S]:_})),S==="password"&&h(_)},y=b=>{if(b.preventDefault(),!Object.values(x).every(P=>P))return N.error("Please meet all password requirements");if(!s.fullname||!s.email||!s.username||!s.contact)return N.error("All fields are required!");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email))return N.error("Invalid email format.");if(s.password!==s.confirmPassword)return N.error("Password and Confirm password should match.");const _={name:s.fullname,email:s.email,username:s.username,password:s.password,contact_number:s.contact};n(_)},v=[{id:"fullname",label:"Full Name",type:"text",placeholder:"Enter your full name",fullWidth:!1},{id:"username",label:"Username",type:"text",placeholder:"Choose a username",fullWidth:!1},{id:"contact",label:"Contact Number",type:"tel",placeholder:"Enter your contact number",fullWidth:!1},{id:"email",label:"Email Address",type:"email",placeholder:"Enter your email address",fullWidth:!1},{id:"password",label:"Password",type:"password",placeholder:"Create a password",fullWidth:!0},{id:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"Confirm your password",fullWidth:!0}],f=({met:b,text:S})=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[b?e.jsx(Ls,{className:"w-4 h-4 text-green-500 mt-0.5"}):e.jsx(es,{className:"w-4 h-4 text-red-500 mt-0.5"}),e.jsx("span",{className:b?"text-green-500":"text-gray-300",children:S})]}),w=[{key:"minLength",text:"At least 6 characters"},{key:"hasUppercase",text:"One uppercase letter"},{key:"hasLowercase",text:"One lowercase letter"},{key:"hasNumber",text:"One number"},{key:"hasSpecial",text:"One special character (!@#$%^&*_)"}],k=(b,S)=>e.jsxs(T.div,{...ce.inputVariants,transition:ce.getInputTransition(S),className:`space-y-2 ${b.fullWidth?"md:col-span-2":""}`,children:[e.jsx(R,{htmlFor:b.id,className:"text-background",children:b.label}),e.jsx(Q,{id:b.id,type:b.type,name:b.id,placeholder:b.placeholder,value:s[b.id],onChange:j,onFocus:()=>b.id==="password"&&u(!0),onBlur:()=>b.id==="password"&&u(!1),required:!0}),b.id==="password"&&m&&e.jsx(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-2",children:e.jsxs("div",{className:"pt-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Password Requirements:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:w.map(_=>e.jsx(f,{met:x[_.key],text:_.text},_.key))})]})})]},b.id);return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Register"}),e.jsxs("section",{className:"px-3 py-5 container mx-auto grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx(T.div,{...ce.imageContainerVariants,className:"hidden md:block place-self-center",children:e.jsx(T.div,{className:"max-w-xl w-full",...ce.imageVariants,children:e.jsx("img",{src:uo,alt:"Register illustration",className:"w-full h-auto object-contain"})})}),e.jsx(T.div,{...ce.formContainerVariants,className:"w-full md:px-5 py-10 md:border border-brand-end/50 rounded-2xl",children:e.jsxs("div",{children:[e.jsxs(T.div,{className:"mb-8",children:[e.jsx(T.h1,{className:"text-4xl font-bold",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Create Account"}),e.jsx(T.p,{className:"text-gray-400 text-sm mt-2",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Join our community to discover amazing collections"})]}),e.jsxs("form",{className:"space-y-5",onSubmit:y,children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map((b,S)=>b.id==="password"?k(b,S):e.jsxs(T.div,{...ce.inputVariants,transition:ce.getInputTransition(S),className:`space-y-2 ${b.fullWidth?"md:col-span-2":""}`,children:[e.jsx(R,{htmlFor:b.id,className:"text-background",children:b.label}),e.jsx(Q,{id:b.id,type:b.type,name:b.id,placeholder:b.placeholder,value:s[b.id],onChange:j,required:!0})]},b.id))}),e.jsx(T.div,{...ce.buttonVariants,children:e.jsx(O,{type:"submit",variant:"submit",className:"w-full",size:"lg",disabled:l,children:l?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ie,{className:"animate-spin w-5 h-5"}),e.jsx("span",{children:"Creating Account..."})]}):"Register Now"})})]}),e.jsx(T.div,{className:"text-center text-gray-300 pt-5",...ce.linkVariants,children:e.jsxs("p",{children:["Already have an account?"," ",e.jsx(De,{to:"/login",className:"text-accent hover:text-accent/80",children:"Log in here"})]})})]})})]})]})},Le=ol,Oe=dl,Fe=g.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Ga,{ref:r,className:K("flex h-10 w-full items-center justify-between rounded-md bg-brand-dark px-3 py-5 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(al,{asChild:!0,children:e.jsx(ot,{className:"h-4 w-4 opacity-50"})})]}));Fe.displayName=Ga.displayName;const Zr=g.forwardRef(({className:s,...t},a)=>e.jsx(Ka,{ref:a,className:K("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(rl,{className:"h-4 w-4"})}));Zr.displayName=Ka.displayName;const Xr=g.forwardRef(({className:s,...t},a)=>e.jsx(Ya,{ref:a,className:K("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ot,{className:"h-4 w-4"})}));Xr.displayName=Ya.displayName;const Ae=g.forwardRef(({className:s,children:t,position:a="popper",...r},n)=>e.jsx(nl,{children:e.jsxs(Qa,{ref:n,className:K("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border-none bg-brand-dark text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...r,children:[e.jsx(Zr,{}),e.jsx(ll,{className:K("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Xr,{})]})}));Ae.displayName=Qa.displayName;const ho=g.forwardRef(({className:s,...t},a)=>e.jsx(Ja,{ref:a,className:K("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));ho.displayName=Ja.displayName;const ve=g.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Za,{ref:r,className:K("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 text-background font-medium",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(il,{children:e.jsx(Ls,{className:"h-4 w-4"})})}),e.jsx(cl,{children:t})]}));ve.displayName=Za.displayName;const po=g.forwardRef(({className:s,...t},a)=>e.jsx(Xa,{ref:a,className:K("-mx-1 my-1 h-px bg-muted",s),...t}));po.displayName=Xa.displayName;const go=({formData:s,onCheckboxChange:t})=>{var o;const{data:a,error:r,isLoading:n}=ft(),l=d=>{var x;((x=s.productColors)==null?void 0:x.length)>0&&s.productColors.forEach(p=>{t("productColors",p,!1)}),t("productColors",d,!0)};if(n)return e.jsxs("div",{className:"flex items-center gap-2 text-accent p-4 border rounded-lg",children:[e.jsx(ie,{className:"h-4 w-4 animate-spin"}),e.jsx("p",{children:"Loading colors..."})]});if(r)return e.jsxs("div",{className:"flex items-center gap-2 text-red-500 p-4 border rounded-lg",children:[e.jsx(hs,{size:20}),e.jsx("p",{children:"Error loading colors. Please try again later."})]});if(!(a!=null&&a.prod_color)||a.prod_color.length===0)return e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 p-4 border rounded-lg",children:[e.jsx(hs,{size:20}),e.jsx("p",{children:"No colors available."})]});const i=((o=s.productColors)==null?void 0:o[0])||s.product_color||"",c=a.prod_color.find(d=>d._id===i||d._id===(i==null?void 0:i._id));return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(R,{htmlFor:"productColor",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),"Color"]}),e.jsxs(Le,{value:(c==null?void 0:c._id)||"",onValueChange:l,children:[e.jsx(Fe,{className:"w-full py-6 bg-transparent border",children:e.jsx(Oe,{placeholder:"Select a color",children:c&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:c.code}}),c.name]})})}),e.jsx(Ae,{className:"bg-background",children:a.prod_color.map(d=>e.jsx(ve,{value:d._id,className:"flex items-center gap-2 text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:d.code}}),d.name]})},d._id))})]})]})},en=({formData:s,onChange:t,onCheckboxChange:a})=>{const r=o=>{const{name:d,value:x}=o.target,p=x.startsWith("-")?"":x;t({target:{name:d,value:p}})},n=[{id:"name",label:"Product Name",icon:e.jsx(ds,{className:"h-5 w-5 text-blue-600"}),colSpan:"col-span-2",type:"text",placeholder:"Enter product name",onChange:t}],l=[{id:"itemID",label:"Item ID",type:"text",placeholder:"Enter Item ID",onChange:t},{id:"partID",label:"Part ID",type:"text",placeholder:"Enter Part ID",onChange:t}],i=[{id:"price",label:"Price",icon:e.jsx(er,{className:"h-5 w-5 text-green-600"}),type:"number",min:"0",step:"0.01",placeholder:"0.00",onChange:r},{id:"discount",label:"Discount",icon:e.jsx(ml,{className:"h-5 w-5 text-orange-600"}),type:"number",min:"0",max:"100",step:"0.01",placeholder:"0.00",onChange:r},{id:"stock",label:"Stock",icon:e.jsx(sr,{className:"h-5 w-5 text-purple-600"}),type:"number",min:"0",step:"1",placeholder:"0",onChange:r}],c=o=>e.jsxs("div",{className:`space-y-2 ${o.colSpan||""}`,children:[e.jsxs(R,{htmlFor:o.id,className:"flex items-center gap-2 text-lg font-semibold",children:[o.icon,o.label]}),e.jsx(Q,{id:o.id,name:o.id,type:o.type,value:s[o.id],onChange:o.onChange,placeholder:o.placeholder,min:o.min,max:o.max,step:o.step,onWheel:o.type==="number"?d=>d.target.blur():void 0})]},o.id);return e.jsxs("section",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 md:gap-5",children:[n.map(c),e.jsx("div",{className:"pt-5 md:pt-0",children:e.jsx(go,{formData:s,onCheckboxChange:a})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-6",children:l.map(c)}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map(c)})]})},_e=g.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:K("flex min-h-[80px] w-full rounded-md border bg-background px-3 py-2 text-sm text-foreground shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t}));_e.displayName="Textarea";const sn=({formData:s,onChange:t})=>{const a=[{id:"description1",name:"description1",label:"Main Description",icon:e.jsx(me,{className:"h-5 w-5 text-blue-600"}),placeholder:"Enter the main product description..."},{id:"description2",name:"description2",label:"Features & Highlights",icon:e.jsx(ul,{className:"h-5 w-5 text-green-600"}),placeholder:"List key features and highlights..."},{id:"description3",name:"description3",label:"Additional Details",icon:e.jsx(Es,{className:"h-5 w-5 text-purple-600"}),placeholder:"Add any additional important information..."}];return e.jsx("section",{className:"space-y-6",children:a.map(r=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(R,{htmlFor:r.id,className:"flex items-center gap-2 text-lg font-semibold",children:[r.icon,r.label]}),e.jsx("p",{className:"text-sm text-gray-400 ml-7",children:r.subtitle})]}),e.jsx(_e,{id:r.id,name:r.name,value:s[r.id],onChange:t,placeholder:r.placeholder,className:"resize-none h-24"})]},r.id))})},tn=({formData:s,onChange:t})=>e.jsx("section",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:s.specifications.map(a=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:a.name,className:"text-lg font-semibold",children:a.name.charAt(0).toUpperCase()+a.name.slice(1).replace("_"," ")}),e.jsx(Q,{id:a.name,name:a.name,type:"number",value:a.value,onChange:r=>{const n=r.target.value;t({target:{name:a.name,value:n}})},placeholder:"0"})]},a.name))})}),an=({formData:s,onChange:t})=>{const a=[{id:"seller",label:"Seller",placeholder:"Enter seller name",colSpan:"md:col-span-1"},{id:"manufacturer",label:"Manufacturer",placeholder:"Enter manufacturer",colSpan:"md:col-span-1"},{id:"tags",label:"Tags",placeholder:"Enter tags separated by commas",colSpan:"md:col-span-2"}],r=n=>e.jsxs("div",{className:`space-y-2 ${n.colSpan}`,children:[e.jsx(R,{htmlFor:n.id,className:"text-lg font-semibold",children:n.label}),e.jsx(Q,{id:n.id,name:n.id,value:s[n.id],onChange:t,placeholder:n.placeholder})]},n.id);return e.jsx("section",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(r)})})},Ue=g.forwardRef(({className:s,...t},a)=>e.jsx(tr,{ref:a,className:K("peer h-4 w-4 shrink-0 rounded-sm border border-black ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-accent data-[state=checked]:border-accent",s),...t,children:e.jsx(xl,{className:K("flex items-center justify-center text-current text-black"),children:e.jsx(Ls,{className:"h-4 w-4"})})}));Ue.displayName=tr.displayName;const rn=({title:s,mainData:t,subData:a,formData:r,onCheckboxChange:n,mainField:l,subField:i,getSubItems:c,isError:o,error:d,addNewLink:x})=>{const[p,m]=g.useState({}),u=g.useRef({});g.useEffect(()=>{m({})},[r]),g.useEffect(()=>{var f;o&&N.error((f=d==null?void 0:d.data)==null?void 0:f.message)},[o,d]),g.useEffect(()=>{const f=w=>{Object.entries(u.current).forEach(([k,b])=>{b&&!b.contains(w.target)&&!w.target.closest(".item-dropdown")&&m(S=>({...S,[k]:!1}))})};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const h=f=>{m(w=>({...Object.keys(w).reduce((b,S)=>(b[S]=!1,b),{}),[f]:!w[f]}))},j=f=>f.split(",").map(w=>w.trim()),y=(f,w,k)=>{var b;n(i,w,k),k&&!((b=r[l])!=null&&b.includes(f))&&n(l,f,!0)},v=ar.useMemo(()=>t?[...t].sort((f,w)=>{const k=c(f._id).length>0,b=c(w._id).length>0;return k&&!b?-1:!k&&b?1:0}):[],[t,c]);return e.jsx($,{className:"w-full shadow-none border-none bg-transparent",children:e.jsxs(M,{className:"p-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(R,{className:"text-xl font-semibold text-gray-900",children:s}),x&&e.jsxs(De,{to:x,className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700",children:[e.jsx(gs,{className:"h-4 w-4"}),"Add New"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v==null?void 0:v.map(f=>{var P;const w=(P=r[l])==null?void 0:P.includes(f._id),k=c(f._id),b=k.length>0,S=p[f._id],_=j(f.name);return e.jsxs("div",{className:"relative group item-dropdown",ref:D=>u.current[f._id]=D,children:[e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg 
                    ${w?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"} 
                    border hover:bg-blue-50 cursor-pointer transition-all duration-200 ease-in-out
                    ${b?"hover:shadow-md":""}`,onClick:()=>b&&h(f._id),children:[e.jsx(Ue,{id:f._id,checked:w,onCheckedChange:D=>n(l,f._id,D),className:`border-black data-[state=checked]:bg-accent data-[state=checked]:border-accent
                      ${w?"text-blue-600":"text-gray-400"}
                      hover:text-blue-600`,onClick:D=>D.stopPropagation()}),e.jsx("div",{className:"flex-1",children:_.map((D,B)=>e.jsx(R,{htmlFor:f._id,className:`text-sm cursor-pointer font-medium block
                          ${w?"text-blue-700":"text-gray-700"}
                          group-hover:text-blue-700 transition-colors duration-200`,children:D},B))}),b&&e.jsx(fs,{className:`h-4 w-4 transition-all duration-200
                        ${w?"text-blue-600":"text-gray-400"}
                        group-hover:text-blue-600
                        ${S?"rotate-90":""}`})]}),S&&b&&e.jsx("div",{className:"absolute z-10 left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg animate-in fade-in-0 zoom-in-95 py-2",children:e.jsx("div",{className:"max-h-[250px] overflow-y-auto flex flex-col gap-1",children:k.map(D=>j(D.name).map((X,V)=>{var G;const z=(G=r[i])==null?void 0:G.includes(D._id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 mx-1 rounded-md
                                ${z?"bg-blue-50":"bg-white"}`,onClick:se=>se.stopPropagation(),children:[e.jsx(Ue,{id:D._id,checked:z,onCheckedChange:se=>y(f._id,D._id,se),className:`h-4 w-4 transition-colors duration-200
                                  ${z?"text-blue-600":"text-gray-400"}
                                  hover:text-blue-600`}),e.jsx(R,{htmlFor:D._id,className:`text-sm cursor-pointer
                                  ${z?"text-blue-700 font-medium":"text-gray-600"}
                                  hover:text-blue-700 transition-colors duration-200`,children:X})]},`${D._id}-${V}`)}))})})]},f._id)})})]})})},nn=({formData:s,onCheckboxChange:t})=>{const{data:a,isError:r,error:n}=Ss(),{data:l,isError:i,error:c}=bt(),o=d=>{var x;return((x=l==null?void 0:l.sub_categories)==null?void 0:x.filter(p=>p.category._id===d))||[]};return e.jsx(rn,{title:"Product Categories",mainData:a==null?void 0:a.categories,subData:l==null?void 0:l.sub_categories,formData:s,onCheckboxChange:t,mainField:"productCategory",subField:"productSubCategories",getSubItems:o,isError:r||i,error:n||c,addNewLink:"/admin/new-category"})},ln=({formData:s,onCheckboxChange:t})=>{const{data:a,isError:r,error:n}=as(),{data:l,isError:i,error:c}=_s(),o=d=>{var x;return((x=l==null?void 0:l.subcollections)==null?void 0:x.filter(p=>{var m;return((m=p.collection)==null?void 0:m._id)===d}))||[]};return e.jsx(rn,{title:"Product Collections",mainData:a==null?void 0:a.collections,subData:l==null?void 0:l.subcollections,formData:s,onCheckboxChange:t,mainField:"productCollections",subField:"productSubCollections",getSubItems:o,isError:r||i,error:n||c,addNewLink:"/admin/new-collection"})},It=["Brick Guide and Instructions","Minifigures"],jo={Instructions:"bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300",Minifigures:"bg-yellow-100 dark:bg-yellow-800 text-yellow-700 dark:text-yellow-300"},ba="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",cn=({formData:s,onCheckboxChange:t})=>!It||It.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx(R,{className:"text-lg font-semibold",children:"Product Includes"})}),e.jsx(De,{to:"/admin/new-includes",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg space-y-4 hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx(gs,{size:24,className:"text-gray-400"}),e.jsx("p",{className:"text-gray-500 text-center",children:"No includes available. Click to add includes."})]})})]}):e.jsx($,{className:"w-full shadow-none border-none bg-transparent",children:e.jsxs(M,{className:"p-0",children:[e.jsx(R,{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:"Product Includes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:It.map(a=>{const r=s.productIncludes.includes(a);return e.jsxs("div",{className:`flex items-center space-x-3 p-4 rounded-lg border hover:shadow-sm transition-shadow ${r&&jo[a]||ba}`,children:[e.jsx(Ue,{id:a,checked:r,onCheckedChange:n=>t("productIncludes",a,n),className:"border-black data-[state=checked]:bg-accent data-[state=checked]:border-accent"}),e.jsx(R,{htmlFor:a,className:"text-sm font-medium cursor-pointer flex-1",children:a})]},a)})})]})}),fo={0:"bg-green-500 text-white"},bo="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",on=({formData:s,onChange:t})=>{var l;const{data:a,isError:r,error:n}=gt();return g.useEffect(()=>{var i;r&&N.error((i=n==null?void 0:n.data)==null?void 0:i.message)},[r,n]),!(a!=null&&a.skillLevels)||a.skillLevels.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-5",children:e.jsx(R,{className:"text-lg font-semibold",children:"Skill Level"})}),e.jsx(De,{to:"/admin/new-skill-level",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg space-y-4 hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx(gs,{size:24,className:"text-gray-400"}),e.jsx("p",{className:"text-gray-500 text-center",children:"No skill levels available. Click to add skill levels."})]})})]}):r?e.jsxs("div",{className:"flex items-center gap-2 text-red-500 p-4 border rounded-lg",children:[e.jsx(hs,{size:20}),e.jsx("p",{children:"Error loading skill levels. Please try again later."})]}):e.jsx($,{className:"w-full shadow-none border-none bg-transparent",children:e.jsxs(M,{className:"p-0",children:[e.jsx(R,{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:"Skill Level"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:(l=a==null?void 0:a.skillLevels)==null?void 0:l.map(i=>e.jsxs("label",{htmlFor:i._id,className:`flex items-center justify-center p-4 rounded-lg border hover:shadow-sm transition-shadow cursor-pointer ${s.skillLevel===i._id?fo[0]:bo}`,children:[e.jsx("input",{type:"radio",id:i._id,name:"skillLevel",value:i._id,checked:s.skillLevel===i._id,onChange:t,className:"hidden"}),e.jsx("span",{className:"text-sm font-medium",children:i.name})]},i._id))})]})})},yo="bg-blue-500 text-white",No="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",dn=({formData:s,onChange:t})=>{var l;const{data:a,isError:r,error:n}=jt();return g.useEffect(()=>{var i;r&&N.error((i=n==null?void 0:n.data)==null?void 0:i.message)},[r,n]),!(a!=null&&a.designers)||a.designers.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-5",children:e.jsx(R,{className:"text-lg font-semibold",children:"Product Designer"})}),e.jsx(De,{to:"/admin/new-designer",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg space-y-4 hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx(gs,{size:24,className:"text-gray-400"}),e.jsx("p",{className:"text-gray-500 text-center",children:"No designers available. Click to add designers."})]})})]}):r?e.jsxs("div",{className:"flex items-center gap-2 text-red-500 p-4 border rounded-lg",children:[e.jsx(hs,{size:20}),e.jsx("p",{children:"Error loading designers. Please try again later."})]}):e.jsx($,{className:"w-full shadow-none border-none bg-transparent",children:e.jsxs(M,{className:"p-0",children:[e.jsx(R,{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:"Product Designer"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:(l=a==null?void 0:a.designers)==null?void 0:l.map(i=>e.jsxs("label",{htmlFor:i._id,className:`flex items-center justify-center p-4 rounded-lg border hover:shadow-sm transition-shadow cursor-pointer ${s.productDesigner===i._id?yo:No}`,children:[e.jsx("input",{type:"radio",id:i._id,name:"productDesigner",value:i._id,checked:s.productDesigner===i._id,onChange:t,className:"hidden"}),e.jsx("span",{className:"text-sm font-medium",children:i.name})]},i._id))})]})})},vo="bg-green-500 text-white",wo="bg-red-500 text-white",Co="bg-blue-500 text-white",Dt="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",mn=({formData:s,onChange:t,onDateChange:a})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx(R,{className:"text-lg font-semibold",children:"Product Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{htmlFor:"inStock",className:`flex items-center justify-center p-4 rounded-lg border hover:shadow-sm transition-shadow cursor-pointer ${s.status==="In Stock"?vo:Dt}`,children:[e.jsx("input",{type:"radio",id:"inStock",name:"status",value:"In Stock",checked:s.status==="In Stock",onChange:t,className:"hidden"}),e.jsx("span",{className:"text-sm font-medium",children:"In Stock"})]}),e.jsxs("label",{htmlFor:"outOfStock",className:`flex items-center justify-center p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer ${s.status==="Out of Stock"?wo:Dt}`,children:[e.jsx("input",{type:"radio",id:"outOfStock",name:"status",value:"Out of Stock",checked:s.status==="Out of Stock",onChange:t,className:"hidden"}),e.jsx("span",{className:"text-sm font-medium",children:"Out of Stock"})]}),e.jsxs("label",{htmlFor:"preOrder",className:`flex items-center justify-center p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer ${s.status==="Pre-order"?Co:Dt}`,children:[e.jsx("input",{type:"radio",id:"preOrder",name:"status",value:"Pre-order",checked:s.status==="Pre-order",onChange:t,className:"hidden"}),e.jsx("span",{className:"text-sm font-medium",children:"Pre-order"})]})]})]}),s.status==="Pre-order"&&e.jsxs("section",{className:"space-y-4",children:[e.jsx(R,{className:"text-lg font-semibold px-3",children:"Pre-order Availability Date"}),e.jsx(hl,{selected:s.preorderDate,onChange:r=>a("preorderDate",r),minDate:new Date,dateFormat:"yyyy-MM-dd",className:"border rounded-lg p-2 w-full focus:outline-none",placeholderText:"Select a date",showPopperArrow:!1})]})]}),ko=()=>{const{user:s}=ae(x=>x.auth),t=ee(),[a,{isLoading:r}]=_i(),[n,l]=g.useState({name:"",price:"",discount:"",stock:"",itemID:"",partID:"",description1:"",description2:"",description3:"",specifications:[{name:"length",value:""},{name:"width",value:""},{name:"height",value:""},{name:"piece_count",value:""}],manufacturer:"",seller:"",tags:"",productCategories:[],productCollections:[],productIncludes:[],skillLevel:"",productDesigner:"",isActive:"",availability:null,preorder:!1,preorderDate:null,productColors:[],productCategory:[],productSubCategories:[],productSubCollections:[]});return{formData:n,handleChange:x=>{const{name:p,value:m,type:u}=x.target;["length","width","height","piece_count"].includes(p)?l(h=>({...h,specifications:h.specifications.map(j=>j.name===p?{...j,value:m}:j)})):l(h=>({...h,[p]:m}))},handleCheckboxChange:(x,p,m)=>{l(u=>m?{...u,[x]:Array.isArray(u[x])?[...u[x],p]:[p]}:{...u,[x]:Array.isArray(u[x])?u[x].filter(h=>h!==p):[]})},handleSubmit:async x=>{var u,h,j,y,v;if(x.preventDefault(),console.log("Form submission data:",n),!n.name){N.error("Product name is required");return}if(!n.productColors||n.productColors.length===0){N.error("Please select a color for the product");return}const p=f=>Array.isArray(f)?f.map(w=>typeof w=="string"?w.split("-")[0]:w).filter(w=>typeof w=="string"&&/^[0-9a-fA-F]{24}$/.test(w)):[],m={product_name:n.name,itemID:n.itemID.toString(),partID:n.partID.toString(),price:parseFloat(n.price)||0,discount:parseFloat(n.discount)||0,stock:parseInt(n.stock,10)||0,product_description_1:n.description1,product_description_2:n.description2||"",product_description_3:n.description3||"",product_category:p(n.productCategory),product_collection:p(n.productCollections),product_sub_categories:p(n.productSubCategories),product_sub_collections:p(n.productSubCollections),product_piece_count:parseInt(((u=n.specifications.find(f=>f.name==="piece_count"))==null?void 0:u.value)||0,10),product_availability:n.availability==="In Stock"?null:n.preorderDate||new Date().toISOString().split("T")[0],product_length:parseFloat(((h=n.specifications.find(f=>f.name==="length"))==null?void 0:h.value)||0),product_width:parseFloat(((j=n.specifications.find(f=>f.name==="width"))==null?void 0:j.value)||0),product_height:parseFloat(((y=n.specifications.find(f=>f.name==="height"))==null?void 0:y.value)||0),product_includes:n.productIncludes.join(", "),product_skill_level:n.skillLevel||null,product_designer:n.productDesigner||null,ratings:0,seller:n.seller||"Brick Extreme",tags:n.tags.split(",").map(f=>f.trim())||[],is_active:n.isActive==="yes",manufacturer:n.manufacturer||"Unknown",is_preorder:n.preorder,preorder_availability_date:n.preorderDate?new Date(n.preorderDate).toISOString().split("T")[0]:null,product_color:n.productColors[0],createdBy:s==null?void 0:s._id};console.log("Sending to server:",m);try{const f=await a(m).unwrap();console.log("Creation response:",f),N.success("Product created successfully!"),t("/admin/products")}catch(f){console.error("Creation error details:",f),N.error(((v=f==null?void 0:f.data)==null?void 0:v.message)||"Failed to create product")}},handleDateChange:(x,p)=>{l(m=>({...m,[x]:p}))},isLoading:r}},So=()=>{const{formData:s,handleChange:t,handleCheckboxChange:a,handleSubmit:r,isLoading:n,handleDateChange:l}=ko();return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Add Product"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:r,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Add New Product"})}),e.jsxs(M,{className:"p-6 space-y-8",children:[e.jsx(en,{formData:s,onChange:t,onCheckboxChange:a}),e.jsx(sn,{formData:s,onChange:t}),e.jsx(tn,{formData:s,onChange:t}),e.jsx(an,{formData:s,onChange:t}),e.jsx(nn,{formData:s,onCheckboxChange:a}),e.jsx(ln,{formData:s,onCheckboxChange:a}),e.jsx(cn,{formData:s,onCheckboxChange:a}),e.jsx(on,{formData:s,onChange:t}),e.jsx(dn,{formData:s,onChange:t}),e.jsx(mn,{formData:s,onChange:t,onCheckboxChange:a,onDateChange:l}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto flex items-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4"}),"Creating Product..."]}):"Create Product"})})]})]})})})]})},Ks=ss({reducerPath:"dashboardApi",baseQuery:ts({baseUrl:"/api/v1",credentials:"include"}),tagTypes:["Dashboard"],endpoints:s=>({getDashboardStats:s.query({query:()=>"/admin/dashboard/stats",providesTags:["Dashboard"]})})}),{useGetDashboardStatsQuery:_o}=Ks;li.register(ii,ci,oi,di,mi,ui,xi,hi,pi);const zs={primary:{base:"#60A5FA",light:"rgba(96, 165, 250, 0.6)",lighter:"rgba(96, 165, 250, 0.1)"},secondary:{base:"#8B5CF6",light:"rgba(139, 92, 246, 0.6)"},success:{base:"#10B981",light:"rgba(16, 185, 129, 0.6)"},danger:{base:"#EF4444",light:"rgba(239, 68, 68, 0.6)"},warning:{base:"#F59E0B",light:"rgba(245, 158, 11, 0.6)"},gray:{base:"#9CA3AF",light:"rgba(156, 163, 175, 0.6)"}},Bs=({type:s="bar",data:t,options:a})=>{const r={line:pl,bar:gl,doughnut:jl}[s],n={responsive:!0,maintainAspectRatio:!0,scales:s!=="doughnut"?{y:{beginAtZero:!0,grid:{color:"#446080"},ticks:{color:"white",callback:i=>a!=null&&a.currency?`$${i.toLocaleString()}`:i.toLocaleString()}},x:{grid:{color:"#446080"},ticks:{color:"white"}}}:void 0,plugins:{legend:{position:"top",labels:{color:"white",font:{size:11}}},tooltip:{callbacks:{label:i=>{var c,o;return a!=null&&a.currency?`$${(c=i.parsed.y)==null?void 0:c.toLocaleString()}`:`${(o=i.parsed.y)==null?void 0:o.toLocaleString()}`}}}}},l={...n,...a,plugins:{...n.plugins,...(a==null?void 0:a.plugins)||{}}};return e.jsx(r,{data:t,options:l})},Po=fl,Io=bl,Do=yl,un=g.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(rr,{ref:r,sideOffset:t,className:K("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));un.displayName=rr.displayName;const Fo=({card:s})=>{const t=s.icon;return e.jsx(Po,{children:e.jsxs(Io,{children:[e.jsx(Do,{children:e.jsx($,{children:e.jsxs(M,{className:"flex justify-between items-center p-5",children:[e.jsxs("div",{className:"space-y-3 text-start",children:[e.jsx("p",{className:"text-sm font-medium text-gray-200",children:s.title}),e.jsx("p",{className:"text-3xl font-bold text-background",children:s.value}),e.jsxs("p",{className:"text-sm",children:[e.jsxs("span",{className:`font-bold ${s.changeColor}`,children:[s.change,"%"," "]}),e.jsx("span",{className:"text-gray-200",children:s.changeText})]})]}),e.jsx("div",{className:"p-3 rounded-full bg-brand-start",children:e.jsx(t,{className:`h-8 w-8 ${s.color}`})})]})})}),s.tooltip&&e.jsx(un,{children:e.jsxs("div",{className:"text-sm whitespace-pre-line",children:["Payment Method Breakdown:",`
`,s.tooltip]})})]})})},ya=s=>s==="stripe"?"Stripe":s==="paypal"?"PayPal":s,Ao=s=>{var t,a,r,n,l;return[{title:"Total Sales",value:`$${s==null?void 0:s.totalSales.toFixed(2)}`,icon:er,color:"text-green-400",change:s==null?void 0:s.monthOverMonthGrowth,changeText:"vs last month",changeColor:(s==null?void 0:s.thisMonth)>=(s==null?void 0:s.lastMonth)?"text-green-400":"text-red-400"},{title:"Total Orders",value:s==null?void 0:s.totalValidOrders.toString(),icon:Ie,color:"text-blue-400",change:s==null?void 0:s.deliveredRate,changeText:"delivered",changeColor:"text-green-400"},{title:"Total Products",value:s==null?void 0:s.totalProducts.toString(),icon:ds,color:"text-purple-400",change:s==null?void 0:s.lowStockPercentage,changeText:"low in stock",changeColor:"text-yellow-400"},{title:"Total Customers",value:(t=s==null?void 0:s.customerStats)==null?void 0:t.totalCustomers.toString(),icon:zt,color:"text-yellow-400",change:s==null?void 0:s.activeCustomerPercentage,changeText:"active users",changeColor:"text-green-400"},{title:"Refunds Issued",value:s==null?void 0:s.totalRefunds.toString(),icon:nr,color:"text-red-400",change:s==null?void 0:s.refundRate,changeText:"refund rate",changeColor:((s==null?void 0:s.refundRate)||0)<=20?"text-green-400":((s==null?void 0:s.refundRate)||0)<=40?"text-yellow-400":"text-red-400"},{title:"Popular Payment",value:ya(((a=s==null?void 0:s.popularPayment)==null?void 0:a.method)||"N/A"),icon:dt,color:"text-indigo-400",change:((r=s==null?void 0:s.popularPayment)==null?void 0:r.percentage)||0,changeText:"usage rate",changeColor:"text-blue-400",tooltip:(l=(n=s==null?void 0:s.popularPayment)==null?void 0:n.breakdown)==null?void 0:l.map(i=>`${ya(i.method)}: ${i.percentage}%`).join(`
`)}]},To=({stats:s})=>{if(!s)return null;const t=Ao(s);return e.jsx("div",{className:"grid gap-3 mb-5 md:grid-cols-2 lg:grid-cols-3",children:t.map((a,r)=>e.jsx(Fo,{card:a},r))})},Eo=({monthlySales:s,BaseChart:t,chartColors:a})=>{const r={labels:s.map(n=>n.month),datasets:[{label:"Total Sales",data:s.map(n=>n.total),borderColor:a.primary.base,backgroundColor:a.primary.lighter,fill:!0,tension:.4}]};return e.jsxs($,{children:[e.jsx(H,{children:e.jsx(re,{className:"text-background text-lg font-semibold",children:"Sales Over Time (Last 12 Months)"})}),e.jsx(M,{children:e.jsx(t,{type:"line",data:r,options:{currency:!0}})})]})},Lo=({monthlySales:s,BaseChart:t,chartColors:a})=>{const r={labels:s.map(n=>n.month),datasets:[{label:"Sales by Month",data:s.map(n=>n.total),backgroundColor:a.primary.light,borderColor:a.primary.base,borderWidth:1}]};return e.jsxs($,{children:[e.jsx(H,{children:e.jsx(re,{className:"text-background text-lg font-semibold",children:"Monthly Sales Comparison"})}),e.jsx(M,{children:e.jsx(t,{type:"bar",data:r,options:{currency:!0}})})]})},Oo=({lastTwoMonths:s,stats:t,BaseChart:a,chartColors:r})=>{var l,i,c,o;const n={labels:[((l=s[0])==null?void 0:l.month)||"Last Month",((i=s[1])==null?void 0:i.month)||"This Month"],datasets:[{label:"Sales Comparison",data:[((c=s[0])==null?void 0:c.total)||0,((o=s[1])==null?void 0:o.total)||0],backgroundColor:[r.gray.light,r.primary.light],borderColor:[r.gray.base,r.primary.base],borderWidth:1}]};return e.jsxs($,{children:[e.jsx(H,{children:e.jsx(re,{className:"text-background text-lg font-semibold",children:"Month-over-Month Performance"})}),e.jsx(M,{children:e.jsxs("div",{className:"flex flex-col items-center md:grid md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(a,{type:"bar",data:n,options:{currency:!0}})}),e.jsx($,{className:"w-full",children:e.jsxs(M,{className:"flex flex-col items-center p-5",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:`text-5xl font-bold mb-2 transition-colors ${t.growthPercentage>=0?"text-green-400":"text-red-400"}`,children:[t.growthPercentage>=0?"+":"",t.growthPercentage,"%"]}),e.jsx("div",{className:"text-gray-200 text-sm font-medium",children:"Growth Rate"})]}),e.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-gray-600 to-transparent my-4"}),e.jsx($,{className:`w-full border-none ${t.growthPercentage>=0?"bg-green-400/10":"bg-red-400/10"}`,children:e.jsx(M,{className:"p-3 text-center",children:e.jsx("p",{className:`text-sm leading-relaxed ${t.growthPercentage>=0?"text-green-300":"text-red-300"}`,children:t.growthDescription})})}),e.jsx("div",{className:"mt-4 text-xs text-gray-200 text-center",children:"Based on total sales volume"})]})})]})})]})},Ro=({monthlySales:s,stats:t,BaseChart:a,chartColors:r})=>{if(!s||!t)return null;const n=(s==null?void 0:s.slice(-12))||[],l=n.slice(-2);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid gap-5 grid-cols-1",children:[e.jsx(Eo,{monthlySales:n,BaseChart:a,chartColors:r}),e.jsx(Lo,{monthlySales:n,BaseChart:a,chartColors:r}),e.jsx(Oo,{lastTwoMonths:l,stats:t,BaseChart:a,chartColors:r})]})})},$o=({topProducts:s,BaseChart:t,chartColors:a})=>{const r={labels:(s==null?void 0:s.map(l=>{const i=l.name,c=l.color_name;return`${i} - ${c}`}))||[],datasets:[{label:"Total Sales ($)",data:(s==null?void 0:s.map(l=>l.totalSales))||[],backgroundColor:a.primary.light,borderColor:a.primary.base,borderWidth:1},{label:"Units Sold",data:(s==null?void 0:s.map(l=>l.quantity))||[],backgroundColor:a.secondary.light,borderColor:a.secondary.base,borderWidth:1}]},n={scales:{x:{ticks:{color:"white",callback:function(l){return this.getLabelForValue(l).split(" - ")}},grid:{color:"#446080"}},y:{ticks:{color:"white",callback:l=>`$${l.toLocaleString()}`},grid:{color:"#446080"}}},plugins:{tooltip:{callbacks:{title:l=>l[0].label,label:l=>{const i=l.dataset.label||"",c=l.parsed.y;return i.includes("Sales")?`${i}: $${c.toLocaleString()}`:`${i}: ${c.toLocaleString()}`}}}}};return e.jsxs($,{children:[e.jsx(H,{children:e.jsx(re,{className:"text-background text-lg font-semibold",children:"Top 10 Selling Products"})}),e.jsx(M,{children:e.jsx(t,{type:"bar",data:r,options:n})})]})},Mo=({categoryStats:s,BaseChart:t,chartColors:a})=>{const r={labels:(s==null?void 0:s.map(n=>n.name))||[],datasets:[{label:"Number of Orders",data:(s==null?void 0:s.map(n=>n.orderCount))||[],backgroundColor:[a.danger.light,a.success.light,a.warning.light,a.secondary.light,a.primary.light],borderWidth:1}]};return e.jsxs($,{children:[e.jsx(H,{children:e.jsx(re,{className:"text-background text-lg font-semibold",children:"Top 5 Categories by Order Count"})}),e.jsx(M,{className:"pt-4",children:e.jsx(t,{type:"bar",data:r})})]})},Uo=({collectionStats:s,BaseChart:t,chartColors:a})=>{const r={labels:(s==null?void 0:s.map(n=>n.name))||[],datasets:[{label:"Number of Orders",data:(s==null?void 0:s.map(n=>n.orderCount))||[],backgroundColor:[a.primary.light,a.secondary.light,a.success.light,a.warning.light,a.danger.light],borderWidth:1}]};return e.jsxs($,{className:"bg-brand-dark/50 border border-brand-end/50",children:[e.jsx(H,{children:e.jsx(re,{className:"text-white text-lg font-semibold",children:"Top 5 Collections by Order Count"})}),e.jsx(M,{className:"pt-4",children:e.jsx(t,{type:"bar",data:r})})]})},ea=({data:s,columns:t,globalFilter:a,setGlobalFilter:r,renderPagination:n,pageSize:l,setPageSize:i})=>{const[c,o]=g.useState(0),d=Nl({data:s,columns:t,getCoreRowModel:gi(),getPaginationRowModel:ji(),getFilteredRowModel:fi(),state:{globalFilter:a,pagination:{pageSize:l,pageIndex:c}},onGlobalFilterChange:r,onPaginationChange:m=>{if(typeof m=="function"){const u=m(d.getState().pagination);i(u.pageSize),o(u.pageIndex)}},manualPagination:!1,pageCount:Math.ceil(s.length/l)}),x=d.getHeaderGroups(),p=d.getRowModel().rows;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{children:x.map(m=>e.jsx("tr",{className:"border-b border-brand-end/50",children:m.headers.map(u=>e.jsx("th",{className:"h-12 text-background text-center",style:{width:u.column.columnDef.size?`${u.column.columnDef.size}px`:"auto",minWidth:u.column.columnDef.minSize||"auto",maxWidth:u.column.columnDef.maxSize||"auto"},children:ca(u.column.columnDef.header,u.getContext())},u.id))},m.id))}),e.jsx("tbody",{children:p.length>0?p.map(m=>e.jsx("tr",{className:"border-b border-brand-end/30 hover:bg-brand-dark cursor-pointer text-center last:border-b-0",children:m.getVisibleCells().map(u=>e.jsx("td",{className:"py-5 text-sm text-background whitespace-nowrap",style:{width:u.column.columnDef.size?`${u.column.columnDef.size}px`:"auto",minWidth:u.column.columnDef.minSize||"auto",maxWidth:u.column.columnDef.maxSize||"auto"},children:ca(u.column.columnDef.cell,u.getContext())},u.id))},m.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:x[0].headers.length,className:"px-6 py-8 text-center text-gray-300",children:"No data found"})})})]})}),n&&n(d)]})},qo=({lowStockProducts:s})=>{const t=[{header:"Product",accessorKey:"name",cell:a=>e.jsx("span",{className:"text-background",children:a.getValue()})},{header:"Current Stock",accessorKey:"stock",cell:a=>e.jsxs("span",{className:"text-background",children:[a.getValue()," units"]})},{header:"Status",accessorKey:"stock",cell:a=>e.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-medium ${a.getValue()<=2?"bg-red-600 text-background":"bg-amber-500/80 text-background"}`,children:a.getValue()<=2?"Critical":"Low"})}];return e.jsxs($,{children:[e.jsx(H,{children:e.jsx(re,{className:"text-background text-lg font-semibold",children:"Low Stock Alerts"})}),e.jsx(M,{children:(s==null?void 0:s.length)>0?e.jsx(ea,{data:s,columns:t,pageSize:s.length,setPageSize:()=>{},globalFilter:"",setGlobalFilter:()=>{}}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[e.jsx(Os,{className:"h-12 w-12 mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No products with low stock"}),e.jsx("p",{className:"text-xs mt-1 opacity-75",children:"All products are well stocked"})]})})]})},Vo=({topProducts:s,categoryStats:t,collectionStats:a,lowStockProducts:r,BaseChart:n,chartColors:l})=>s?e.jsxs(e.Fragment,{children:[e.jsx($o,{topProducts:s,BaseChart:n,chartColors:l}),e.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[e.jsx(Mo,{categoryStats:t,BaseChart:n,chartColors:l}),e.jsx(Uo,{collectionStats:a,BaseChart:n,chartColors:l})]}),e.jsx(qo,{lowStockProducts:r})]}):null,ke=[{id:"Pending",value:"Pending",icon:Bt,color:"text-accent",bgColor:"bg-accent",label:"Pending",allowedTransitions:["Processing","On Hold","Cancelled"]},{id:"Processing",value:"Processing",icon:lr,color:"text-blue-400",bgColor:"bg-blue-500",label:"Processing",allowedTransitions:["Shipped","On Hold","Cancelled"]},{id:"Shipped",value:"Shipped",icon:mt,color:"text-indigo-400",bgColor:"bg-indigo-500",label:"Shipped",allowedTransitions:["Delivered","Returned"]},{id:"Delivered",value:"Delivered",icon:ir,color:"text-green-400",bgColor:"bg-green-500",label:"Delivered",allowedTransitions:["Returned"]},{id:"To Review",value:"To Review",icon:is,color:"text-yellow-400",bgColor:"bg-yellow-500",label:"To Review",allowedTransitions:["Returned"]},{id:"Cancelled",value:"Cancelled",icon:hs,color:"text-red-400",bgColor:"bg-red-500",label:"Cancelled",allowedTransitions:[]},{id:"On Hold",value:"On Hold",icon:vl,color:"text-orange-400",bgColor:"bg-orange-500",label:"On Hold",allowedTransitions:["Processing","Cancelled"]}],zo=(s,t)=>{const a=ke.find(r=>r.value===s);return a==null?void 0:a.allowedTransitions.includes(t)},Bo=({orderStatusCount:s,BaseChart:t,chartColors:a})=>{const r=ke.filter(l=>l.value!=="To Review"),n={labels:r.map(l=>l.label),datasets:[{label:"Order Count",data:r.map(l=>(s==null?void 0:s[l.value])||0),backgroundColor:[a.warning.light,a.success.light,a.danger.light,a.primary.light,a.secondary.light],borderWidth:1,borderRadius:4,maxBarThickness:40}]};return e.jsxs($,{children:[e.jsxs(H,{children:[e.jsx(re,{className:"text-lg font-semibold text-background",children:"Order Status Distribution"}),e.jsx(rs,{className:"text-gray-300 text-sm",children:"Current status of all orders"})]}),e.jsx(M,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(t,{type:"bar",data:n})})})]})},Wo=({dailyOrders:s,BaseChart:t,chartColors:a})=>{const r={labels:(s==null?void 0:s.map(n=>n.date))||[],datasets:[{label:"Total Orders",data:(s==null?void 0:s.map(n=>n.count))||[],backgroundColor:a.primary.light,borderColor:a.primary.base,borderWidth:1,borderRadius:4,maxBarThickness:40}]};return e.jsxs($,{children:[e.jsxs(H,{children:[e.jsx(re,{className:"text-lg font-semibold text-background",children:"Daily Order Volume"}),e.jsx(rs,{className:"text-gray-300 text-sm",children:"Number of orders placed per day"})]}),e.jsx(M,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(t,{type:"bar",data:r})})})]})},Ho=({orderStatusCount:s,dailyOrders:t,BaseChart:a,chartColors:r})=>!s||!t?null:e.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[e.jsx(Bo,{orderStatusCount:s,BaseChart:a,chartColors:r}),e.jsx(Wo,{dailyOrders:t,BaseChart:a,chartColors:r})]}),Go=({customerStats:s,BaseChart:t,chartColors:a})=>{const r={labels:["Active Customers","New Customers","Inactive Customers"],datasets:[{data:[(s==null?void 0:s.activeCustomers)||0,(s==null?void 0:s.newCustomers)||0,(s==null?void 0:s.inactiveCustomers)||0],backgroundColor:[a.success.light,a.primary.light,a.danger.light],borderColor:[a.success.base,a.primary.base,a.danger.base],borderWidth:2}]},n={cutout:"75%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(i){const c=i.label||"",o=i.parsed,d=i.dataset.data.reduce((p,m)=>p+m,0),x=(o/d*100).toFixed(1);return`${c}: ${o} (${x}%)`}}}}},l=[{color:a.success.base,label:"Active",value:(s==null?void 0:s.activeCustomers)||0,description:"Made at least one purchase"},{color:a.primary.base,label:"New",value:(s==null?void 0:s.newCustomers)||0,description:"Registered within 30 days"},{color:a.danger.base,label:"Inactive",value:(s==null?void 0:s.inactiveCustomers)||0,description:"No purchases, inactive for over 30 days"}];return e.jsxs($,{children:[e.jsxs(H,{children:[e.jsx(re,{className:"text-lg font-semibold text-background",children:"Customer Distribution"}),e.jsx(rs,{className:"text-gray-200",children:e.jsx("div",{className:"grid gap-3 mt-2",children:l.map((i,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.color}}),e.jsx("span",{className:"text-sm text-gray-200",children:i.label})]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",i.description,")"]})]},c))})})]}),e.jsxs(M,{children:[e.jsx("div",{className:"h-[400px] relative flex items-center justify-center",children:e.jsx(t,{type:"doughnut",data:r,options:n})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Total Customers: "}),e.jsx("span",{className:"text-lg font-semibold text-background",children:(s==null?void 0:s.totalCustomers)||0})]})]})]})},Ko=({customerStats:s,BaseChart:t,chartColors:a})=>{var i;const r={labels:["Repeat Customers","Single-Order Customers"],datasets:[{data:[(s==null?void 0:s.repeatCustomers)||0,(s==null?void 0:s.singleOrderCustomers)||0],backgroundColor:[a.secondary.light,a.warning.light],borderColor:[a.secondary.base,a.warning.base],borderWidth:2}]},n={cutout:"75%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(c){const o=c.label||"",d=c.parsed,x=c.dataset.data.reduce((m,u)=>m+u,0),p=(d/x*100).toFixed(1);return`${o}: ${d} (${p}%)`}}}}},l=[{color:a.secondary.base,label:"Repeat Customers",value:(s==null?void 0:s.repeatCustomers)||0,description:"Made multiple purchases"},{color:a.warning.base,label:"One-Time Customers",value:(s==null?void 0:s.singleOrderCustomers)||0,description:"Made one purchase only"}];return e.jsxs($,{children:[e.jsxs(H,{children:[e.jsx(re,{className:"text-lg font-semibold text-background",children:"Repeat Purchase Rate"}),e.jsx(rs,{className:"text-gray-200",children:e.jsx("div",{className:"grid gap-3 mt-2",children:l.map((c,o)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c.color}}),e.jsx("span",{className:"text-sm text-gray-200",children:c.label})]}),e.jsxs("span",{className:"text-xs text-gray-300",children:["(",c.description,")"]})]},o))})})]}),e.jsxs(M,{children:[e.jsx("div",{className:"h-[400px] flex items-center justify-center",children:e.jsx(t,{type:"doughnut",data:r,options:n})}),e.jsx($,{className:"bg-inherit border-none mt-5",children:e.jsxs(M,{className:"flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:[((i=s==null?void 0:s.repeatRate)==null?void 0:i.toFixed(1))||"0","%"]}),e.jsx("div",{className:"text-gray-300 text-center font-medium",children:"Repeat Purchase Rate"})]})})]})]})},Yo=({customerStats:s,BaseChart:t,chartColors:a})=>s?e.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[e.jsx(Go,{customerStats:s,BaseChart:t,chartColors:a}),e.jsx(Ko,{customerStats:s,BaseChart:t,chartColors:a})]}):null,Qo=({recentOrders:s})=>{if(!s)return null;const t=n=>{switch(n){case"Delivered":return"success";case"Pending":return"warning";case"Processing":return"info";case"Shipped":return"primary";case"Cancelled":return"destructive";case"On Hold":return"muted";case"To Review":return"accent";default:return"secondary"}},a=[{header:"Order ID",accessorKey:"orderId",cell:({row:n})=>e.jsxs("span",{className:"font-medium",children:["#",n.original.orderId]})},{header:"Customer",accessorKey:"customerName",cell:({row:n})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:n.original.customerName})})},{header:"Products",accessorKey:"products",cell:({row:n})=>{var l;return e.jsxs("span",{className:"font-medium",children:[(l=n.original.products[0])==null?void 0:l.name,n.original.products.length>1?` +${n.original.products.length-1} more`:""]})}},{header:"Amount",accessorKey:"amount",cell:({row:n})=>e.jsxs("span",{className:"font-medium",children:["$",n.original.amount.toFixed(2)]})},{header:"Date",accessorKey:"date",cell:({row:n})=>e.jsx("span",{className:"font-medium",children:Me(new Date(n.original.date),"MMM d, yyyy")})},{header:"Status",accessorKey:"status",cell:({row:n})=>{const l=t(n.original.status);return e.jsx(oe,{variant:l,children:n.original.status})}}],r=(s==null?void 0:s.map(n=>{var l,i;return{orderId:n._id,customerName:((l=n.user)==null?void 0:l.name)||"Unknown User",customerEmail:((i=n.user)==null?void 0:i.email)||"N/A",products:n.orderItems.map(c=>{var o;return{name:((o=c.product)==null?void 0:o.product_name)||"Unknown Product"}}),amount:n.totalPrice,date:n.createdAt,status:n.orderStatus}}))||[];return e.jsxs($,{className:"bg-brand-dark/50 border border-brand-end/50",children:[e.jsx(H,{children:e.jsx(re,{className:"text-white text-lg font-semibold",children:"Recent Orders"})}),e.jsx(M,{children:e.jsx(ea,{data:r,columns:a,pageSize:5,setPageSize:()=>{},globalFilter:"",setGlobalFilter:()=>{}})})]})};function C({className:s,...t}){return e.jsx("div",{className:K("animate-pulse rounded-md bg-muted",s),...t})}const Jo=()=>e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(C,{className:"h-9 w-64 md:w-96"}),e.jsx(C,{className:"h-5 w-48 md:w-72"})]}),e.jsx(C,{className:"h-10 w-full md:w-[220px]"})]}),e.jsx("div",{className:"grid gap-3 mb-5 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(s=>e.jsx($,{className:"bg-brand-dark/50 border-brand-end/50",children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(C,{className:"h-4 w-24"}),e.jsx(C,{className:"h-8 w-32"})]}),e.jsx(C,{className:"h-10 w-10 rounded-full"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(C,{className:"h-2 w-full"})})]})},s))}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs($,{className:"bg-brand-dark/50 border-brand-end/50",children:[e.jsx(H,{children:e.jsx(C,{className:"h-7 w-48"})}),e.jsx(M,{children:e.jsx(C,{className:"h-[300px] w-full"})})]}),e.jsxs($,{className:"bg-brand-dark/50 border-brand-end/50",children:[e.jsx(H,{children:e.jsx(C,{className:"h-7 w-48"})}),e.jsx(M,{children:e.jsx(C,{className:"h-[300px] w-full"})})]}),e.jsxs($,{className:"bg-brand-dark/50 border-brand-end/50",children:[e.jsx(H,{children:e.jsx(C,{className:"h-7 w-48"})}),e.jsx(M,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(C,{className:"h-[300px] w-full"})}),e.jsx($,{className:"bg-brand-dark/50 border-brand-end/50",children:e.jsxs(M,{className:"flex flex-col items-center justify-center p-6 space-y-4",children:[e.jsx(C,{className:"h-16 w-32"}),e.jsx(C,{className:"h-4 w-24"}),e.jsx(C,{className:"h-20 w-full"}),e.jsx(C,{className:"h-4 w-36"})]})})]})})]})]})]}),Ft={LayoutDashboard:Vt,Package2:Os,ShoppingCart:Ie,Users:zt},Zo=()=>{const[s,t]=ms(),[a,r]=g.useState(s.get("tab")||"overview"),{data:n}=Nt(),{data:l,isLoading:i}=_o(),c=x=>{r(x),t({dashboard:x})};if(g.useEffect(()=>{const x=s.get("dashboard");x&&x!==a&&r(x)},[s]),i)return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Dashboard | Admin Panel"}),e.jsx(Jo,{})]});const o=l==null?void 0:l.ui.navigationTabs.find(x=>x.id===a),d=Ft[o==null?void 0:o.icon];return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Dashboard | Admin Panel"}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h2",{className:"text-3xl font-bold",children:[l.ui.greeting,", ",(n==null?void 0:n.name)||"Admin","!"]}),e.jsxs("p",{className:"text-sm font-light text-gray-200",children:["Today is ",l.ui.currentDate," at"," ",l.ui.currentTime]})]}),e.jsx("div",{className:"md:hidden w-full",children:e.jsxs(Le,{value:a,onValueChange:c,children:[e.jsx(Fe,{children:e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsx(d,{className:"h-4 w-4"}),o==null?void 0:o.label]})})}),e.jsx(Ae,{children:l.ui.navigationTabs.map(x=>{const p=Ft[x.icon];return e.jsx(ve,{value:x.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),x.label]})},x.id)})})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsxs(Le,{value:a,onValueChange:c,children:[e.jsx(Fe,{className:"w-[220px]",children:e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsx(d,{className:"h-4 w-4"}),o==null?void 0:o.label]})})}),e.jsx(Ae,{children:l.ui.navigationTabs.map(x=>{const p=Ft[x.icon];return e.jsx(ve,{value:x.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),x.label]})},x.id)})})]})})]}),e.jsxs("div",{className:"space-y-5",children:[a==="overview"&&e.jsxs(e.Fragment,{children:[e.jsx(To,{stats:l==null?void 0:l.stats}),e.jsx(Ro,{monthlySales:l==null?void 0:l.monthlySales,stats:l==null?void 0:l.stats,BaseChart:Bs,chartColors:zs})]}),a==="products"&&e.jsx(Vo,{topProducts:l==null?void 0:l.topProducts,categoryStats:l==null?void 0:l.categoryStats,collectionStats:l==null?void 0:l.collectionStats,lowStockProducts:l==null?void 0:l.lowStockProducts,BaseChart:Bs,chartColors:zs}),a==="orders"&&e.jsxs(e.Fragment,{children:[e.jsx(Ho,{orderStatusCount:l==null?void 0:l.orderStatusCount,dailyOrders:l==null?void 0:l.dailyOrders,BaseChart:Bs,chartColors:zs}),e.jsx(Qo,{recentOrders:l==null?void 0:l.recentOrders})]}),a==="customers"&&e.jsx(Yo,{customerStats:l==null?void 0:l.customerStats,BaseChart:Bs,chartColors:zs})]})]})]})},Xo=()=>e.jsxs("section",{className:"relative overflow-hidden py-20 md:py-36",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1},className:"absolute -top-24 -left-24 w-80 h-80 md:w-96 md:h-96 rounded-full bg-accent"}),e.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1,delay:.2},className:"absolute top-1/2 right-1/4 w-52 h-52 md:w-64 md:h-64 rounded-full bg-accent"}),e.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1,delay:.4},className:"absolute -bottom-32 -right-32 w-64 h-64 md:w-80 md:h-80 rounded-full bg-accent"})]}),e.jsxs(T.div,{className:"relative px-5 text-center text-white",initial:"hidden",animate:"visible",variants:ge.heroVariants,children:[e.jsxs(T.h1,{className:"text-5xl md:text-6xl lg:leading-tight font-bold mb-5 leading-tight",variants:ge.heroTitleVariants,children:["Fueling Your ",e.jsx("span",{className:"text-accent",children:"LEGO"})," ",e.jsx("br",{})," ","Adventures with Authentic Parts"]}),e.jsxs("div",{className:"relative mx-auto max-w-xl",children:[e.jsx(T.p,{className:"mx-auto text-sm md:text-base text-gray-300 italic",variants:ge.heroTextVariants,children:"Brick by Brick, Uniting LEGO Lovers  Where Every Piece Connects and Every Builder Belongs!"}),e.jsx(T.div,{initial:{opacity:0,scale:.5},animate:{opacity:.6,scale:1},transition:{duration:.5,delay:.3},className:"absolute -bottom-6 -right-2 md:-right-8"})]})]})]}),ed=()=>{const s=[{number:"50+",label:"Custom Projects"},{number:"1000+",label:"Buyers"},{number:"97%",label:"Satisfied Buyers"}];return e.jsx(T.section,{className:"grid grid-cols-1 md:grid-cols-3 gap-5 bg-background py-10 px-5",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.statsContainerVariants,children:s.map((t,a)=>e.jsx(T.div,{variants:ge.statCardVariants,children:e.jsx($,{className:"bg-background",children:e.jsxs(M,{className:"p-6 text-lg font-bold border rounded-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-5",children:e.jsx("span",{children:t.number})}),e.jsx("span",{children:t.label})]})})},a))})},sd=()=>e.jsxs("section",{className:"flex flex-col md:flex-row gap-10 items-center px-5 py-10 lg:py-16 bg-background/95",children:[e.jsx(T.div,{className:"md:w-1/2",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.storyImageVariants,children:e.jsx("img",{src:"https://res.cloudinary.com/mark-legostore/image/upload/v1743056478/world_of_minifigs/icons/Father-son.png",alt:"LEGO Collection",className:"rounded-lg"})}),e.jsxs(T.div,{className:"md:w-1/2",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.storyContentVariants,children:[e.jsx(oe,{variant:"accent",className:"text-sm font-medium mb-5 md:mb-10 p-1 px-5",children:"OUR STORY"}),e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-5",children:"A Father-Son Journey Into the World of LEGO"}),e.jsxs("div",{className:"space-y-4 text-foreground leading-relaxed",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"World of Minifigs (WOM)"})," is an online store that offers a wide range of LEGO parts, minifigures, sets, and other brick-related items. We started our journey as a father-son bonding, brought together by our mutual love for LEGO."]}),e.jsxs("p",{children:["We are located in"," ",e.jsx("span",{className:"font-bold",children:"Utah, United States"}),", where we carefully process all your orders. We take pride in delivering your ordered LEGO pieces from pet and smoke-free storage, ensuring they are in the best possible condition when they arrive."]}),e.jsxs("p",{children:["We have successfully delivered orders from various platforms such as"," ",e.jsx("span",{className:"font-bold",children:"Bricklink, eBay, and Etsy"}),", with a customer satisfaction rate of over 97%. Our team is dedicated to providing you with an excellent brick-shopping experience."]})]})]})]}),td=[{title:"Explore Our Collection",description:"Visit the Shop page to view all World of Minifigs products. Filter by category to find exactly what you need."},{title:"Select Your Favorites",description:"Add your preferred custom sets to your cart and double-check the quantities. We offer discounts on selected items."},{title:"Place Your Order",description:"Complete the order details, wait for the order confirmation, and you're all set! You'll receive your LEGO in no time."}],ad=()=>e.jsxs("section",{className:"py-10 px-5",children:[e.jsxs(T.div,{className:"text-center mb-5 md:mb-10",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.orderHeaderVariants,children:[e.jsx(oe,{variant:"accent",className:"text-sm font-medium mb-5 p-1 px-5",children:"JUST 3 EASY STEPS"}),e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Snap, Shop, and Ship "}),e.jsx("p",{className:"max-w-3xl mx-auto italic text-gray-300 leading-relaxed",children:"Whether you're a seasoned builder or just starting out, placing an order is as easy as stack, click, and build. Follow these simple steps to bring your LEGO dreams to life."})]}),e.jsx(T.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-5",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.orderContainerVariants,children:td.map((s,t)=>e.jsx(T.div,{variants:ge.orderStepVariants,children:e.jsx($,{className:"bg-brand-dark/50 border-accent",children:e.jsxs(M,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-accent text-foreground rounded-full flex items-center justify-center mx-auto mb-6 font-bold",children:t+1}),e.jsx(re,{className:"text-xl font-bold mb-4 text-white",children:s.title}),e.jsx("p",{className:"text-gray-300 italic",children:s.description})]})})},t))}),e.jsx(T.div,{className:"text-center mt-8",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.exploreButtonVariants,children:e.jsx(De,{to:"/products",children:e.jsxs(O,{variant:"accent",children:["Shop Now",e.jsx(wl,{className:"h-4 w-4"})]})})})]}),rd=()=>{const s=[{icon:e.jsx(Cl,{className:"h-8 w-8 text-foreground"}),title:"100% Authentic LEGO Products",description:"We guarantee the authenticity of every product. All our items are genuine LEGO, sourced directly from trusted suppliers."},{icon:e.jsx(ds,{className:"h-8 w-8 text-foreground"}),title:"Attentiveness on Point",description:"We ensure the timely delivery of the right products. Our careful packaging guarantees your items arrive in perfect condition."},{icon:e.jsx(Bt,{className:"h-8 w-8 text-foreground"}),title:"Exceptional Customer Service",description:"Our dedicated team is here to assist you from order placing to delivery. We respond to inquiries within 24 hours."}];return e.jsxs("section",{className:"px-5 py-10 bg-background",children:[e.jsxs(T.div,{className:"text-center mb-5 md:mb-10",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.orderHeaderVariants,children:[e.jsx(oe,{variant:"accent",className:"text-sm font-medium mb-5 p-1 px-5",children:"WHY CHOOSE US"}),e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Minifigure Magic, Delivered "}),e.jsx("p",{className:"max-w-3xl mx-auto italic text-foreground",children:"Discover why LEGO lovers trust us  from top tier quality and 100% authenticity to service that builds smiles with every order."})]}),e.jsx(T.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-5",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.chooseUsContainerVariants,children:s.map((t,a)=>e.jsx(T.div,{variants:ge.chooseUsCardVariants,children:e.jsx($,{className:"bg-background border",children:e.jsxs(M,{className:"p-5 text-center border rounded-md",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.icon}),e.jsx(re,{className:"text-xl font-bold mb-4",children:t.title}),e.jsx("p",{className:"text-foreground/80 italic",children:t.description})]})})},a))})]})},nd=()=>{const s=[{quote:"Excellent seller! Item exactly as described. Very friendly and prompt to answer questions and provide additional information about the item, shipped item immediately, and my item even arrived early! Seller took extra care to ensure the item was well packaged for it to arrive safely and in perfect condition!! Will definitely buy from again in the future! Thank you :)",author:"kim_tayy",span:"md:col-span-2"},{quote:"Item came as described, not damaged and in good condition.",author:"raiyne_84",span:""},{quote:"Perfect Transaction! Items as described, packaged well and fast shipping! Highly recommend this seller. Thank you =)",author:"slashgrencat",span:"md:col-span-1"},{quote:"Exactly what was ordered, quick shipping, safe packaging, and perfect condition.",author:"omnibrow",span:"md:col-span-1"},{quote:"Everything's well packed and exactly as described",author:"clcoffin1972",span:"md:col-span-1"}];return e.jsxs("section",{className:"py-10 px-5 bg-background/95",children:[e.jsxs(T.div,{className:"text-center mb-5 md:mb-10",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.orderHeaderVariants,children:[e.jsx(oe,{variant:"accent",className:"text-sm font-medium mb-5 p-1 px-5",children:"TESTIMONIALS"}),e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Loved by LEGO Lovers Everywhere "}),e.jsx("p",{className:"max-w-3xl mx-auto italic text-foreground",children:"Dont just take our word for it  hear straight from real builders who turned their imagination into reality with World of Minifigs."})]}),e.jsx(T.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-5",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.testimonialContainerVariants,children:s.map((t,a)=>e.jsx(T.div,{className:t.span,variants:ge.testimonialCardVariants,children:e.jsx($,{className:"h-full bg-background border",children:e.jsxs(M,{className:"p-5 flex flex-col h-full border rounded-md",children:[e.jsx("div",{className:"mb-4 text-accent",children:e.jsx(kl,{className:"w-8 h-8"})}),e.jsxs("p",{className:"italic text-foreground/90 text-base mb-4 flex-grow",children:['"',t.quote,'"']}),e.jsxs("div",{className:"font-semibold",children:["- ",t.author]})]})})},a))})]})},ld=()=>e.jsxs("section",{className:"relative py-24 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx(T.img,{initial:{scale:1.1,opacity:.8},animate:{scale:1,opacity:1},transition:{duration:1.5},src:"https://res.cloudinary.com/mark-legostore/image/upload/v1743056654/world_of_minifigs/icons/CTA.png",alt:"LEGO background",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/70 mix-blend-multiply"})]}),e.jsx(T.div,{className:"container relative z-10 mx-auto px-6 text-center",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:ge.exploreContainerVariants,children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs(T.h2,{className:"text-4xl md:text-5xl font-extrabold text-white mb-5",variants:ge.exploreTitleVariants,children:["Ready to Start Your ",e.jsx("span",{className:"text-accent",children:"LEGO"})," ","Adventure?"]}),e.jsx(T.p,{className:"max-w-2xl mx-auto text-white/90 mb-10 text-base",variants:ge.exploreTextVariants,children:"Dive into our world of authentic LEGO parts and minifigures and start building your imagination  one brick at a time ."}),e.jsx(T.div,{className:"text-center",variants:ge.exploreButtonVariants,children:e.jsx(De,{to:"/collections",children:e.jsxs(O,{variant:"accent",children:["Explore Our Collection",e.jsx(Sl,{className:"h-4 w-4"})]})})})]})})]}),id=()=>e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"About Us - World of Minifigs"}),e.jsx(Xo,{}),e.jsx(ed,{}),e.jsx(sd,{}),e.jsx(ad,{}),e.jsx(rd,{}),e.jsx(nd,{}),e.jsx(ld,{})]}),cd=()=>e.jsxs("section",{className:"relative overflow-hidden py-20 md:py-40",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1},className:"absolute -top-24 -left-24 w-64 h-64 md:w-96 md:h-96 rounded-full bg-accent"}),e.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1,delay:.2},className:"absolute top-1/2 right-1/4 w-56 h-56 md:w-64 md:h-64 rounded-full bg-accent"}),e.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1,delay:.4},className:"absolute -bottom-32 -right-32 w-52 h-52 md:w-64 md:h-64 rounded-full bg-accent"})]}),e.jsxs("div",{className:" relative px-6 text-center text-white",children:[e.jsxs(T.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},className:"text-5xl md:text-6xl lg:leading-tight font-bold mb-5",children:["Get in ",e.jsx("span",{className:"text-accent",children:"Touch"})]}),e.jsxs("div",{className:"relative mx-auto max-w-3xl",children:[e.jsx(T.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mx-auto text-sm md:text-base text-gray-300 leading-6 italic",children:"World of Minifigs Team is always open to your suggestions, concerns, and business ideas. Feel free to reach out and we'll surely respond within 24 hours!"}),e.jsx(T.div,{initial:{opacity:0,scale:.5},animate:{opacity:.6,scale:1},transition:{duration:.5,delay:.3},className:"absolute -bottom-6 -right-2 md:-right-8"})]})]})]}),od=({formData:s,isLoading:t,handleChange:a,handleCheckboxChange:r,handleSubmit:n})=>{const l=[{id:"name",name:"name",label:"Name",type:"text",placeholder:"Enter your name",required:!0,gridSpan:"md:col-span-1"},{id:"email",name:"email",label:"Email",type:"email",placeholder:"Enter your email",required:!0,gridSpan:"md:col-span-1"},{id:"subject",name:"subject",label:"Subject",type:"text",placeholder:"What is this regarding?",required:!1,gridSpan:"md:col-span-2"}],i=[{label:"Privacy Policy",to:"/privacy-policy"},{label:"Terms of Use",to:"/terms-of-use"}];return e.jsxs(T.div,{className:"lg:col-span-2 bg-white border p-5 md:p-8 rounded-2xl self-start",variants:cs.formVariants,children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-10",children:e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-foreground",children:"Send us a message"})}),e.jsxs("form",{onSubmit:n,className:"space-y-5",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:l.map(c=>e.jsxs("div",{className:`space-y-2 ${c.gridSpan}`,children:[e.jsxs(R,{htmlFor:c.id,children:[c.label," ",c.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Q,{id:c.id,type:c.type,name:c.name,value:s[c.name],onChange:a,placeholder:c.placeholder,required:c.required})]},c.id))}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(R,{htmlFor:"message",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(_e,{id:"message",name:"message",value:s.message,onChange:a,placeholder:"Enter your message",className:"min-h-[210px] border border-input",required:!0})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ue,{id:"privacy",checked:s.agreeToPrivacyPolicy,onCheckedChange:r,className:"mt-1"}),e.jsxs(R,{htmlFor:"privacy",className:"font-normal leading-6",children:["By proceeding, you acknowledge that you have read, understood, and agree to our"," ",i.map((c,o)=>e.jsxs("span",{children:[e.jsx(De,{to:c.to,className:"text-accent",children:c.label}),o===0?" and ":""]},c.to))]})]}),e.jsxs(O,{variant:"accent",type:"submit",disabled:t||!s.agreeToPrivacyPolicy,className:"w-full",children:[e.jsx(_l,{className:"w-4 h-4 mr-2"}),t?"Sending...":"Send Message"]})]})]})},dd=()=>{const s=[{name:"Facebook",icon:e.jsx(Ba,{className:"w-5 h-5"}),url:"https://www.facebook.com/profile.php?id=61552234252330",hoverColor:"hover:text-blue-600"},{name:"Instagram",icon:e.jsx(ct,{className:"w-5 h-5"}),url:"https://www.instagram.com/theworldofminifigs/",hoverColor:"hover:text-pink-600"},{name:"Email",icon:e.jsx(Wt,{className:"w-5 h-5"}),url:"mailto:brickextremeofficial@gmail.com",hoverColor:"hover:text-blue-600"}];return e.jsxs(T.div,{className:"bg-white border rounded-2xl p-5 md:p-8",variants:cs.socialVariants,children:[e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-3",children:"Let's be connected!"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Connect with us online"}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-5",children:s.map((t,a)=>e.jsxs(T.a,{href:t.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-3 text-gray-700 ${t.hoverColor} transition-colors`,variants:cs.iconVariants,custom:a,whileHover:{scale:1.05},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",children:t.icon}),e.jsx("span",{children:t.name})]},a))})]})},vt=Dl,$s=g.forwardRef(({className:s,...t},a)=>e.jsx(Pl,{ref:a,className:K("border-b border border-gray-200 rounded-md overflow-hidden text-foreground text-sm mb-2",s),...t}));$s.displayName="AccordionItem";const Ms=g.forwardRef(({className:s,children:t,...a},r)=>e.jsx(Il,{className:"flex",children:e.jsxs(cr,{ref:r,className:K("flex flex-1 items-center justify-between p-4 text-left font-medium transition-all [&[data-state=open]>svg]:rotate-180 hover:text-accent hover:bg-brand-start hover:no-underline group",s),...a,children:[t,e.jsx(ot,{className:"h-4 w-4 text-brand-dark shrink-0 transition-transform duration-200 group-hover:text-accent"})]})}));Ms.displayName=cr.displayName;const Us=g.forwardRef(({className:s,children:t,...a},r)=>e.jsx(or,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down bg-gray-50 leading-6",...a,children:e.jsx("div",{className:K("p-4 border-t border-gray-200",s),children:t})}));Us.displayName=or.displayName;const md=()=>{const s=[{question:"1. Where are you located?",answer:"We are located in Lehi, Utah."},{question:"2. Do you have a physical store?",answer:"Currently, we are an online-only store. We have stores in Bricklink, eBay, Etsy, and Mercari."},{question:"3. Are your LEGO parts authentic?",answer:"Yes, we guarantee that all LEGO parts sold on our website are 100% new and authentic LEGO products. We source our parts from reputable and authorized suppliers."},{question:"4. How long does shipping take?",answer:"Shipping times vary depending on your location and the shipping method chosen. We aim to ship orders within 1-2 business days."},{question:"5. Can I request specific LEGO parts that are not listed on your website?",answer:"While we try to keep a large inventory, we may not have every LEGO part available. Please contact us with your request, and we will do our best to assist you."}];return e.jsxs(T.div,{className:"bg-white border rounded-2xl p-5 md:p-8",variants:cs.faqVariants,children:[e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-6",children:"Frequently Asked Questions"}),e.jsx(vt,{type:"single",collapsible:!0,children:s.map((t,a)=>e.jsx(T.div,{variants:cs.faqItemVariants,custom:a,children:e.jsxs($s,{value:`item-${a}`,children:[e.jsx(Ms,{children:t.question}),e.jsx(Us,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(dr,{className:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:t.answer})]})})]})},a))})]})},ud=()=>e.jsxs(T.div,{className:"space-y-5 self-start",variants:cs.sideContentVariants,children:[e.jsx(dd,{}),e.jsx(md,{})]}),xd=()=>{const[s,t]=g.useState({name:"",email:"",subject:"",message:"",agreeToPrivacyPolicy:!1}),[a,{isLoading:r}]=Hc(),n=c=>{const{name:o,value:d}=c.target;t(x=>({...x,[o]:d}))},l=c=>{t(o=>({...o,agreeToPrivacyPolicy:c}))},i=async c=>{var o;if(c.preventDefault(),!s.agreeToPrivacyPolicy){N.error("Please agree to the Privacy Policy and Terms of Service");return}try{const d=await a(s).unwrap();N.success(d.message),t({name:"",email:"",subject:"",message:"",agreeToPrivacyPolicy:!1})}catch(d){N.error(((o=d.data)==null?void 0:o.message)||"Something went wrong!")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Contact Us"}),e.jsx(cd,{}),e.jsx(T.div,{className:"px-5 lg:px-10 py-10 bg-white",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:cs.containerVariants,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5 items-start",children:[e.jsx(od,{formData:s,isLoading:r,handleChange:n,handleCheckboxChange:l,handleSubmit:i}),e.jsx(ud,{})]})})]})},xn=g.createContext(null);function wt(){const s=g.useContext(xn);if(!s)throw new Error("useCarousel must be used within a <Carousel />");return s}const hn=g.forwardRef(({orientation:s="horizontal",opts:t,setApi:a,plugins:r,className:n,children:l,...i},c)=>{const[o,d]=Fl({...t,axis:s==="horizontal"?"x":"y"},r),[x,p]=g.useState(!1),[m,u]=g.useState(!1),h=g.useCallback(f=>{f&&(p(f.canScrollPrev()),u(f.canScrollNext()))},[]),j=g.useCallback(()=>{d==null||d.scrollPrev()},[d]),y=g.useCallback(()=>{d==null||d.scrollNext()},[d]),v=g.useCallback(f=>{f.key==="ArrowLeft"?(f.preventDefault(),j()):f.key==="ArrowRight"&&(f.preventDefault(),y())},[j,y]);return g.useEffect(()=>{!d||!a||a(d)},[d,a]),g.useEffect(()=>{if(d)return h(d),d.on("reInit",h),d.on("select",h),()=>{d==null||d.off("select",h)}},[d,h]),e.jsx(xn.Provider,{value:{carouselRef:o,api:d,opts:t,orientation:s||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:j,scrollNext:y,canScrollPrev:x,canScrollNext:m},children:e.jsx("div",{ref:c,onKeyDownCapture:v,className:K("relative",n),role:"region","aria-roledescription":"carousel",...i,children:l})})});hn.displayName="Carousel";const pn=g.forwardRef(({className:s,...t},a)=>{const{carouselRef:r,orientation:n}=wt();return e.jsx("div",{ref:r,className:"overflow-hidden",children:e.jsx("div",{ref:a,className:K("flex",n==="horizontal"?"-ml-4":"-mt-4 flex-col",s),...t})})});pn.displayName="CarouselContent";const $t=g.forwardRef(({className:s,...t},a)=>{const{orientation:r}=wt();return e.jsx("div",{ref:a,role:"group","aria-roledescription":"slide",className:K("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",s),...t})});$t.displayName="CarouselItem";const gn=g.forwardRef(({className:s,variant:t="outline",size:a="icon",...r},n)=>{const{orientation:l,scrollPrev:i,canScrollPrev:c}=wt();return e.jsxs(O,{ref:n,variant:t,size:a,className:K("absolute text-foreground h-8 w-8 rounded-full",l==="horizontal"?"left-4 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!c,onClick:i,...r,children:[e.jsx(Al,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous slide"})]})});gn.displayName="CarouselPrevious";const jn=g.forwardRef(({className:s,variant:t="outline",size:a="icon",...r},n)=>{const{orientation:l,scrollNext:i,canScrollNext:c}=wt();return e.jsxs(O,{ref:n,variant:t,size:a,className:K("absolute h-8 w-8 rounded-full text-foreground",l==="horizontal"?"right-4 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!c,onClick:i,...r,children:[e.jsx(As,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next slide"})]})});jn.displayName="CarouselNext";const sa=Tl,hd=({onUpload:s,isUploading:t,hasBanners:a,fileInputRef:r,onFileInputClick:n})=>e.jsx(sa,{ratio:16/7,children:e.jsxs("div",{onClick:n,className:"flex items-center justify-center w-full h-full cursor-pointer",children:[e.jsx("div",{className:"flex flex-col items-center justify-center text-gray-400 group",children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 animate-spin text-accent"}),e.jsx("p",{className:"text-lg text-accent",children:"Uploading banner..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ht,{className:"w-12 h-12 mb-4 group-hover:text-accent"}),e.jsx("p",{className:"mb-2 text-sm",children:e.jsx("span",{className:"font-semibold group-hover:text-accent",children:a?"Click to upload Banner":"Add your first banner"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Supports: JPG, PNG, GIF, WebP (Max 5MB)"})]})}),e.jsx("input",{ref:r,type:"file",className:"hidden",accept:"image/*,.gif",onChange:s,disabled:t})]})}),Ke=Ia,fn=Da,pd=Pa,gd=rt,bn=g.forwardRef(({className:s,...t},a)=>e.jsx(tt,{ref:a,className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));bn.displayName=tt.displayName;const qe=g.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(pd,{children:[e.jsx(bn,{}),e.jsxs(at,{ref:r,className:K("fixed left-[50%] top-[50%] z-50 grid w-[95vw] max-h-[95vh] overflow-y-auto scrollbar-none rounded-lg max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-none bg-brand-start p-5 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(rt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(es,{className:"h-4 w-4 text-white"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qe.displayName=at.displayName;const Ve=({className:s,...t})=>e.jsx("div",{className:K("flex flex-col space-y-3 text-left text-background mb-3",s),...t});Ve.displayName="DialogHeader";const qs=({className:s,...t})=>e.jsx("div",{className:K("flex flex-col sm:flex-row sm:justify-end gap-2",s),...t});qs.displayName="DialogFooter";const ze=g.forwardRef(({className:s,...t},a)=>e.jsx(nt,{ref:a,className:K("text-lg font-semibold leading-none tracking-tight text-start",s),...t}));ze.displayName=nt.displayName;const ns=g.forwardRef(({className:s,...t},a)=>e.jsx(lt,{ref:a,className:K("text-sm text-background leading-6",s),...t}));ns.displayName=lt.displayName;const Ct=({onConfirm:s,title:t,itemToDelete:a,isLoading:r,triggerVariant:n="ghost",triggerSize:l="default",triggerClassName:i="p-0 hover:bg-transparent hover:scale-110 transition-all duration-300"})=>e.jsxs(Ke,{children:[e.jsx(fn,{asChild:!0,children:e.jsx(O,{variant:n,size:l,className:i,children:e.jsx(Fa,{className:"h-4 w-4 text-red-500 hover:scale-110 transition-transform"})})}),e.jsxs(qe,{children:[e.jsx(Ve,{children:e.jsxs(ze,{className:"flex gap-2 items-center",children:[e.jsx(it,{className:"h-5 w-5 text-accent"}),t||"Confirm Deletion"]})}),e.jsxs(ns,{className:"space-y-2",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-semibold text-accent italic",children:a})," ","? This action cannot be undone."]}),e.jsxs(qs,{children:[e.jsx(gd,{asChild:!0,children:e.jsx(O,{variant:"secondary",disabled:r,children:"Cancel"})}),e.jsx(O,{variant:"destructive",onClick:s,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 animate-spin mr-2"})," Deleting..."]}):"Delete"})]})]})]}),jd=({banner:s,index:t,isAdmin:a,isDeleting:r,onDelete:n})=>e.jsxs(sa,{ratio:16/7,children:[e.jsx("img",{src:s.image.url,alt:`Banner ${t+1}`,className:"absolute inset-0 w-full h-full object-cover"}),a&&e.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:e.jsx(Ct,{onConfirm:()=>n(s._id),title:"Delete Banner",itemToDelete:`Banner ${t+1}`,isLoading:r,triggerVariant:"secondary",triggerSize:"icon",triggerClassName:"hover:bg-accent"})})]}),fd=()=>e.jsx("div",{className:"max-w-[1920px] mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"w-full aspect-[16/7]"}),e.jsx(C,{className:"absolute top-1/2 -translate-y-1/2 left-4 w-10 h-10 rounded-full"}),e.jsx(C,{className:"absolute top-1/2 -translate-y-1/2 right-4 w-10 h-10 rounded-full"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(C,{className:"w-16 h-16 rounded-lg"}),e.jsx(C,{className:"w-48 h-6"}),e.jsx(C,{className:"w-64 h-4"})]})})]})}),Is=(s={})=>{const[t,a]=g.useState(!1),[r,n]=g.useState(0),{maxSizeMB:l=1,maxWidthOrHeight:i=1920,onSuccess:c,useWebWorker:o=!0,maxFileSize:d=5*1024*1024}=s;return{handleImageUpload:async m=>{var h;const u=(h=m.target.files)==null?void 0:h[0];if(u){if(u.size>d){N.error(`Image is too large. Maximum size is ${d/(1024*1024)}MB.`);return}a(!0),n(10);try{const j=u.type==="image/gif";let y=u;if(j)n(50),N.info("GIF detected - preserving animation quality");else{const f={maxSizeMB:l,maxWidthOrHeight:i,useWebWorker:o,onProgress:w=>{n(10+Math.round(w*80))}};n(20),y=await xa(u,f),n(90)}const v=new FileReader;v.onloadend=()=>{n(100),c&&typeof c=="function"&&c(v.result),a(!1)},v.readAsDataURL(y)}catch(j){console.error("Error processing image:",j),N.error(`Error processing image: ${j.message}`),a(!1)}}},handleDrop:async m=>{if(m!=null&&m[0]){const u=m[0];if(u.size>d){N.error(`Image is too large. Maximum size is ${d/(1024*1024)}MB.`);return}a(!0),n(10);try{const h=u.type==="image/gif";let j=u;if(h)n(50),N.info("GIF detected - preserving animation quality");else{const v={maxSizeMB:l,maxWidthOrHeight:i,useWebWorker:o,onProgress:f=>{n(10+Math.round(f*80))}};n(20),j=await xa(u,v),n(90)}const y=new FileReader;y.onloadend=()=>{n(100),c&&typeof c=="function"&&c(y.result),a(!1)},y.readAsDataURL(j)}catch(h){console.error("Error processing image:",h),N.error(`Error processing image: ${h.message}`),a(!1)}}},isUploading:t,uploadProgress:r}},Na={options:{loop:!0,align:"start"},autoplayOptions:{delay:5e3,stopOnInteraction:!1,playOnInit:!0}},bd=()=>{const[s,t]=g.useState(),a=g.useRef(bi(Na.autoplayOptions));return g.useEffect(()=>{if(!s)return;s.on("select",()=>{});const r=()=>{a.current.stop()},n=()=>{a.current.play()};return s.rootNode().addEventListener("mouseenter",r),s.rootNode().addEventListener("mouseleave",n),()=>{s.rootNode().removeEventListener("mouseenter",r),s.rootNode().removeEventListener("mouseleave",n)}},[s]),{api:s,setApi:t,plugin:a,options:Na.options}},yd=()=>{var b,S,_;const s=g.useRef(null),{setApi:t,plugin:a,options:r}=bd(),{data:n,isLoading:l,isError:i}=ac(),[c,{isLoading:o}]=rc(),[d,{isLoading:x}]=nc(),p=ae(P=>P.auth),u=!!(p!=null&&p.user)&&["superAdmin","admin","employee"].includes((b=p==null?void 0:p.user)==null?void 0:b.role),h=((S=n==null?void 0:n.banners)==null?void 0:S.length)>0,{isUploading:j,handleImageUpload:y}=Is({maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,onSuccess:async P=>{var D;try{const B=await c({image:P}).unwrap();N.success(B.message||"Banner uploaded successfully")}catch(B){N.error(((D=B==null?void 0:B.data)==null?void 0:D.message)||"Error uploading banner")}}}),v=P=>{y(P)},f=async P=>{var D;try{const B=await d(P).unwrap();N.success(B.message||"Banner deleted successfully")}catch(B){N.error(((D=B==null?void 0:B.data)==null?void 0:D.message)||"Error deleting banner")}},w=()=>{var P;(P=s.current)==null||P.click()},k=(h||u)&&((_=n==null?void 0:n.banners)==null?void 0:_.length)+(u?1:0)>1;return{bannerData:n,isLoading:l,isError:i,isUploading:j||o,isDeleting:x,isAdmin:u,hasBanners:h,fileInputRef:s,setApi:t,plugin:a,options:r,showCarouselNavigation:k,handleImageUpload:v,handleDeleteConfirm:f,handleFileInputClick:w}},Nd=()=>{var j;const{bannerData:s,isLoading:t,isError:a,isUploading:r,isDeleting:n,isAdmin:l,hasBanners:i,setApi:c,plugin:o,options:d,showCarouselNavigation:x,handleImageUpload:p,handleDeleteConfirm:m,fileInputRef:u,handleFileInputClick:h}=yd();return t?e.jsx(fd,{}):a?e.jsx(je,{title:"Error Loading Banners",message:"There was a problem loading the banners. Please try again later."}):!i&&!l?e.jsx(je,{title:"No Banners Available",message:"We're working on some eye-catching bannerscheck back soon for exciting updates!"}):e.jsxs(hn,{plugins:[o.current],setApi:c,opts:d,children:[e.jsxs(pn,{children:[l&&e.jsx($t,{children:e.jsx(hd,{onUpload:p,isUploading:r,hasBanners:i,fileInputRef:u,onFileInputClick:h})}),(j=s==null?void 0:s.banners)==null?void 0:j.map((y,v)=>e.jsx($t,{children:e.jsx(jd,{banner:y,index:v,isAdmin:l,isDeleting:n,onDelete:m})},y._id))]}),x&&e.jsxs(e.Fragment,{children:[e.jsx(gn,{}),e.jsx(jn,{})]})]})},yn=g.forwardRef(({className:s,value:t,...a},r)=>e.jsx(mr,{ref:r,className:K("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...a,children:e.jsx(El,{className:"h-full w-full flex-1 bg-yellow-500 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));yn.displayName=mr.displayName;const Xe=({rating:s=0,totalStars:t=5,size:a="sm",interactive:r=!1,onRatingChange:n=null,activeColor:l="text-yellow-400",inactiveColor:i="text-gray-400",fillActive:c=!0,className:o="",disabled:d=!1})=>{const x={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"},p=typeof a=="string"?x[a]||x.sm:`w-${a} h-${a}`,m=u=>{r&&n&&!d&&n(u)};return e.jsx("div",{className:`flex ${l} ${o}`,children:[...Array(t)].map((u,h)=>{const j=h+1,y=s-j+1<1&&s-j+1>0,v=s-j+1<=0,f=j<=s;return e.jsx("div",{onClick:()=>m(j),className:`${r&&!d?"cursor-pointer":""} ${d?"opacity-70":""}`,children:e.jsx(is,{className:`${p} ${f||y?l:i} transition-colors`,fill:v?"none":y?"url(#half)":c?"currentColor":"none",strokeWidth:1.5,children:y&&e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})})},h)})})},vd=({distribution:s=[],totalReviews:t=0})=>e.jsx("div",{className:"space-y-5",children:[5,4,3,2,1].map(a=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center w-32",children:[e.jsx("span",{className:"text-background font-medium mr-2",children:a}),e.jsxs("div",{className:"flex gap-1",children:[[...Array(a)].map((r,n)=>e.jsx(is,{className:"w-4 h-4 text-yellow-400",fill:"currentColor"},n)),[...Array(5-a)].map((r,n)=>e.jsx(is,{className:"w-4 h-4 text-gray-400",fill:"none"},n+a))]})]}),e.jsx("div",{className:"flex-1 relative",children:e.jsx(yn,{value:t>0?s[5-a]/t*100:0,className:"h-3 flex-1 bg-brand-end/80 rounded-full"})}),e.jsx("div",{className:"w-8 text-right",children:e.jsxs("span",{className:"text-sm text-gray-400 font-medium",children:["(",s[5-a],")"]})})]},a))}),Fs=ss({reducerPath:"orderApi",baseQuery:ts({baseUrl:"/api/v1",credentials:"include"}),tagTypes:["Order"],endpoints:s=>({createOrder:s.mutation({query:t=>({url:"/order/newOrder",method:"POST",body:t}),invalidatesTags:["Order"],async onQueryStarted(t,{dispatch:a,queryFulfilled:r}){try{await r,a(He.util.invalidateTags(["Product"]))}catch{}}}),getAllOrders:s.query({query:()=>({url:"/orders",method:"GET",credentials:"include"}),providesTags:["Order"]}),getOrderDetails:s.query({query:t=>({url:`/orders/${t}`,method:"GET",credentials:"include"}),providesTags:["Order"]}),getAllOrdersAdmin:s.query({query:()=>({url:"/admin/orders",method:"GET",credentials:"include"}),providesTags:["Order"]}),updateOrderAdmin:s.mutation({query:({id:t,orderData:a})=>({url:`/admin/orders/${t}`,method:"PUT",body:a,credentials:"include"}),invalidatesTags:["Order"]}),updateOrder:s.mutation({query:({id:t,body:a})=>({url:`/orders/${t}`,method:"PUT",body:a}),invalidatesTags:["Order"],async onQueryStarted(t,{dispatch:a,queryFulfilled:r}){var n;try{const{data:l}=await r;((n=l==null?void 0:l.data)==null?void 0:n.orderStatus)==="Cancelled"&&a(He.util.invalidateTags(["Product","Products"]))}catch{}}})})}),{useCreateOrderMutation:Nn,useGetAllOrdersQuery:vn,useGetOrderDetailsQuery:wd,useGetAllOrdersAdminQuery:Cd,useUpdateOrderAdminMutation:kd,useUpdateOrderMutation:oh}=Fs,Ys=ss({reducerPath:"reviewApi",baseQuery:ts({baseUrl:"/api/v1",credentials:"include"}),tagTypes:["Review"],endpoints:s=>({createReview:s.mutation({query:t=>({url:"/order/reviews",method:"POST",body:t}),invalidatesTags:["Review"],async onQueryStarted(t,{dispatch:a,queryFulfilled:r}){try{await r,a(Fs.util.invalidateTags(["Order"]))}catch{}}}),getProductReviews:s.query({query:t=>({url:`/reviews/${t}`,method:"GET"}),providesTags:["Review"]}),updateReview:s.mutation({query:({reviewId:t,reviewData:a})=>({url:`/reviews/${t}`,method:"PUT",body:a}),invalidatesTags:["Review"]}),getReviewByOrderId:s.query({query:t=>({url:`/reviews/order/${t}`,method:"GET"}),providesTags:["Review"]}),voteReview:s.mutation({query:t=>({url:"/reviews/vote",method:"POST",body:t}),invalidatesTags:["Review"]}),addReplyToReview:s.mutation({query:t=>({url:"/reviews/reply",method:"POST",body:t}),invalidatesTags:["Review"]}),getAllReviews:s.query({query:()=>({url:"/admin/reviews",method:"GET"}),providesTags:["Review"]})})}),{useCreateReviewMutation:Sd,useGetProductReviewsQuery:ta,useUpdateReviewMutation:_d,useGetReviewByOrderIdQuery:aa,useVoteReviewMutation:Pd,useAddReplyToReviewMutation:dh,useGetAllReviewsQuery:Id}=Ys,Dd=s=>{const t=ee(),[a,r]=g.useState(0),[n,l]=g.useState(!1),[i,c]=g.useState([]),[o,d]=g.useState(null),{data:x}=ta(s==null?void 0:s._id,{skip:!(s!=null&&s._id)}),p=!!(s!=null&&s.partID),{data:m}=pt(s==null?void 0:s._id,{skip:!p||!(s!=null&&s._id)}),u=(x==null?void 0:x.stats)||{averageRating:0,totalReviews:0};g.useEffect(()=>{var f;if(((f=m==null?void 0:m.similarProducts)==null?void 0:f.length)>0&&(s!=null&&s.partID)){const w=[s,...m.similarProducts].filter((k,b,S)=>k.partID===s.partID&&b===S.findIndex(_=>_._id===k._id)).filter(k=>k.product_images&&k.product_images.length>0).map(k=>({url:k.product_images[0].url,id:k._id}));if(w.length>1){c(w);return}}s!=null&&s.product_images&&s.product_images.length>0?c(s.product_images.map(w=>({url:w.url,id:s._id}))):c([])},[s,m]);const h=()=>{if(l(!0),i.length>1){o&&clearInterval(o);const f=setInterval(()=>{r(w=>(w+1)%i.length)},1200);d(f)}},j=()=>{l(!1),o&&(clearInterval(o),d(null)),r(0)},y=()=>{if(n&&i.length>1&&i[a].id!==s._id){t(`/products/${i[a].id}`);return}t(`/products/${s==null?void 0:s._id}`)},v=i.length>0;return g.useEffect(()=>()=>{o&&clearInterval(o)},[o]),{currentImageIndex:a,isHovering:n,imagesList:i,hasImages:v,reviewStats:u,handleMouseEnter:h,handleMouseLeave:j,handleViewDetails:y}},wn=({product:s})=>{var d,x;const{currentImageIndex:t,isHovering:a,imagesList:r,hasImages:n,reviewStats:l,handleMouseEnter:i,handleMouseLeave:c,handleViewDetails:o}=Dd(s);return e.jsxs($,{onClick:o,onMouseEnter:i,onMouseLeave:c,className:"group cursor-pointer relative",children:[(s==null?void 0:s.discount)>0&&e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsxs(oe,{variant:"accent",children:[s.discount,"% OFF"]})}),e.jsxs(H,{className:"space-y-0 p-0 relative aspect-square overflow-hidden rounded-t-lg",children:[n?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:(d=r[0])==null?void 0:d.url,alt:s.product_name||"Product Image",className:`object-cover transition-all duration-500 absolute inset-0 ${a?"opacity-0":"opacity-100"}`}),e.jsx("img",{src:(x=r[t])==null?void 0:x.url,alt:`${s.product_name} variant`,className:`object-cover transition-all duration-500 absolute inset-0 ${a?"opacity-100":"opacity-0"}`})]}):e.jsx(Ye,{}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(O,{onClick:p=>p.stopPropagation(),variant:"popup",children:"View Details"})]}),e.jsxs(M,{className:"px-3 pt-5 flex flex-col gap-2 text-background",children:[e.jsx("h3",{className:"text-md font-semibold line-clamp-1",children:(s==null?void 0:s.product_name)||"Unnamed Product"}),e.jsx("div",{className:"flex items-center gap-2",children:s!=null&&s.price?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold text-accent",children:["$",((s==null?void 0:s.discounted_price)||0).toFixed(2)]}),(s==null?void 0:s.discount)>0&&e.jsxs("p",{className:"text-sm text-gray-300 line-through",children:["$",s.price.toFixed(2)]})]}):e.jsx("p",{className:"text-2xl font-bold text-accent",children:"$0.00"})})]}),e.jsx(Hr,{className:"px-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{rating:Number(l.averageRating),size:"sm"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["(",l.totalReviews,")"]})]})})]})},Cn=({showDiscount:s=!1})=>e.jsxs("div",{className:"bg-brand-dark/50 rounded-2xl overflow-hidden h-full flex flex-col",children:[s&&e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsx(C,{className:"h-6 w-16 rounded-full"})}),e.jsx("div",{className:"relative",children:e.jsx(C,{className:"w-full aspect-square rounded-none"})}),e.jsxs("div",{className:"p-5 flex flex-col gap-5 flex-grow",children:[e.jsx(C,{className:"h-6 w-3/4"})," ",e.jsxs("div",{className:"flex flex-col gap-3 mt-auto",children:[e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx(C,{className:"h-8 w-24"})," ",e.jsx(C,{className:"h-4 w-16"})," "]}),e.jsx("div",{className:"flex justify-between items-center pt-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((t,a)=>e.jsx(C,{className:"h-4 w-4"},a))}),e.jsx(C,{className:"h-4 w-12"})," "]})})]})]})]}),Fd=()=>e.jsxs("div",{className:"p-5",children:[e.jsx(C,{className:"h-8 w-64 mx-auto my-5"}),e.jsx(C,{className:"h-10 w-32 mx-auto mb-2"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 py-5",children:[...Array(4)].map((s,t)=>e.jsx(Cn,{showDiscount:t%2===0},t))})]}),kn=({title:s,products:t,baseUrl:a,isLoading:r,isError:n})=>{const l=ee();if(r)return e.jsx(Fd,{});if(n)return e.jsx(je,{title:"Error Loading Products",message:"There was a problem loading the products. Please try again later."});if(!(t!=null&&t.length))return e.jsx(je,{title:`No ${s} Available`,message:`Every masterpiece starts with a single brick. Watch this space for amazing new ${s}!`});const i=()=>{const c=a.split("=")[1];l(`/products?product_category=${c}`)};return e.jsxs("section",{className:"flex flex-col p-5",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-center py-5",children:s}),e.jsx("div",{className:"flex items-center justify-center pb-2",children:e.jsx(O,{onClick:i,variant:"accent",children:"View All"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 py-5",children:t.slice(0,4).map(c=>e.jsx("div",{children:e.jsx(wn,{product:c})},c._id))})]})},Sn=s=>{var x;const{data:t,isLoading:a,isError:r,error:n}=Ii(s),l=(x=t==null?void 0:t.category[0])==null?void 0:x._id,{data:i,isLoading:c,isError:o,error:d}=Rs(l?{product_category:l}:null,{skip:!l});return g.useEffect(()=>{r&&N.error((n==null?void 0:n.message)||"Failed to fetch category"),o&&N.error((d==null?void 0:d.message)||"Failed to fetch products")},[r,n,o,d]),{products:(i==null?void 0:i.products)||[],isLoading:a||l&&c,categoryId:l}},Ad=()=>{const{products:s,isLoading:t,isError:a,categoryId:r}=Sn("best_seller");return e.jsx(kn,{title:"Best Selling Products",products:s,baseUrl:`/product_category=${r}`,isLoading:t,isError:a})},Td=({type:s="default"})=>{const t=()=>{switch(s){case"browse":return e.jsx("div",{className:"flex justify-center",children:e.jsx(C,{className:"h-12 w-64 my-5"})});case"collections":case"sub-collections":return e.jsx("div",{className:"flex items-center gap-2 py-5",children:e.jsx(C,{className:"h-12 w-64"})});default:return null}};return e.jsxs("div",{className:"flex flex-col",children:[t(),s==="browse"&&e.jsx("div",{className:"flex items-center justify-center pb-2",children:e.jsx(C,{className:"h-10 w-36"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 py-5",children:[...Array(s==="browse"?9:6)].map((a,r)=>e.jsx($,{className:"group relative rounded-lg border border-accent overflow-hidden",children:e.jsx(M,{className:"p-0",children:e.jsxs("div",{className:"relative aspect-[16/9]",children:[e.jsx(C,{className:"w-full h-full absolute"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-4",children:e.jsx(C,{className:"h-6 w-3/4 mx-auto"})})]})})},r))})]})},ra=({collections:s,onCollectionClick:t,showViewAll:a=!1,isError:r,isLoading:n,type:l="default",collectionName:i=""})=>{const c=ee();if(n)return e.jsx(Td,{type:l});if(r)return e.jsx(je,{title:"Error Loading Collections",message:"There was a problem loading the collections. Please try again later."});if(!(s!=null&&s.length))return e.jsx(je,{title:"No Collections Available",message:"We're refreshing our collectionscheck back soon for exciting new arrivals!"});const o=()=>{switch(l){case"browse":return e.jsx("h2",{className:"text-3xl font-extrabold text-center py-5",children:"Browse by Collections"});case"collections":return e.jsxs("h2",{className:"text-3xl text-gray-300 font-extrabold py-5 header-text flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-8 bg-accent rounded mr-2"}),e.jsx("span",{children:"Our Collections"})]});case"sub-collections":return e.jsxs("h2",{className:"text-3xl text-gray-300 font-extrabold py-5 header-text flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-8 bg-accent rounded mr-2"}),e.jsx("span",{children:i})]});default:return null}};return e.jsxs("section",{children:[o(),a&&e.jsx("div",{className:"flex items-center justify-center mb-5",children:e.jsx(O,{variant:"accent",onClick:()=>c("/collections"),children:"View All Collections"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:s.map(d=>{var x;return e.jsx("div",{onClick:()=>t(d),children:e.jsx($,{className:"group relative rounded-lg border border-accent overflow-hidden cursor-pointer",children:e.jsx(M,{className:"p-0",children:e.jsxs("div",{className:"relative aspect-[16/9]",children:[(x=d.image)!=null&&x.url?e.jsx("img",{src:d.image.url,alt:d.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-brand-start flex flex-col items-center justify-center",children:e.jsx(Ye,{})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-4",children:e.jsx("h3",{className:"text-lg font-semibold text-center text-background",children:d.name})})]})})})},d._id)})})]})},kt=(s=!1,t=null)=>{var v,f;const a=ee(),{data:r,isError:n,error:l}=as(),{data:i,isLoading:c}=Wi(t,{skip:!t}),{data:o,isError:d,error:x,isLoading:p}=_s(),m=c||p,u=((v=r==null?void 0:r.collections)==null?void 0:v.filter(w=>s?w.isFeatured:!w.isFeatured))||[],h=t?((f=o==null?void 0:o.subcollections)==null?void 0:f.filter(w=>{var k;return((k=w.collection)==null?void 0:k._id)===t}))||[]:[];return g.useEffect(()=>{var w,k;n&&N.error(((w=l==null?void 0:l.data)==null?void 0:w.message)||"Failed to fetch collections"),d&&N.error(((k=x==null?void 0:x.data)==null?void 0:k.message)||"Failed to fetch sub-collections")},[l,n,x,d]),{collections:u,subCollections:h,collectionDetails:i,handleCollectionClick:w=>{var b;if(!(w!=null&&w._id)){N.error("Invalid collection");return}const k=(b=o==null?void 0:o.subcollections)==null?void 0:b.some(S=>{var _;return((_=S==null?void 0:S.collection)==null?void 0:_._id)===w._id});a(k?`/collections/${w._id}`:`/products?product_collection=${w._id}`)},handleSubCollectionClick:w=>{a(`/products?product_sub_collections=${w._id}`)},isError:n,isSubError:d,isLoading:m,subCollectionsData:o}},Ed=()=>{const{collections:s,handleCollectionClick:t,isLoading:a}=kt(!1),r=s.slice(0,9);return e.jsx("section",{className:"p-5",children:e.jsx(ra,{collections:r,onCollectionClick:t,isInView:!0,showViewAll:!0,isLoading:a,type:"browse"})})},Ld=()=>e.jsx("section",{className:"pt-5",children:e.jsxs("div",{className:"max-w-[1920px] mx-auto",children:[e.jsx(C,{className:"h-10 w-72 mx-auto my-5"}),e.jsx("div",{className:"space-y-2",children:[...Array(2)].map((s,t)=>e.jsxs("div",{className:"relative overflow-hidden group",children:[e.jsx(C,{className:"w-full h-[400px] sm:h-[500px] md:h-[600px] rounded-none"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-darkBrand/20",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(C,{className:"h-8 w-48 mx-auto"}),e.jsx(C,{className:"h-10 w-44 mx-auto rounded-full"})]})})]},t))})]})}),Od=()=>{const{collections:s,handleCollectionClick:t,subCollectionsData:a,isLoading:r,isError:n}=kt(!0);return r?e.jsx(Ld,{}):n?e.jsx(je,{title:"Error Loading Featured Collections",message:"There was a problem loading the featured collections. Please try again later."}):s!=null&&s.length?e.jsxs("section",{className:"pt-3",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-center py-5",children:"Featured Collections"}),e.jsx("div",{className:"space-y-2",children:s.map(l=>{var i,c;return e.jsx("div",{className:"relative overflow-hidden group cursor-pointer",onClick:()=>t(l),children:e.jsxs(sa,{ratio:16/6,children:[(i=l.image)!=null&&i.url?e.jsx("img",{src:l.image.url,alt:l.name,className:"w-full h-full object-cover"}):e.jsx(Ye,{width:"w-64"}),e.jsx("div",{className:"absolute inset-0 bg-brand-start/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:l.name}),e.jsx(O,{variant:"accent",className:"w-full",children:(c=a==null?void 0:a.subcollections)!=null&&c.some(o=>{var d;return((d=o==null?void 0:o.collection)==null?void 0:d._id)===l._id})?"View Sub-Collections":"View Collection"})]})})]})},l._id)})})]}):e.jsx(je,{title:"No Featured Collections Available",message:"We're currently updating our featured collections. Please check back later for exciting new products."})},Rd=()=>{const{products:s,isLoading:t,isError:a,categoryId:r}=Sn("latest");return e.jsx(kn,{title:"Latest Products",products:s,baseUrl:`product_category=${r}`,isLoading:t,isError:a})},$d=()=>{const s=[{Component:Nd},{Component:Ad,className:"bg-brand-end"},{Component:Rd,className:"bg-brand-end/70"},{Component:Od,className:"bg-brand-end"},{Component:Ed,className:"bg-brand-end/70"}];return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Homepage"}),e.jsx("div",{className:"bg-brand",children:s.map(({Component:t,className:a},r)=>e.jsx("div",{className:a,children:e.jsx(t,{})},r))})]})},Md=({products:s})=>e.jsx("div",{className:"col-span-1 lg:col-span-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:s.map(t=>e.jsx(wn,{product:t},t._id))})}),va=({totalProducts:s,currentProducts:t,currentSort:a,onSortChange:r,className:n,hideProductCount:l=!1,minimal:i=!1})=>{const c=[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"},{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"},{value:"date_asc",label:"Date: Oldest to Newest"},{value:"date_desc",label:"Date: Newest to Oldest"}];return e.jsxs("div",{className:`flex items-center justify-between ${!i&&"mb-5"} ${n}`,children:[!l&&e.jsxs("p",{children:["Showing ",e.jsx("span",{className:"text-accent",children:t})," of"," ",e.jsx("span",{children:s})," products"]}),e.jsxs("div",{className:`flex items-center ${!i&&"gap-2"}`,children:[!i&&e.jsx("span",{className:"text-sm",children:"Sort by:"}),e.jsxs(Le,{value:a,onValueChange:r,children:[e.jsx(Fe,{className:"w-[220px]",children:e.jsx(Oe,{placeholder:"Sort by"})}),e.jsx(Ae,{children:c.map(o=>e.jsx(ve,{value:o.value,children:o.label},o.value))})]})]})]})},At=({pageNumber:s,isActive:t,onClick:a})=>e.jsx(O,{variant:t?"accent":"ghost",size:"sm",onClick:a,className:t?"text-black h-9 w-9":"h-9 w-9 hover:text-black",children:s}),wa=({keyName:s})=>e.jsx("span",{className:"flex h-9 w-9 items-center justify-center text-gray-400",children:e.jsx(ur,{className:"h-4 w-4"})},s),Ca=({direction:s,onClick:t,children:a})=>e.jsxs(O,{variant:"ghost",size:"sm",onClick:t,className:"flex items-center hover:text-black",children:[s==="previous"&&e.jsx(Gt,{className:"h-4 w-4"}),a,s==="next"&&e.jsx(fs,{className:"h-4 w-4"})]}),Ud=({currentPage:s,totalPages:t,onPageChange:a})=>{if(t<=1)return null;const r=()=>{const n=[];n.push(e.jsx(At,{pageNumber:1,isActive:s===1,onClick:()=>a(1)},1));let i=Math.max(2,s-Math.floor(5/2)),c=Math.min(t-1,i+5-3);c-i<2&&(i=Math.max(2,c-2)),i>2&&n.push(e.jsx(wa,{},"ellipsis1"));for(let o=i;o<=c;o++)n.push(e.jsx(At,{pageNumber:o,isActive:s===o,onClick:()=>a(o)},o));return c<t-1&&n.push(e.jsx(wa,{},"ellipsis2")),t>1&&n.push(e.jsx(At,{pageNumber:t,isActive:s===t,onClick:()=>a(t)},t)),n};return e.jsx("nav",{className:"flex w-full justify-center mb-7 mt-3",children:e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s>1&&e.jsx(Ca,{direction:"previous",onClick:()=>a(s-1),children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:r()}),s<t&&e.jsx(Ca,{direction:"next",onClick:()=>a(s+1),children:"Next"})]})})},qd=()=>e.jsxs("div",{className:"mx-auto px-4 py-8 bg-brand-start",children:[e.jsxs("div",{className:"lg:hidden mb-4 flex items-center justify-between",children:[e.jsx(C,{className:"h-9 w-24"})," ",e.jsx(C,{className:"h-9 w-[220px]"})," "]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 py-2",children:[e.jsx("div",{className:"hidden lg:block col-span-1",children:e.jsxs("div",{className:"border border-brand-end rounded-md p-4 sticky top-24 max-h-[calc(100vh-120px)] overflow-y-auto scrollbar-none",children:[e.jsxs("div",{className:"flex items-center mb-4 space-x-2",children:[e.jsx(C,{className:"h-6 w-24"})," "]}),e.jsx("div",{className:"space-y-4",children:[...Array(12)].map((s,t)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx(C,{className:"h-8 w-full"})," ",e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((a,r)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-32"})," "]},r))})]},t))})]})}),e.jsxs("div",{className:"col-span-1 lg:col-span-3",children:[e.jsx("div",{className:"hidden lg:block mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"h-6 w-48"})," ",e.jsx(C,{className:"h-9 w-[220px]"})," "]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[...Array(9)].map((s,t)=>e.jsx(Cn,{showDiscount:t%3===0},t))})]})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-9 w-24"})," ",[...Array(3)].map((s,t)=>e.jsx(C,{className:"h-9 w-9"},t)),e.jsx(C,{className:"h-9 w-24"})," "]})})]}),Vd=({option:s})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:s.code}}),e.jsx("span",{className:"text-sm text-gray-300",children:s.label})]}),zd=({option:s,filterKey:t,isChecked:a,hasSubItems:r,itemCount:n,isDisabled:l,onFilterChange:i,onCategoryClick:c})=>e.jsxs("div",{className:`flex items-center justify-between p-4 group
    ${l?"opacity-50 pointer-events-none":"hover:bg-brand-end/50"}`,children:[e.jsx("div",{className:"flex-1",children:e.jsxs(R,{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Ue,{id:`${t}-${s.value}`,checked:a,onCheckedChange:()=>i(t,s.value),disabled:l,className:"border-background"}),t==="product_color"?e.jsx(Vd,{option:s}):e.jsx("span",{className:"text-sm text-background group-hover:text-accent transition-colors",children:s.label})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[!r&&e.jsxs("span",{className:"text-sm text-background group-hover:text-accent transition-colors",children:["(",n,")"]}),r&&e.jsx("button",{onClick:()=>c(t,s.value),className:"p-1 hover:bg-accent rounded-full text-gray-400 hover:text-foreground transition-colors",children:e.jsx(fs,{className:"h-4 w-4"})})]})]}),Bd=({subItem:s,filterKey:t,isChecked:a,count:r,onFilterChange:n})=>e.jsxs(R,{className:`flex items-center justify-between p-4 cursor-pointer group
      ${r===0?"opacity-50 pointer-events-none":"hover:bg-brand-end/50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{id:`${t}-${s._id}`,checked:a,onCheckedChange:()=>n(t,s._id),disabled:r===0,className:"border-background"}),e.jsx("span",{className:"text-sm text-white group-hover:text-accent transition-colors",children:s.name})]}),e.jsxs("span",{className:"text-sm text-gray-400 group-hover:text-accent transition-colors",children:["(",r,")"]})]},s._id),Wd=({categoryKey:s,categoryName:t,subItems:a,selectedFilters:r,productsForCounting:n,onFilterChange:l,onBackClick:i})=>e.jsxs("div",{children:[e.jsx("div",{className:"pb-2 px-2 border-b border-brand-end/50",children:e.jsxs(O,{variant:"ghost",onClick:i,className:"p-0 gap-0 text-background hover:bg-transparent hover:text-accent",children:[e.jsx(Gt,{className:"h-5 w-5 mr-1"}),e.jsx("span",{className:"text-md font-semibold",children:t})]})}),a.map(c=>{var x;const o=s==="product_category"?"product_sub_categories":"product_sub_collections",d=(n==null?void 0:n.filter(p=>{var m,u;return s==="product_category"?(m=p.product_sub_categories)==null?void 0:m.some(h=>h._id===c._id):(u=p.product_sub_collections)==null?void 0:u.some(h=>h._id===c._id)}).length)||0;return e.jsx(Bd,{subItem:c,filterKey:o,isChecked:(x=r[o])==null?void 0:x.includes(c._id),count:d,onFilterChange:l},c._id)})]}),_n=(s={})=>{var we,Ce,Re,We;const[t,a]=ms(),[r,n]=g.useState(["price"]),[l,i]=g.useState({price:[],product_category:[],product_sub_categories:[],product_collection:[],product_sub_collections:[],product_skill_level:[],product_designer:[],product_color:[],rating:[]}),[c,o]=g.useState(!1),[d,x]=g.useState({}),[p,m]=g.useState(null),[u,h]=g.useState([]),{categoriesData:j={},collectionsData:y={},skillLevelsData:v={},designersData:f={},categoriesIsError:w=!1,collectionsIsError:k=!1,skillLevelsIsError:b=!1,designerIsError:S=!1,categoriesError:_={},collectionsError:P={},skillLevelsError:D={},designersError:B={}}=s,{data:X,isLoading:V}=bt(),{data:z,isLoading:G}=_s(),{data:se,isLoading:de}=ft(),fe={price:[{label:"$0-$100",value:"0-100"},{label:"$101-$500",value:"101-500"},{label:"$501-$1000",value:"501-1000"},{label:"$1000+",value:"1000+"}],product_category:((we=j==null?void 0:j.categories)==null?void 0:we.map(E=>{var F;return{label:E.name,value:E._id,hasSubItems:(F=X==null?void 0:X.sub_categories)==null?void 0:F.some(A=>{var W;return((W=A.category)==null?void 0:W._id)===E._id})}}).sort((E,F)=>E.hasSubItems&&!F.hasSubItems?-1:!E.hasSubItems&&F.hasSubItems?1:E.label.localeCompare(F.label)))||[],product_collection:((Ce=y==null?void 0:y.collections)==null?void 0:Ce.map(E=>{var F;return{label:E.name,value:E._id,hasSubItems:(F=z==null?void 0:z.subcollections)==null?void 0:F.some(A=>{var W;return((W=A.collection)==null?void 0:W._id)===E._id})}}).sort((E,F)=>E.hasSubItems&&!F.hasSubItems?-1:!E.hasSubItems&&F.hasSubItems?1:E.label.localeCompare(F.label)))||[],product_color:((se==null?void 0:se.prod_color)||[]).map(E=>({label:E.name,value:E._id,code:E.code,count:(s.products||[]).filter(F=>{var A;return((A=F.product_color)==null?void 0:A._id)===E._id||F.product_color===E._id}).length})).sort((E,F)=>F.count-E.count),product_skill_level:((Re=v==null?void 0:v.skillLevels)==null?void 0:Re.map(E=>({label:E.name,value:E._id})))||[],product_designer:((We=f==null?void 0:f.designers)==null?void 0:We.map(E=>({label:E.name,value:E._id})))||[]};g.useEffect(()=>{n(Object.keys(fe)),i(Object.keys(fe).reduce((E,F)=>(E[F]=[],E),{}))},[]),g.useEffect(()=>{var E,F,A,W;w&&N.error(((E=_==null?void 0:_.data)==null?void 0:E.message)||"Failed to load categories."),k&&N.error(((F=P==null?void 0:P.data)==null?void 0:F.message)||"Failed to load collections."),b&&N.error(((A=D==null?void 0:D.data)==null?void 0:A.message)||"Failed to load skill levels."),S&&N.error(((W=B==null?void 0:B.data)==null?void 0:W.message)||"Failed to load designers.")},[w,k,b,S]),g.useEffect(()=>{const E={price:[],product_category:[],product_sub_categories:[],product_collection:[],product_sub_collections:[],product_skill_level:[],product_designer:[],product_color:[],rating:[]};t.forEach((F,A)=>{A in E&&(E[A]=F.split(",").filter(Boolean))}),i(E)},[t]);const he=(E,F)=>E?E.filter(A=>Object.entries(F).every(([W,ne])=>{if(!ne||ne.length===0)return!0;switch(W){case"price":return ne.some(L=>{const[q,J]=L.split("-").map(Number);return J?A.price>=q&&A.price<=J:A.price>=q});case"product_color":return ne.some(L=>{var q;return((q=A.product_color)==null?void 0:q._id)===L||A.product_color===L});case"product_category":return ne.some(L=>{var q;return(q=A.product_category)==null?void 0:q.some(J=>J._id===L)});case"product_collection":return ne.some(L=>{var q;return(q=A.product_collection)==null?void 0:q.some(J=>J._id===L)});case"product_skill_level":return ne.some(L=>{var q;return((q=A.product_skill_level)==null?void 0:q._id)===L});case"product_designer":return ne.some(L=>{var q;return((q=A.product_designer)==null?void 0:q._id)===L});case"product_sub_categories":return ne.some(L=>{var q;return(q=A.product_sub_categories)==null?void 0:q.some(J=>J._id===L)});case"product_sub_collections":return ne.some(L=>{var q;return(q=A.product_sub_collections)==null?void 0:q.some(J=>J._id===L)});default:return!0}})):[],I=(E,F)=>{const A={...l};A[E]||(A[E]=[]),A[E].includes(F)?A[E]=A[E].filter(ne=>ne!==F):A[E]=[...A[E],F],i(A);const W=new URLSearchParams(t);A[E].length===0?W.delete(E):W.set(E,A[E].join(",")),W.set("page","1"),a(W)},U=(E,F)=>{I(E,F),o(!1)},Y=E=>({price:"Price Range",product_category:"Categories",product_collection:"Collections",product_color:"Colors",product_skill_level:"Skill Levels",product_designer:"Designers",rating:"Rating"})[E]||E,te=(E=[],F=[],A)=>{const W=(F==null?void 0:F.length)>0?F:E;return Array.isArray(W)?W.filter(ne=>{var L,q;return A.category?(L=ne.product_sub_categories)==null?void 0:L.some(J=>J._id===A._id):A.collection?(q=ne.product_sub_collections)==null?void 0:q.some(J=>J._id===A._id):!1}).length:0},pe=(E,F,A=[])=>{var ne,L;let W=[];return E==="product_category"?W=((ne=X==null?void 0:X.sub_categories)==null?void 0:ne.filter(q=>{var J;return((J=q.category)==null?void 0:J._id)===F}))||[]:E==="product_collection"&&(W=((L=z==null?void 0:z.subcollections)==null?void 0:L.filter(q=>{var J;return((J=q.collection)==null?void 0:J._id)===F}))||[]),W.map(q=>({...q,count:te(A,A,q)})).sort((q,J)=>J.count-q.count)},be=(E,F)=>Object.entries(l).every(([A,W])=>A===F||W.length===0?!0:A==="price"?W.some(ne=>xe(E,ne)):A==="rating"?W.some(ne=>ye(E,ne)):A==="product_color"?W.some(ne=>{var L;return((L=E.product_color)==null?void 0:L._id)===ne||E.product_color===ne}):W.includes(E[A])),ue=(E,F,A)=>{const W=(A==null?void 0:A.length)>0?A:F,ne={};return Object.keys(E).forEach(L=>{ne[L]={},E[L].forEach(q=>{ne[L][q.value]=0})}),!W||W.length===0||Object.keys(E).forEach(L=>{E[L].forEach(q=>{let J;q.key==="latest"||q.key==="best_seller"?J=W.filter(Ne=>{var $e;return(($e=Ne.product_category)==null?void 0:$e.key)===q.key}).length:J=W.filter(Ne=>{var Ee;return(L==="product_color"?((Ee=Ne.product_color)==null?void 0:Ee._id)===q.value||Ne.product_color===q.value:L==="price"?xe(Ne,q.value):L==="rating"?ye(Ne,q.value):Ne[L]===q.value)&&be(Ne,L)}).length,ne[L][q.value]=J})}),ne},xe=(E,F)=>{const[A,W]=F.split("-").map(Number);return W===void 0?E.price>=A:E.price>=A&&E.price<=W},ye=(E,F)=>Math.floor(E.rating)===Number(F);return g.useEffect(()=>()=>{x({}),m(null)},[]),{filterOptions:fe,openCategories:r,selectedFilters:l,isFilterOpen:c,filteredProducts:u,currentCategory:p,setOpenCategories:n,setIsFilterOpen:o,setCurrentCategory:m,handleFilterChange:I,handleFilterChangeAndCloseSheet:U,filterProducts:he,getFilteredProductCount:(E,F,A=[])=>!A||A.length===0?0:A.filter(W=>{var ne,L,q,J,Ne,$e,Ee;switch(E){case"price":const[la,ia]=F.split("-").map(Number);return ia?W.price>=la&&W.price<=ia:W.price>=la;case"product_color":return((ne=W.product_color)==null?void 0:ne._id)===F||W.product_color===F;case"product_category":return(L=W.product_category)==null?void 0:L.some(ls=>ls._id===F);case"product_collection":return(q=W.product_collection)==null?void 0:q.some(ls=>ls._id===F);case"product_skill_level":return((J=W.product_skill_level)==null?void 0:J._id)===F;case"product_designer":return((Ne=W.product_designer)==null?void 0:Ne._id)===F;case"product_sub_categories":return($e=W.product_sub_categories)==null?void 0:$e.some(ls=>ls._id===F);case"product_sub_collections":return(Ee=W.product_sub_collections)==null?void 0:Ee.some(ls=>ls._id===F);default:return!1}}).length,getDisplayName:Y,getSubItems:pe,getSubItemCount:te,calculateFilterCounts:ue,subCategoriesData:X,subCollectionsData:z,isSubCategoriesLoading:V,isSubCollectionsLoading:G,isColorsLoading:de}},Pn=({categories:s,selectedFilters:t,onFilterChange:a,products:r,groupedProducts:n,colors:l})=>{const{currentCategory:i,setCurrentCategory:c,getDisplayName:o,getSubItems:d,getFilteredProductCount:x,subCategoriesData:p,subCollectionsData:m}=_n({categories:s,colorsData:l,products:(n==null?void 0:n.length)>0?n:r,selectedFilters:t}),u=(y,v)=>{c({key:y,id:v})},h=()=>{c(null)},j=(y,v)=>{var w;const f=(n==null?void 0:n.length)>0?n:r;if(i&&i.key===y){const k=(w=v.find(S=>S.value===i.id))==null?void 0:w.label,b=d(y,i.id);return e.jsx(Wd,{categoryKey:y,categoryName:k,subItems:b,selectedFilters:t,productsForCounting:f,onFilterChange:a,onBackClick:h})}return e.jsx(Us,{className:"p-0 bg-brand-start border-t border-brand-end",children:v.length>0?v.map(k=>{var P,D,B;const b=y==="product_category"&&((P=p==null?void 0:p.sub_categories)==null?void 0:P.some(X=>{var V;return((V=X.category)==null?void 0:V._id)===k.value}))||y==="product_collection"&&((D=m==null?void 0:m.subcollections)==null?void 0:D.some(X=>{var V;return((V=X.collection)==null?void 0:V._id)===k.value})),S=x(y,k.value,f),_=S===0;return e.jsx(zd,{option:k,filterKey:y,isChecked:(B=t[y])==null?void 0:B.includes(k.value),hasSubItems:b,itemCount:S,isDisabled:_,onFilterChange:a,onCategoryClick:u},k.value)}):e.jsx("div",{className:"py-4 text-center",children:e.jsxs("span",{className:"text-sm text-gray-300",children:["No ",o(y).toLowerCase()," available"]})})})};return e.jsx(vt,{type:"single",defaultValue:"price",collapsible:!0,children:Object.entries(s).map(([y,v])=>e.jsxs($s,{value:y,className:"border border-brand-end rounded-md bg-brand-start",children:[e.jsx(Ms,{className:"text-base font-semibold text-background [&>svg]:text-background",children:o(y)}),j(y,v)]},y))})},Hd=({isFilterOpen:s,setIsFilterOpen:t,filterOptions:a,selectedFilters:r,onFilterChange:n,productData:l,sortedProducts:i})=>e.jsxs(bs,{open:s,onOpenChange:t,children:[e.jsx(ys,{asChild:!0,children:e.jsxs(O,{variant:"ghost",className:"hover:bg-inherit hover:text-accent text-lg",children:[e.jsx(Lt,{className:"h-8 w-8"}),e.jsx("span",{children:"Filters"})]})}),e.jsxs(vs,{side:"left",children:[e.jsxs(ws,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-accent rounded-lg",children:e.jsx(Lt,{size:20})}),e.jsx(Cs,{className:"m-0 sticky top-0 z-50",children:"Product Filters"})]}),e.jsx(ks,{className:"sr-only",children:"Filter your products by various categories, collections, and attributes."})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-3",children:e.jsx(Pn,{categories:a,selectedFilters:r,onFilterChange:n,products:(l==null?void 0:l.allProducts)||[],groupedProducts:i||[]})})})]})]}),Gd=({filterOptions:s,selectedFilters:t,onFilterChange:a,productData:r,sortedProducts:n})=>e.jsxs("div",{className:"hidden lg:block border border-brand-end rounded-md p-4 sticky top-24 h-[90vh]",children:[e.jsxs("div",{className:"flex items-center mb-4 gap-2",children:[e.jsx(Lt,{className:"h-6 w-6"}),e.jsx("h2",{className:"text-xl font-bold",children:"Filters"})]}),e.jsx("div",{className:"max-h-[75vh] overflow-y-auto pr-2",children:e.jsx(Pn,{categories:s,selectedFilters:t,onFilterChange:a,products:(r==null?void 0:r.allProducts)||[],groupedProducts:n||[]})})]}),Kd=()=>{const[s]=ms();s.get("keyword");const t=g.useMemo(()=>{const _=new URLSearchParams(s);return _.delete("sort"),_},[s]),{data:a,isLoading:r,isError:n,error:l}=Rs(t.toString()),{data:i,isLoading:c,isError:o,error:d}=Ss(),{data:x,isLoading:p,isError:m,error:u}=as(),{data:h,isLoading:j,isError:y,error:v}=gt(),{data:f,isLoading:w,isError:k,error:b}=jt(),S=g.useMemo(()=>{var V,z;if(!((V=a==null?void 0:a.allProducts)!=null&&V.length))return[];const _=s.get("product_collection"),P=s.get("product_sub_collections"),D=(z=s.get("keyword"))==null?void 0:z.toLowerCase(),B=a.allProducts.filter(G=>{var de,fe,he,I,U;let se=!0;if(_&&(se=G.product_collection.some(Y=>Y._id===_)),P&&(se=se&&G.product_sub_collections.some(Y=>Y._id===P)),D){const Y=[G.product_name,...((de=G.product_category)==null?void 0:de.map(te=>te.name))||[],...((fe=G.product_sub_categories)==null?void 0:fe.map(te=>te.name))||[],...((he=G.product_collection)==null?void 0:he.map(te=>te.name))||[],...((I=G.product_sub_collections)==null?void 0:I.map(te=>te.name))||[],(U=G.product_color)==null?void 0:U.name,G.itemID,G.partID].filter(Boolean).map(te=>te.toLowerCase());se=se&&Y.some(te=>te.includes(D))}return se});if(B.length===0)return[];const X={};return B.forEach(G=>{if(!G.partID){X[G._id]=[G];return}const se=G.product_name.split(/[\(\-]/)[0].trim(),de=`${G.partID}-${se}`;X[de]||(X[de]=[]),X[de].push(G)}),Object.values(X).map(G=>G.length===1?G[0]:G.find(de=>de.product_images&&de.product_images.length>0&&de.product_images[0].url)||G[0])},[a==null?void 0:a.allProducts,s]);return{productData:a,isProductLoading:r,productError:n,productErrorMsg:l,groupedProducts:S,filterData:{categoriesData:i,collectionsData:x,skillLevelsData:h,designersData:f,categoriesIsLoading:c,collectionsIsLoading:p,skillLevelsIsLoading:j,designersIsLoading:w,categoriesIsError:o,collectionsIsError:m,skillLevelsIsError:y,designerIsError:k,categoriesError:d,collectionsError:u,skillLevelsError:v,designersError:b}}},Ws=s=>s.price-s.price*(s.discount||0)/100,Yd=(s,t)=>{const a=[...s];switch(t){case"name_asc":return a.sort((r,n)=>r.product_name.localeCompare(n.product_name));case"name_desc":return a.sort((r,n)=>n.product_name.localeCompare(r.product_name));case"price_asc":return a.sort((r,n)=>Ws(r)-Ws(n));case"price_desc":return a.sort((r,n)=>Ws(n)-Ws(r));case"date_asc":return a.sort((r,n)=>new Date(r.createdAt)-new Date(n.createdAt));case"date_desc":return a.sort((r,n)=>new Date(n.createdAt)-new Date(r.createdAt));default:return a}},Qd=()=>(t=!0)=>{window.scrollTo({top:0,behavior:t?"smooth":"auto"})},Jd=(s,t=12)=>{const[a,r]=ms(),n=Number(a.get("page"))||1,l=a.get("sort")||"date_desc",i=Qd(),c=g.useMemo(()=>Yd(s||[],l),[s,l]),o=g.useMemo(()=>{const m=(n-1)*t,u=m+t;return c.slice(m,u)},[c,n,t]),d=Math.ceil(((c==null?void 0:c.length)||0)/t);return{currentPage:n,currentSort:l,paginatedProducts:o,totalPages:d,sortedProducts:c,handlePageChange:m=>{if(m<1||m>d)return;const u=new URLSearchParams(a);u.set("page",m),r(u),i()},handleSortChange:m=>{const u=new URLSearchParams(a);u.set("sort",m),u.set("page","1"),r(u),i()}}},Zd=()=>{const[s]=ms(),t=s.get("keyword"),{productData:a,isProductLoading:r,filterData:n,groupedProducts:l}=Kd(),{filterOptions:i,openCategories:c,selectedFilters:o,isFilterOpen:d,setOpenCategories:x,setIsFilterOpen:p,handleFilterChangeAndCloseSheet:m,filterProducts:u}=_n(n),h=u(l,o),{currentPage:j,currentSort:y,paginatedProducts:v,totalPages:f,sortedProducts:w,handlePageChange:k,handleSortChange:b}=Jd(h);return r?e.jsx(qd,{}):!h||h.length===0?e.jsx(je,{title:t?"No Search Results":"No Products Found",message:t?`We couldn't find any products matching "${t}". Try checking for typos or using more general terms.`:"No products available for the selected filters. Please try different filter options."}):e.jsxs(e.Fragment,{children:[e.jsx(le,{title:t?`Search: ${t}`:"Products"}),e.jsxs("div",{className:"lg:hidden flex items-center justify-between p-5",children:[e.jsx(Hd,{isFilterOpen:d,setIsFilterOpen:p,filterOptions:i,openCategories:c,setOpenCategories:x,selectedFilters:o,onFilterChange:m,productData:a,sortedProducts:h}),e.jsx(va,{totalProducts:(w==null?void 0:w.length)||0,currentProducts:(v==null?void 0:v.length)||0,currentSort:y,onSortChange:b,hideProductCount:!0,minimal:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-5 p-5",children:[e.jsx(Gd,{filterOptions:i,openCategories:c,setOpenCategories:x,selectedFilters:o,onFilterChange:m,productData:a,sortedProducts:h}),e.jsxs("div",{className:"col-span-1 lg:col-span-3",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(va,{totalProducts:(w==null?void 0:w.length)||0,currentProducts:(v==null?void 0:v.length)||0,currentSort:y,onSortChange:b})}),e.jsx(Md,{products:v})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Ud,{currentPage:j,totalPages:f,onPageChange:k})})]})},Xd=({currentProduct:s,displayItems:t,currentImageIndex:a,setCurrentImageIndex:r,thumbnailContainerRef:n,nextImage:l,prevImage:i,similarProducts:c,itemVariants:o})=>{var j,y,v,f,w,k,b,S,_;const d=ee(),x=(t==null?void 0:t.length)>0&&(c?(v=(y=(j=t[0])==null?void 0:j.product_images)==null?void 0:y[0])==null?void 0:v.url:(f=t[0])==null?void 0:f.url),p=()=>(s==null?void 0:s.discount)>0&&e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsxs(oe,{variant:"accent",children:[s.discount,"% OFF"]})});if(!x&&!(c!=null&&c.length))return e.jsxs(T.div,{variants:o,className:"relative flex flex-col-reverse md:flex-row gap-4 h-fit",children:[e.jsx("div",{className:"w-full md:w-[110px] relative",children:e.jsx("div",{className:"w-full h-full overflow-y-auto no-scrollbar",children:e.jsx("div",{className:"flex flex-row md:flex-col gap-2 md:max-h-[600px]",children:e.jsx(bc,{})})})}),e.jsx("div",{className:"flex-1 relative bg-brand-dark/30 rounded-lg overflow-hidden",children:e.jsxs("div",{className:"w-full pt-[100%] relative",children:[e.jsx(p,{}),e.jsx("div",{className:"absolute inset-0",children:e.jsx(Ye,{width:"w-64"})})]})})]});const m=()=>{if(c){const P=a===0?t.length-1:a-1,D=t[P];D!=null&&D._id&&d(`/products/${D._id}`)}i()},u=()=>{if(c){const P=a===t.length-1?0:a+1,D=t[P];D!=null&&D._id&&d(`/products/${D._id}`)}l()},h=P=>{if(c){const D=t[P];D!=null&&D._id&&d(`/products/${D._id}`)}r(P)};return e.jsxs(T.div,{variants:o,className:"relative flex flex-col-reverse md:flex-row gap-4 h-fit",children:[e.jsx("div",{className:"w-full md:w-[110px] relative",children:e.jsx("div",{className:"w-full h-full overflow-y-auto no-scrollbar",ref:n,children:e.jsx("div",{className:"flex flex-row md:flex-col gap-2 md:max-h-[600px]",children:t.map((P,D)=>{var B,X;return e.jsx("button",{onClick:()=>h(D),className:"group relative min-w-[130px] max-w-[130px] md:min-w-0 md:max-w-full",children:e.jsx("div",{className:"pt-[100%] relative",children:e.jsx("div",{className:`absolute inset-0 rounded-lg overflow-hidden border-2 transition-all ${a===D?"border-accent border-4":"border border-brand-start"}`,children:c?(X=(B=P.product_images)==null?void 0:B[0])!=null&&X.url?e.jsx("img",{src:P.product_images[0].url,alt:`${P.product_name}`,className:"w-full h-full object-contain md:object-cover"}):e.jsx(Ye,{width:"w-16"}):P.url?e.jsx("img",{src:P.url,alt:`${s.product_name} view ${D+1}`,className:"w-full h-full object-contain md:object-cover"}):e.jsx(Ye,{width:"w-16"})})})},D)})})})}),e.jsx("div",{className:"flex-1 relative rounded-lg overflow-hidden",children:e.jsxs("div",{className:"w-full pt-[100%] relative",children:[e.jsx(p,{}),e.jsx("div",{className:"absolute inset-0",children:e.jsx(Qt,{mode:"wait",children:c?(b=(k=(w=t[a])==null?void 0:w.product_images)==null?void 0:k[0])!=null&&b.url?e.jsx(T.img,{src:t[a].product_images[0].url,alt:(S=t[a])==null?void 0:S.product_name,className:"w-full h-full object-contain",initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3}},a):e.jsx(Ye,{width:"w-64"}):(_=t[a])!=null&&_.url?e.jsx(T.img,{src:t[a].url,alt:s==null?void 0:s.product_name,className:"w-full h-full object-contain",initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3}},a):e.jsx(Ye,{width:"w-64"})})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-foreground/50 hover:bg-foreground/70 z-10",onClick:m,children:e.jsx(Gt,{className:"w-6 h-6 text-background"})}),e.jsx(O,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-foreground/50 hover:bg-foreground/70 z-10",onClick:u,children:e.jsx(fs,{className:"w-6 h-6 text-background"})})]})]})})]})},In=({stock:s,variant:t="default"})=>{const r=!s||s<=0?{text:"Unavailable",badgeVariant:"destructive",dotColor:"bg-destructive",textColor:"text-destructive"}:s>50?{text:"In Stock",badgeVariant:"success",dotColor:"bg-green-500",textColor:"text-green-500"}:s>0?{text:"Low Stock",badgeVariant:"warning",dotColor:"bg-yellow-500",textColor:"text-accent"}:{text:"Unavailable",badgeVariant:"destructive",dotColor:"bg-destructive",textColor:"text-destructive"};switch(t){case"pill":return e.jsx(oe,{variant:r.badgeVariant,children:r.text});case"dot":return e.jsxs("div",{className:"flex items-center gap-2 relative",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${r.dotColor} animate-ping absolute`}),e.jsx("span",{className:`w-2 h-2 rounded-full ${r.dotColor}`}),e.jsx("span",{className:`text-sm font-medium ${r.textColor}`,children:r.text==="Low Stock"?`Hurry up, ${s} stocks left!`:r.text})]});default:return e.jsx("span",{className:`text-sm font-medium ${r.textColor}`,children:r.text})}},em=()=>{try{const s=localStorage.getItem("buyNow");return s?JSON.parse(s):{item:null}}catch(s){return console.error("Error loading buyNow from localStorage:",s),{item:null}}},sm=em(),Dn=Yt({name:"buyNow",initialState:sm,reducers:{setBuyNowItem:(s,t)=>{s.item=t.payload,localStorage.setItem("buyNow",JSON.stringify(s))},updateBuyNowQuantity:(s,t)=>{s.item&&(s.item.quantity=t.payload,localStorage.setItem("buyNow",JSON.stringify(s)))},clearBuyNowItem:s=>{s.item=null,localStorage.removeItem("buyNow")},setExternalBuyNowItem:(s,t)=>{t.payload&&t.payload.length>0?(s.item={...t.payload[0],quantity:t.payload[0].quantity??1},localStorage.setItem("buyNow",JSON.stringify(s))):(s.item=null,localStorage.removeItem("buyNow"))}}}),{setBuyNowItem:Fn,updateBuyNowQuantity:tm,clearBuyNowItem:mh,setExternalBuyNowItem:am}=Dn.actions,rm=Dn.reducer,nm=({product:s})=>{const t=js(),a=ee(),r=Te(),{isAuthenticated:n}=ae(x=>x.auth),{cartItems:l}=ae(x=>x.cart),i=()=>{var x,p;return{product:s._id,name:s.product_name,discounted_price:s.discounted_price||s.price,price:s.price,discount:s.discount,image:(x=s.product_images[0])==null?void 0:x.url,quantity:1,stock:s.stock,color:((p=s.product_color)==null?void 0:p.name)||null,includes:s.product_includes||""}},c=()=>{const x=l.find(p=>p.product===s._id);return x&&x.quantity>=s.stock?(N.error(`Maximum stock limit reached (${s.stock} items)`),!1):!0},o=()=>{c()&&(t(Sc(i())),N.success("Added to cart successfully"))},d=()=>{if(!n){N.info("Please login to proceed with purchase"),a("/login",{state:{from:r.pathname,returnTo:"product"}});return}t(Fn(i())),a("/checkout?mode=buy_now")};return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(bs,{children:[e.jsx(ys,{asChild:!0,children:e.jsx(O,{variant:(s==null?void 0:s.stock)<=0?"destructive":"cart",className:"w-full",disabled:!(s!=null&&s.stock)||(s==null?void 0:s.stock)<=0,onClick:o,children:(s==null?void 0:s.stock)<=0?"Out of Stock":"Add to Cart"})}),e.jsx(yt,{})]}),e.jsx(O,{variant:"accent",className:"w-full",disabled:!(s!=null&&s.stock)||(s==null?void 0:s.stock)<=0,onClick:d,children:"Buy Now"})]})},lm=({product:s,itemVariants:t,onAddToCart:a,colorVariants:r,scrollThumbnailIntoView:n,reviewStats:l={averageRating:0,totalReviews:0}})=>{var o,d,x,p;const i=ee(),c=m=>{i(`/products/${m}`)};return e.jsx(Qt,{mode:"wait",children:e.jsxs(T.div,{variants:t,initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[e.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:(s==null?void 0:s.product_name)||"Unnamed Product"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-gray-300",children:[l.totalReviews>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xe,{rating:Number(l.averageRating)}),e.jsxs("span",{className:"whitespace-nowrap",children:["(",l.totalReviews," ",l.totalReviews===1?"review":"reviews",")"]})]}),((s==null?void 0:s.itemID)||(s==null?void 0:s.partID))&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[(s==null?void 0:s.itemID)&&e.jsxs("span",{className:"whitespace-nowrap",children:["Item ID: ",s.itemID]}),(s==null?void 0:s.itemID)&&(s==null?void 0:s.partID)&&e.jsx("span",{className:"text-gray-300",children:""}),(s==null?void 0:s.partID)&&e.jsxs("span",{className:"whitespace-nowrap",children:["Part ID: ",s.partID]})]})})]})]}),e.jsxs(T.div,{className:"flex items-center gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[e.jsxs("span",{className:"text-4xl font-bold",children:["$",((s==null?void 0:s.discounted_price)||0).toFixed(2)]}),(s==null?void 0:s.discount)>0&&(s==null?void 0:s.price)&&e.jsxs("span",{className:"text-base text-gray-300 line-through",children:["$",s==null?void 0:s.price.toFixed(2)]})]}),e.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"space-y-6",children:[(s==null?void 0:s.product_availability)&&e.jsx(In,{stock:s==null?void 0:s.stock,variant:"dot"}),(((o=s.product_category)==null?void 0:o.length)>0||((d=s.product_collection)==null?void 0:d.length)>0)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Features & Classifications"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(x=s==null?void 0:s.product_category)==null?void 0:x.map(m=>{var h;const u=(h=s==null?void 0:s.product_sub_categories)==null?void 0:h.filter(j=>j.category._id===m._id);return(u==null?void 0:u.length)>0?u.map(j=>e.jsx(oe,{variant:"subCategory",children:j.name},j._id)):e.jsx(oe,{variant:"category",children:m.name},m._id)}),(p=s==null?void 0:s.product_collection)==null?void 0:p.map(m=>{var h;const u=(h=s==null?void 0:s.product_sub_collections)==null?void 0:h.filter(j=>j.collection._id===m._id);return(u==null?void 0:u.length)>0?u.map(j=>e.jsx(oe,{variant:"collection",children:j.name},j._id)):e.jsx(oe,{variant:"subCollection",children:m.name},m._id)})]})]}),(s==null?void 0:s.product_includes)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Bundle Details"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.product_includes.split(",").filter(m=>m.trim()).map((m,u)=>e.jsx(oe,{variant:"subCategory",children:m.trim()},u))})]}),((r==null?void 0:r.length)>0||(s==null?void 0:s.product_color))&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:(r==null?void 0:r.length)>0?"Color Variants":"Color"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(r==null?void 0:r.length)>0?r.map(m=>e.jsx("button",{onClick:()=>{c(m.id),n==null||n(m.thumbnailIndex)},className:`w-6 h-6 rounded-full transition-all ${m.isActive?"border-accent border-2":"border border-gray-600"}`,style:{backgroundColor:m.color.code},title:m.color.name},m.id)):(s==null?void 0:s.product_color)&&e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-accent",style:{backgroundColor:s.product_color.code},title:s.product_color.name})})]}),[s==null?void 0:s.product_description_1,s==null?void 0:s.product_description_2,s==null?void 0:s.product_description_3].filter(m=>m==null?void 0:m.trim()).length>0&&e.jsx("div",{className:"space-y-2",children:[s==null?void 0:s.product_description_1,s==null?void 0:s.product_description_2,s==null?void 0:s.product_description_3].filter(m=>m==null?void 0:m.trim()).map((m,u)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(dr,{className:"w-5 h-5 text-green-500 mt-1 flex-shrink-0"}),e.jsx("p",{children:m})]},u))}),e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(nm,{product:s,onAddToCart:a})})]})]},s==null?void 0:s._id)})},im=(s,t,a,r)=>{const n=g.useRef(null),[l,i]=g.useState(0),[c,o]=g.useState(s);g.useEffect(()=>{o(s)},[s]);const d=g.useMemo(()=>{var h;if((t==null?void 0:t.length)>0){const j=t.filter(v=>v.partID===s.partID);return[s,...j].filter((v,f,w)=>f===w.findIndex(k=>k._id===v._id)).sort((v,f)=>{const w=parseInt(v.itemID||v._id),k=parseInt(f.itemID||f._id);return w-k})}return((h=s==null?void 0:s.product_images)==null?void 0:h.length)>0?s.product_images.filter(j=>j.usage==="MAIN_SITE"):[]},[t,s]);g.useEffect(()=>{if((t==null?void 0:t.length)>0&&s){const h=d.findIndex(j=>j._id===s._id);h!==-1&&i(h)}else i(0)},[s,t,d]),g.useEffect(()=>{o(t?d[l]:s)},[l,t,s,d]);const x=g.useMemo(()=>t!=null&&t.length?d.filter(h=>h.product_color).map(h=>({id:h._id,color:{_id:h.product_color._id,name:h.product_color.name,code:h.product_color.code},isActive:h._id===c._id,thumbnailIndex:d.findIndex(j=>j._id===h._id)})).filter((h,j,y)=>j===y.findIndex(v=>v.color._id===h.color._id)):[],[d,c,t]),p=h=>{var j;if(n!=null&&n.current)try{const y=n.current,v=(j=y.children[0])==null?void 0:j.children;v!=null&&v[h]&&(h===0?y.scrollTo({top:0,left:0,behavior:"smooth"}):v[h].scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}))}catch(y){console.warn("Error scrolling thumbnail into view:",y)}};return{thumbnailContainerRef:n,currentImageIndex:l,setCurrentImageIndex:i,currentProduct:c,displayItems:d,colorVariants:x,nextImage:()=>{const h=l===d.length-1?0:l+1;i(h),p(h)},prevImage:()=>{const h=l===0?d.length-1:l-1;i(h),p(h)},scrollThumbnailIntoView:p,pageTitle:(c==null?void 0:c.product_name)||"Product Details"}},cm=({product:s,similarProducts:t,itemVariants:a,reviewStats:r})=>{const{thumbnailContainerRef:n,currentImageIndex:l,setCurrentImageIndex:i,currentProduct:c,displayItems:o,colorVariants:d,nextImage:x,prevImage:p,scrollThumbnailIntoView:m,pageTitle:u}=im(s,t);return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:u}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 p-5",children:[e.jsx("div",{className:"w-full",children:e.jsx(Xd,{currentProduct:c,displayItems:o,currentImageIndex:l,setCurrentImageIndex:i,thumbnailContainerRef:n,nextImage:x,prevImage:p,similarProducts:t,itemVariants:a})}),e.jsx("div",{className:"w-full",children:e.jsx(lm,{product:c,itemVariants:a,colorVariants:d,scrollThumbnailIntoView:m,reviewStats:r})})]})]})},om=({customerPhotos:s,setIsGalleryOpen:t})=>{const[a,r]=g.useState(!1);g.useEffect(()=>{const i=()=>r(window.innerWidth<640);return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const n=a?3:6,l=s.slice(0,n);return e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(re,{className:"text-xl font-semibold flex items-center text-background",children:[e.jsx(oa,{className:"w-5 h-5 mr-2 text-accent"}),"Customer Photos"]}),s.length>n&&e.jsx(O,{variant:"link",onClick:()=>t(!0),className:"text-accent",children:"View all"})]})}),e.jsx(M,{children:s.length>0?e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3",children:l.map((i,c)=>{const o=c===n-1&&s.length>n;return e.jsxs("div",{className:"relative cursor-pointer aspect-square",onClick:()=>t(!0),children:[e.jsx("img",{src:i.url,alt:`Customer review ${c+1}`,className:"w-full h-full object-cover rounded-lg"}),o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 rounded-lg flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-semibold text-white",children:["+",s.length-n]})})]},c)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[e.jsx(oa,{className:"w-12 h-12 mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No customer photos yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Be the first to share your experience!"})]})})]})},dm=({isOpen:s,onOpenChange:t,customerPhotos:a})=>e.jsx(Ke,{open:s,onOpenChange:t,children:e.jsxs(qe,{className:"max-w-5xl max-h-[95vh] overflow-y-auto scrollbar-none",children:[e.jsxs(Ve,{children:[e.jsx(ze,{children:"Customer Photos"}),e.jsx(ns,{className:"text-gray-400 text-sm sr-only",children:"Photos shared by our customers"})]}),a.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-3",children:a.map((r,n)=>e.jsx("div",{className:"aspect-square w-full rounded-xl overflow-hidden",children:e.jsx("img",{src:r.url,alt:`Customer review ${n+1}`,className:"w-full h-full object-cover"})},n))}):e.jsx(je,{title:"No Photos Yet",message:"Be the first to share your experience with photos!",minHeight:"min-h-[300px]"})]})}),mm=({averageRating:s,totalReviews:t})=>e.jsx($,{children:e.jsxs(H,{children:[e.jsxs(re,{className:"text-xl font-semibold flex items-center text-background mb-5",children:[e.jsx(Ll,{className:"w-5 h-5 mr-2 text-accent"}),"Overall Rating"]}),e.jsxs(rs,{className:"text-center space-y-5",children:[e.jsxs("div",{className:"text-5xl font-bold text-background",children:[s,e.jsx("span",{className:"text-3xl text-gray-400",children:"/5.0"})]}),e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx(Xe,{rating:Number(s),size:"lg"})}),e.jsxs("div",{className:"text-gray-400",children:["(",t,") ",t===1?"review":"reviews"]})]})]})}),um=[{icon:e.jsx(ut,{className:"w-6 h-6"}),title:"Authentic Products",description:"100% genuine World of Minifigs parts"},{icon:e.jsx(mt,{className:"w-6 h-6"}),title:"Fast Shipping",description:"Orders ship within 24 hours"},{icon:e.jsx(lr,{className:"w-6 h-6"}),title:"Easy Returns",description:"30-day hassle-free returns"}],xm=()=>e.jsxs($,{children:[e.jsx(H,{children:e.jsxs(re,{className:"text-xl font-semibold flex items-center text-background",children:[e.jsx(ut,{className:"w-5 h-5 mr-2 text-accent"}),"Shop With Confidence"]})}),e.jsx(M,{className:"space-y-5",children:um.map((s,t)=>e.jsxs("div",{className:"flex items-start gap-4 group transition-all",children:[e.jsx("div",{className:"flex-shrink-0 p-2 rounded-full bg-brand-start text-accent",children:s.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-200",children:s.title}),e.jsx("p",{className:"text-sm text-gray-400",children:s.description})]})]},t))})]}),hm=({activeTab:s,setActiveTab:t,reviewTabs:a})=>e.jsx("div",{className:"flex flex-wrap gap-2 pb-5",children:a.map(r=>e.jsx(O,{onClick:()=>t(r.id),className:`px-5 py-2 rounded-lg whitespace-nowrap transition-all ${s===r.id?"bg-accent text-black hover:bg-accent/90":"bg-brand-dark/50 text-gray-400 hover:text-accent border border-brand-end/50 hover:bg-inherit"}`,children:r.label},r.id))}),An=g.forwardRef(({className:s,...t},a)=>e.jsx(xr,{ref:a,className:K("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));An.displayName=xr.displayName;const Tn=g.forwardRef(({className:s,...t},a)=>e.jsx(hr,{ref:a,className:K("aspect-square h-full w-full",s),...t}));Tn.displayName=hr.displayName;const En=g.forwardRef(({className:s,...t},a)=>e.jsx(pr,{ref:a,className:K("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));En.displayName=pr.displayName;const pm=({review:s,handleVote:t,user:a})=>{var r,n,l,i,c,o,d,x,p,m,u,h,j,y;return s!=null&&s.productDetails?e.jsxs($,{children:[e.jsx(H,{className:"pb-2",children:e.jsxs("div",{className:"flex items-start gap-3 border-b border-brand-end/50 pb-4",children:[e.jsxs(An,{className:"w-10 h-10",children:[e.jsx(Tn,{src:(r=s.user)==null?void 0:r.avatar}),e.jsx(En,{className:"bg-accent text-black font-medium capitalize",children:((l=(n=s.user)==null?void 0:n.name)==null?void 0:l.charAt(0))||"U"})]}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-background",children:((i=s.user)==null?void 0:i.name)||"Anonymous"}),((c=s.user)==null?void 0:c.is_verified)&&e.jsxs(oe,{variant:"success",children:[e.jsx(Ot,{className:"w-3 h-3 mr-1"}),"Verified Buyer"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Xe,{rating:s.productDetails.rating,size:"sm"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{className:"text-sm text-gray-400",children:Me(new Date(s.createdAt),"MMM d, yyyy")})]})]})})})]})}),e.jsxs(M,{children:[s.productDetails.reviewText&&e.jsx("p",{className:"text-gray-300",children:s.productDetails.reviewText}),((o=s.productDetails.images)==null?void 0:o.length)>0&&e.jsx("div",{className:"flex gap-2 my-4 flex-wrap",children:s.productDetails.images.map((v,f)=>e.jsx("div",{className:"relative w-24 h-24 sm:w-32 sm:h-32",children:e.jsx("img",{src:v.url,alt:`Review ${f+1}`,className:"w-full h-full object-cover rounded-lg"})},f))}),e.jsxs("div",{className:"flex items-center gap-3 pt-3",children:[e.jsxs("button",{onClick:()=>t(s,"helpful"),className:`flex items-center gap-1 text-sm transition-all duration-200 ${(d=s.productDetails.helpfulVotes)!=null&&d.includes(a==null?void 0:a._id)?"text-emerald-400 scale-105":"text-gray-400 hover:text-background hover:scale-102"}`,children:[e.jsx(gr,{className:`w-4 h-4 transition-all duration-200 ${(x=s.productDetails.helpfulVotes)!=null&&x.includes(a==null?void 0:a._id)?"fill-emerald-400":"hover:fill-background/20"}`}),e.jsxs("span",{className:`transition-all duration-200 ${(p=s.productDetails.helpfulVotes)!=null&&p.includes(a==null?void 0:a._id)?"font-medium":""}`,children:["Helpful (",((m=s.productDetails.helpfulVotes)==null?void 0:m.length)||0,")"]})]}),e.jsxs("button",{onClick:()=>t(s,"unhelpful"),className:`flex items-center gap-1 text-sm transition-all duration-200 ${(u=s.productDetails.unhelpfulVotes)!=null&&u.includes(a==null?void 0:a._id)?"text-red-400 scale-105":"text-gray-400 hover:text-background hover:scale-102"}`,children:[e.jsx(jr,{className:`w-4 h-4 transition-all duration-200 ${(h=s.productDetails.unhelpfulVotes)!=null&&h.includes(a==null?void 0:a._id)?"fill-red-400":"hover:fill-background/20"}`}),e.jsxs("span",{className:`transition-all duration-200 ${(j=s.productDetails.unhelpfulVotes)!=null&&j.includes(a==null?void 0:a._id)?"font-medium":""}`,children:["Not Helpful (",((y=s.productDetails.unhelpfulVotes)==null?void 0:y.length)||0,")"]})]})]})]})]}):null},gm=({reviews:s,activeTab:t,handleVote:a,user:r})=>e.jsx("div",{className:"space-y-3",children:s[t].length>0?s[t].map((n,l)=>e.jsx(pm,{review:n,handleVote:a,user:r},l)):e.jsx("div",{className:"bg-brand-dark/50 border border-brand-end/50 rounded-lg p-5",children:e.jsx(je,{title:"No Reviews Found for the selected filter",message:"Try selecting a different filter or be the first to leave a review!",minHeight:"min-h-[300px]"})})}),jm=s=>{const{data:t,isLoading:a}=ta(s),[r]=Pd(),{user:n,isAuthenticated:l}=ae(m=>m.auth),i=ee(),c=Te(),o=async(m,u)=>{var h,j,y,v;try{if(!m||!m._id||!s){N.error("Invalid review data");return}if(!l){i("/login",{state:{from:c.pathname,returnTo:"product",action:"vote"}}),N.info("Please login to vote on reviews");return}if(!(n!=null&&n.is_verified)){N.error("Only verified users can vote on reviews");return}if(((h=m.user)==null?void 0:h._id)===n._id){N.error("You cannot vote on your own review");return}const f=m.productDetails;if(!f){N.error("Review details not found");return}const w=(j=f.helpfulVotes)==null?void 0:j.includes(n._id),k=(y=f.unhelpfulVotes)==null?void 0:y.includes(n._id);u==="helpful"?w?N.info("Vote removed"):k?N.success("Vote changed to helpful"):N.success("Marked as helpful"):u==="unhelpful"&&(k?N.info("Vote removed"):w?N.success("Vote changed to not helpful"):N.success("Marked as not helpful")),await r({reviewId:m._id,productId:s,voteType:u}).unwrap()}catch(f){console.error("Vote error:",f),N.error(((v=f==null?void 0:f.data)==null?void 0:v.message)||"Failed to record vote")}},d=g.useMemo(()=>{var m,u,h;if(!t||!s)return{averageRating:"0.0",totalReviews:0,distribution:[0,0,0,0,0],customerPhotos:[],reviews:{all:[],with_comments:[],star_only:[],with_photos:[]}};try{const j=t.reviews.reduce((f,w)=>{var b;const k=(b=w.products)==null?void 0:b.find(S=>S.product===s);return k?[...f,{...w,productDetails:k}]:f},[]),y={all:j,with_comments:j.filter(f=>{var w,k,b;return((w=f.productDetails)==null?void 0:w.reviewText)&&!((b=(k=f.productDetails)==null?void 0:k.images)!=null&&b.length)}),star_only:j.filter(f=>{var w,k,b;return!((w=f.productDetails)!=null&&w.reviewText)&&!((b=(k=f.productDetails)==null?void 0:k.images)!=null&&b.length)}),with_photos:j.filter(f=>{var w,k;return((k=(w=f.productDetails)==null?void 0:w.images)==null?void 0:k.length)>0})},v=j.reduce((f,w)=>{var k,b;return((b=(k=w.productDetails)==null?void 0:k.images)==null?void 0:b.length)>0?[...f,...w.productDetails.images]:f},[]);return{averageRating:((m=t.stats)==null?void 0:m.averageRating)||"0.0",totalReviews:((u=t.stats)==null?void 0:u.totalReviews)||0,distribution:((h=t.stats)==null?void 0:h.distribution)||[0,0,0,0,0],customerPhotos:v,reviews:y}}catch(j){return console.error("Data processing error:",j),{averageRating:"0.0",totalReviews:0,distribution:[0,0,0,0,0],customerPhotos:[],reviews:{all:[],with_comments:[],star_only:[],with_photos:[]}}}},[t,s]),x=g.useMemo(()=>{var m,u,h,j;return{all:((m=d.reviews.all)==null?void 0:m.length)||0,with_comments:((u=d.reviews.with_comments)==null?void 0:u.length)||0,star_only:((h=d.reviews.star_only)==null?void 0:h.length)||0,with_photos:((j=d.reviews.with_photos)==null?void 0:j.length)||0}},[d.reviews]),p=g.useMemo(()=>[{id:"all",label:`All Reviews (${x.all})`},{id:"with_comments",label:`With Comments (${x.with_comments})`},{id:"star_only",label:`Stars (${x.star_only})`},{id:"with_photos",label:`With Photos (${x.with_photos})`}],[x]);return{...d,isLoading:a,handleVote:o,isAuthenticated:l,user:n,tabCounts:x,reviewTabs:p}},fm=({product:s})=>{const[t,a]=g.useState("all"),[r,n]=g.useState(!1),{averageRating:l,totalReviews:i,distribution:c,customerPhotos:o,reviews:d,handleVote:x,user:p,reviewTabs:m}=jm(s==null?void 0:s._id);return s?e.jsxs("div",{className:"py-10 px-4",children:[e.jsxs("h2",{className:"text-3xl font-semibold mb-5 flex items-center gap-4",children:[e.jsx("div",{className:"w-1 h-8 bg-accent rounded-full"}),e.jsx("span",{children:"Ratings & Reviews"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-5",children:[e.jsx(mm,{averageRating:l,totalReviews:i}),e.jsx(xm,{})]}),e.jsxs("div",{className:"lg:col-span-8 space-y-5",children:[e.jsxs($,{children:[e.jsx(H,{children:e.jsxs(re,{className:"text-xl font-semibold flex items-center text-background",children:[e.jsx(is,{className:"w-5 h-5 mr-2 text-accent"}),"Rating Distribution"]})}),e.jsx(M,{children:e.jsx(vd,{distribution:c,totalReviews:i})})]}),e.jsx(om,{customerPhotos:o,setIsGalleryOpen:n})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:e.jsxs("h2",{className:"text-2xl font-semibold flex items-center",children:[e.jsx(Zs,{className:"w-5 h-5 mr-2 text-accent"}),"Customer Reviews"]})}),e.jsx(hm,{activeTab:t,setActiveTab:a,reviewTabs:m}),e.jsx(gm,{reviews:d,activeTab:t,handleVote:x,user:p})]}),e.jsx(dm,{isOpen:r,onOpenChange:n,customerPhotos:o})]}):null},bm=({product:s,specifications:t})=>s?e.jsxs("div",{className:"bg-brand-dark/50 py-10 px-4",children:[e.jsxs("h2",{className:"text-3xl font-semibold mb-5 flex items-center gap-4",children:[e.jsx("div",{className:"w-1 h-8 bg-accent rounded-full"}),e.jsx("span",{children:"Specifications"})]}),t&&t.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:t.map((a,r)=>{var n;return e.jsx($,{children:e.jsxs(M,{className:"pt-5",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 mb-5",children:[e.jsx("div",{className:"p-3",children:a==null?void 0:a.icon}),e.jsx("h2",{className:"text-base md:text-2xl font-semibold text-background text-center",children:a==null?void 0:a.title})]}),e.jsx("ul",{children:(n=a==null?void 0:a.items)==null?void 0:n.map((l,i)=>e.jsx("li",{className:"text-gray-400 font-medium text-sm md:text-base text-center",children:l},i))})]})},r)})}):e.jsx(je,{title:"No Specifications Available",message:"This product doesn't have any specifications defined yet.",minHeight:"min-h-[300px]"})]}):null,ym=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-5 bg-brand-start",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"relative flex flex-col-reverse md:flex-row gap-4 h-fit",children:[e.jsx("div",{className:"w-full md:w-[110px] relative",children:e.jsx("div",{className:"w-full h-full overflow-y-auto no-scrollbar",children:e.jsx("div",{className:"flex flex-row md:flex-col gap-2 md:max-h-[600px]",children:Array(5).fill().map((s,t)=>e.jsx("div",{className:"min-w-[130px] max-w-[130px] md:min-w-0 md:max-w-full",children:e.jsx("div",{className:"pt-[100%] relative",children:e.jsx("div",{className:"absolute inset-0 rounded-lg overflow-hidden border border-slate-700",children:e.jsx(C,{className:"w-full h-full"})})})},t))})})}),e.jsx("div",{className:"flex-1 relative rounded-lg",children:e.jsx("div",{className:"w-full pt-[95%] relative",children:e.jsx("div",{className:"absolute inset-0",children:e.jsx(C,{className:"w-full h-full"})})})})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"mb-10",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(C,{className:"h-10 w-4/5"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-2 mt-1",children:[e.jsx(C,{className:"h-5 w-32"}),e.jsx(C,{className:"h-5 w-40"})]})]}),e.jsx("div",{className:"flex items-center gap-4 mt-5",children:e.jsx(C,{className:"h-10 w-32"})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(C,{className:"h-6 w-32"}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(C,{className:"h-5 w-48"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array(4).fill().map((s,t)=>e.jsx(C,{className:"h-5 w-24 rounded-full"},t))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(C,{className:"h-5 w-32"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array(3).fill().map((s,t)=>e.jsx(C,{className:"h-6 w-6 rounded-full"},t))})]}),e.jsx("div",{className:"space-y-3",children:Array(3).fill().map((s,t)=>e.jsx("div",{className:"flex items-start gap-3",children:e.jsx(C,{className:"h-7 flex-1"})},t))}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[e.jsx(C,{className:"h-12 w-full rounded-lg "}),e.jsx(C,{className:"h-12 w-full rounded-lg "})]})]})]})})]})}),e.jsx("div",{className:"bg-brand-end/50 py-10",children:e.jsxs("div",{className:"max-w-8xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 px-4 mb-8",children:[e.jsx(C,{className:"w-1 h-8"}),e.jsx(C,{className:"h-8 w-48"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mx-5",children:Array(4).fill().map((s,t)=>e.jsxs("div",{className:"bg-brand-end/30 p-6 rounded-xl border border-brand-end/50",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(C,{className:"h-14 w-14 rounded-lg"}),e.jsx(C,{className:"h-7 w-32 ml-5"})]}),e.jsx("div",{className:"space-y-3 mb-4 pt-5",children:e.jsx(C,{className:"h-5 w-full"})})]},t))})]})}),e.jsx("div",{className:"bg-brand-start py-10",children:e.jsxs("div",{className:"max-w-8xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 px-4 mb-8",children:[e.jsx(C,{className:"w-1 h-8"}),e.jsx(C,{className:"h-8 w-48"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-5 mx-5",children:[e.jsx("div",{className:"lg:col-span-4 space-y-5",children:e.jsx("div",{className:"bg-brand-end/30 p-8 rounded-xl border border-brand-end/50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(C,{className:"h-16 w-24 mb-2"}),e.jsx(C,{className:"h-6 w-32 mb-3"}),e.jsx(C,{className:"h-5 w-20 mb-6"}),e.jsx(C,{className:"h-12 w-full rounded-md"}),e.jsx(C,{className:"h-4 w-48 mt-4"})]})})}),e.jsx("div",{className:"lg:col-span-8 space-y-5",children:e.jsxs("div",{className:"bg-brand-end/30 p-8 rounded-xl border border-brand-end/50",children:[e.jsx(C,{className:"h-7 w-48 mb-6"}),e.jsx("div",{className:"space-y-5",children:Array(5).fill().map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-5 w-6"}),e.jsx(C,{className:"h-3 flex-1 rounded-full"}),e.jsx(C,{className:"h-5 w-8"})]},t))})]})})]}),e.jsx("div",{className:"mt-12 mx-5",children:e.jsx("div",{className:"space-y-6",children:Array(2).fill().map((s,t)=>e.jsx("div",{className:"bg-brand-end/30 p-6 rounded-xl border border-brand-end/50",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(C,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx(C,{className:"h-5 w-32 mb-1"}),e.jsx(C,{className:"h-4 w-48"})]}),e.jsx(C,{className:"h-16 w-full"})]})]})},t))})})]})})]}),Tt=()=>{var p,m;const{id:s}=Se(),{data:t,isLoading:a,isError:r,error:n}=pt(s),{data:l}=ta(s,{skip:!s}),i=(l==null?void 0:l.stats)||{averageRating:0,totalReviews:0},c=g.useMemo(()=>{var h;if(!(t!=null&&t.product)||!((h=t==null?void 0:t.similarProducts)!=null&&h.length))return null;const u=[t.product,...t.similarProducts].filter((j,y,v)=>y===v.findIndex(f=>f._id===j._id));return u.length>1?u:null},[t==null?void 0:t.product,t==null?void 0:t.similarProducts]),o={pieceCount:{title:"Piece Count",icon:e.jsx(sr,{className:"w-8 h-8 text-orange-400"})},skillLevel:{title:"Skill Level",icon:e.jsx(Ol,{className:"w-8 h-8 text-green-400"})},dimensions:{title:"Dimensions",icon:e.jsx(Rl,{className:"w-8 h-8 text-blue-400"})},designer:{title:"Designed By",icon:e.jsx(Ge,{className:"w-8 h-8 text-purple-400"})}},d=u=>{var j,y;if(!u)return[];const h=()=>{const v=[];return u!=null&&u.product_length&&v.push(`L: ${u.product_length}`),u!=null&&u.product_width&&v.push(`W: ${u.product_width}`),u!=null&&u.product_height&&v.push(`H: ${u.product_height}`),v.length>0?[v.join("  ")]:["Dimensions not specified"]};return[{...o.pieceCount,items:u!=null&&u.product_piece_count?[`${u==null?void 0:u.product_piece_count} ${(u==null?void 0:u.product_piece_count)===1?"piece":"pieces"}`]:["Piece count not specified"]},{...o.skillLevel,items:(j=u==null?void 0:u.product_skill_level)!=null&&j.name?[u.product_skill_level.name]:["Skill level not specified"]},{...o.dimensions,items:h()},{...o.designer,items:(y=u==null?void 0:u.product_designer)!=null&&y.name?[u.product_designer.name]:["Designer not specified"]}].filter(v=>v.items.length>0)},x=g.useMemo(()=>d(t==null?void 0:t.product),[t==null?void 0:t.product]);return a?e.jsx(ym,{}):r?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx(je,{title:"Error Loading Product",message:((p=n==null?void 0:n.data)==null?void 0:p.message)||"There was a problem loading the product details. Please try again later."})}):t!=null&&t.product?e.jsxs(e.Fragment,{children:[e.jsx(le,{title:((m=t==null?void 0:t.product)==null?void 0:m.product_name)||"Product Details"}),e.jsx(cm,{product:t==null?void 0:t.product,similarProducts:c,containerVariants:fa.containerVariants,itemVariants:fa.itemVariants,reviewStats:i}),e.jsx(bm,{product:t==null?void 0:t.product,specifications:x}),e.jsx(fm,{product:t==null?void 0:t.product,reviewStats:i})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx(je,{title:"Product Not Found",message:"The product you're looking for doesn't seem to exist or may have been removed."})})},Nm=({value:s,onChange:t,placeholder:a})=>{const[r,n]=g.useState(s||"");return g.useEffect(()=>{const l=setTimeout(()=>{t(r)},300);return()=>clearTimeout(l)},[r,t]),e.jsxs("div",{className:"relative flex-1 md:max-w-xs",children:[e.jsx(Q,{value:r,onChange:l=>n(l.target.value),placeholder:a,className:`pl-10 py-3 bg-inherit\r
                  placeholder:text-gray-200 border border-brand-end/50 text-background`}),e.jsx(os,{className:"absolute left-3 top-3 h-5 w-5 text-gray-200"})]})},vm=({value:s,onChange:t,totalEntries:a})=>{const[r,n]=ms();g.useEffect(()=>{const c=r.get("pageSize");c&&(c==="all"?t(a):!isNaN(c)&&Number(c)!==s&&t(Number(c)))},[]);const l=c=>{const o=new URLSearchParams(r);if(c==="all")o.set("pageSize","all"),n(o),t(a);else{const d=Number(c);o.set("pageSize",d),n(o),t(d)}},i=()=>s>=a?"All":s.toString();return e.jsxs("div",{className:"flex items-center text-background",children:[e.jsx("span",{className:"mr-3 text-sm md:text-md",children:"Show"}),e.jsxs(Le,{value:s>=a?"all":s.toString(),onValueChange:l,children:[e.jsx(Fe,{className:"w-[70px] bg-inherit border border-brand-end/50",children:e.jsx(Oe,{placeholder:i()})}),e.jsxs(Ae,{children:[[10,20,30,40,50].map(c=>e.jsx(ve,{value:c.toString(),children:c},c)),e.jsx("div",{className:"border-t border-brand-end/50 mt-2 pt-1",children:e.jsx(ve,{value:"all",children:"All"})})]})]}),e.jsx("span",{className:"ml-3 text-sm md:text-md",children:"entries"})]})},wm=({table:s})=>{const{getState:t,getCanPreviousPage:a,getCanNextPage:r,previousPage:n,nextPage:l,getFilteredRowModel:i}=s,{pageIndex:c,pageSize:o}=t().pagination,d=i().rows.length,x=c*o+1,p=Math.min((c+1)*o,d);return e.jsxs("div",{className:"mt-5 flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsx("div",{className:"text-sm text-gray-200",children:d>0?e.jsxs(e.Fragment,{children:["Showing ",e.jsx("span",{className:"text-accent",children:x})," to"," ",e.jsx("span",{className:"text-accent",children:p})," of ",d," entries"]}):"No entries to show"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{variant:"ghost",onClick:()=>n(),disabled:!a(),className:"border border-brand-end/50 text-background hover:bg-brand-dark/50",children:"Previous"}),e.jsx(O,{variant:"ghost",onClick:()=>l(),disabled:!r(),className:"border border-brand-end/50 text-background hover:bg-brand-dark/50",children:"Next"})]})]})},Cm=({title:s="Items",columnCount:t=5})=>e.jsxs("div",{className:"py-6 px-2",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"h-8 md:h-9 w-48 md:w-64"}),e.jsx(C,{className:"h-5 w-64 md:w-80 hidden md:block"})]}),e.jsx(C,{className:"h-8 w-32 rounded-md"})]}),e.jsx($,{className:"bg-brand-start border-brand-end/50",children:e.jsxs(M,{className:"p-5",children:[e.jsxs("div",{className:"flex flex-row justify-between items-center gap-4 md:gap-6 mb-10",children:[e.jsx(C,{className:"h-8 w-40"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(C,{className:"h-8 w-28 md:hidden rounded-md"}),e.jsx(C,{className:"hidden md:block h-10 w-[300px] rounded-md"})]})]}),e.jsx("div",{className:"overflow-x-auto scrollbar-none",children:e.jsxs("div",{className:"min-w-[640px]",children:[" ",e.jsx("div",{className:"border-b border-brand-end",children:e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(80px,1fr))] gap-4 py-4",children:Array(t).fill(0).map((a,r)=>e.jsx(C,{className:`h-6 ${r===t?"w-24":"w-full"}`},`header-${r}`))})}),Array(5).fill(0).map((a,r)=>e.jsx("div",{className:"border-b border-brand-end/30",children:e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(80px,1fr))] gap-4 py-4",children:Array(t).fill(0).map((n,l)=>e.jsx(C,{className:`h-5 ${l===t?"w-24":"w-full"}`},`cell-${r}-${l}`))})},`row-${r}`))]})}),e.jsxs("div",{className:"mt-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsx(C,{className:"h-5 w-48 md:w-64"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{className:"h-9 w-20 rounded-md"}),e.jsx(C,{className:"h-9 w-20 rounded-md"})]})]})]})})]}),Be=({title:s,description:t,addNewPath:a,addNewText:r,isLoading:n,error:l,data:i,columns:c,globalFilter:o,setGlobalFilter:d})=>{const x=ee(),[p,m]=g.useState(10);return n?e.jsx(Cm,{title:s}):l?e.jsx(je,{title:`Error Loading ${s}`,message:`There was a problem loading the ${s.toLowerCase()}. Please try again later.`}):i!=null&&i.length?e.jsxs(e.Fragment,{children:[e.jsx(le,{title:s}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-xl md:text-3xl font-bold text-background tracking-tight",children:[s," Management"]}),e.jsx("p",{className:"text-gray-200 hidden md:block text-md",children:t||`Manage your ${s.toLowerCase()}`})]}),a&&e.jsxs(O,{variant:"accent",onClick:()=>x(a),children:[e.jsx($l,{className:"w-5 h-5"}),r||`New ${s}`]})]}),e.jsx($,{className:"bg-brand-start border border-brand-end/50 shadow-none",children:e.jsxs(M,{className:"p-5",children:[e.jsxs("div",{className:"flex flex-row justify-between gap-6 mb-10",children:[e.jsx(vm,{value:p,onChange:m,totalEntries:(i==null?void 0:i.length)||0}),e.jsx(Nm,{value:o,onChange:d,placeholder:`Search ${s.toLowerCase()}...`})]}),e.jsx(ea,{data:i,columns:c,globalFilter:o,setGlobalFilter:d,pageSize:p,setPageSize:m,renderPagination:u=>p<(i==null?void 0:i.length)?e.jsx(wm,{table:u}):null})]})})]})]}):e.jsx(je,{title:`No ${s} Available`,message:`There are no ${s.toLowerCase()} to display. Please check back later or try refreshing the page.`})},Je=({handleEdit:s,handleDelete:t,handleImageUpload:a,isUploading:r,uploadingId:n,isDeleting:l,hasImageUpload:i=!1,customColumns:c=[]})=>[{header:"ID",accessorKey:"id",size:10},...c,{header:"Actions",size:10,cell:({row:d})=>e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[i&&e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"ghost",onClick:x=>{const p=x.currentTarget.nextElementSibling;p==null||p.click()},className:"text-purple-600 p-0 hover:bg-transparent hover:scale-110 transition-all duration-300",title:"Upload Image",disabled:r&&n===d.original._id,children:r&&n===d.original._id?e.jsx(ie,{size:18,className:"animate-spin"}):e.jsx(Kt,{size:18})}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:x=>{var p;(p=x.target.files)!=null&&p[0]&&a(d.original,x.target.files[0])},disabled:r})]}),e.jsx(O,{variant:"ghost",onClick:()=>s(d.original),className:"text-blue-600 p-0 hover:bg-transparent hover:scale-110 transition-all duration-300",title:`Edit ${d.original.name}`,children:e.jsx(fr,{size:18})}),e.jsx(Ct,{onConfirm:()=>t(d.original),title:`Delete ${d.original.name}`,itemToDelete:d.original.name,isLoading:l})]})}],km=(s,t,a,r)=>{const l=Je({handleEdit:s,handleDelete:t,isDeleting:r,hasImageUpload:!1,customColumns:[{header:"Product Name",accessorKey:"name",size:200},{header:"Color",accessorKey:"color",size:100},{header:"Item ID",accessorKey:"itemID",size:100},{header:"Price",accessorKey:"price",size:100},{header:"Collection",accessorKey:"collection",size:100},{header:"Stock",accessorKey:"stock",size:100},{header:"Status",accessorKey:"status",size:100,cell:({row:o})=>e.jsx("div",{className:"flex justify-center",children:e.jsx(In,{stock:o.original.stock,variant:"pill"})})}]}),i=l[l.length-1],c=i.cell;return i.cell=({row:o})=>e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx(O,{variant:"ghost",onClick:()=>a(o.original),className:"text-purple-600 p-0 hover:bg-transparent hover:scale-110 transition-all duration-300",title:"View Image Gallery",children:e.jsx(Kt,{size:18})}),c({row:o})]}),l},Sm=()=>{const{data:s,isLoading:t,error:a}=Rs(),[r,{isLoading:n}]=Di(),[l,i]=g.useState(""),c=ee(),o=u=>{c(`/admin/update-product/${u._id}`)},d=u=>{c(`/admin/product-gallery/${u._id}`)},x=async u=>{var h;try{const j=await r(u._id).unwrap();N.success(j.message||"Product deleted successfully")}catch(j){N.error(((h=j==null?void 0:j.data)==null?void 0:h.message)||"Failed to delete product")}},p=g.useMemo(()=>km(o,x,d,n),[o,x,d,n]),m=g.useMemo(()=>s!=null&&s.allProducts?[...s.allProducts].sort((u,h)=>new Date(h.createdAt)-new Date(u.createdAt)).map((u,h)=>{let j="N/A",y=null;return u.product_color&&typeof u.product_color=="object"?(j=u.product_color.name||"N/A",y=u.product_color.code||null):u.product_color&&(j=u.product_color),{id:h+1,_id:u._id,name:u.product_name,color:j,colorCode:y,itemID:u.itemID,price:u.price,collection:u.product_collection.map(v=>v.name).join(", ")||"N/A",stock:u.stock,status:u.is_active}}):[],[s]);return e.jsx(Be,{title:"Product",description:"Manage your product inventory",addNewPath:"/admin/new-product",isLoading:t,error:a,data:m,columns:p,globalFilter:l,setGlobalFilter:i})},_m=({onViewDetails:s})=>[{header:"ID",accessorKey:"id"},{header:"Customer",accessorKey:"user",cell:({row:t})=>{var a;return e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:((a=t.original.user)==null?void 0:a.name)||"N/A"})})}},{header:"Items",accessorKey:"totalItems",cell:({row:t})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:t.original.totalItems})})},{header:"Payment Method",accessorKey:"paymentInfo",cell:({row:t})=>{var a;return e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("span",{className:"font-medium",children:((a=t.original.paymentInfo)==null?void 0:a.method)||"N/A"})})}},{header:"Total",accessorKey:"totalPrice",cell:({row:t})=>{var a;return e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:"font-medium",children:["$",(a=t.original.totalPrice)==null?void 0:a.toFixed(2)]})})}},{header:"Order Status",accessorKey:"orderStatus",cell:({row:t})=>{const a={Pending:"warning",Processing:"info",Shipped:"category",Delivered:"success",Cancelled:"destructive","On Hold":"secondary","Pre-Order":"accent"};return e.jsx("div",{className:"flex justify-center gap-1",children:e.jsx(oe,{variant:a[t.original.orderStatus]||"default",children:t.original.orderStatus})})}},{header:"Date",accessorKey:"createdAt"},{header:"Actions",id:"actions",cell:({row:t})=>e.jsx("div",{className:"flex justify-center",children:e.jsx(O,{variant:"ghost",size:"icon",onClick:()=>s(t.original),className:"text-blue-600 p-0 hover:bg-transparent hover:scale-110 transition-all duration-300",children:e.jsx(Ml,{className:"h-5 w-5"})})})}],Pm=({orderItems:s})=>e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Os,{className:"w-6 h-6 text-blue-400"}),e.jsx("h3",{className:"text-xl font-bold text-background",children:"Order Items"})]})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-5",children:s==null?void 0:s.map((t,a)=>e.jsxs("div",{className:"flex items-start gap-3 border-b border-brand-end/50 pb-5 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"relative bg-brand-dark rounded-lg overflow-hidden",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-32 h-32 object-cover"}),t.price>t.discountedPrice&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsxs(oe,{className:"bg-accent text-foreground",children:[t.discount,"% OFF"]})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-1",children:[e.jsx("p",{className:"font-semibold text-md md:text-lg text-background line-clamp-1",children:t.name}),e.jsxs("p",{className:"hidden sm:block font-bold text-lg text-emerald-400",children:["$",(t.quantity*t.discountedPrice).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center mt-1 gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-300",children:["$",t.discountedPrice.toFixed(2)," each"]}),t.price>t.discountedPrice&&e.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["$",t.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex flex-col text-sm text-gray-300 space-y-1 mt-1",children:[t.color&&e.jsx("span",{children:t.color}),t.includes&&e.jsx("span",{className:"line-clamp-1",children:t.includes}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-start",children:[e.jsxs("span",{children:["Quantity: ",t.quantity]}),e.jsxs("span",{className:"sm:hidden font-bold text-emerald-400 text-lg",children:["$",(t.quantity*t.discountedPrice).toFixed(2)]})]})]})]})]},a))})})]}),Im=({shippingAddress:s,orderNotes:t,shippingInfo:a,orderStatus:r})=>{const n=[{section:[{label:"Contact Number",value:(s==null?void 0:s.contact_number)||"N/A"},{label:"Address",value:`${s==null?void 0:s.address_line1}${s!=null&&s.address_line2?`, ${s.address_line2}`:""}`}]},{section:[{label:"City & State",value:`${s==null?void 0:s.city}, ${s==null?void 0:s.state}`},{label:"Country",value:s==null?void 0:s.country}]},{section:[{label:"Postal Code",value:s==null?void 0:s.postal_code}]}],l=[{label:"Courier Service",value:a==null?void 0:a.courier,colSpan:1},{label:"Tracking Number",value:a==null?void 0:a.trackingNumber,colSpan:1},{label:"Track Package",value:a==null?void 0:a.trackingLink,colSpan:2,isLink:!0},{label:"Shipped On",value:a!=null&&a.shippedAt?Me(new Date(a.shippedAt),"PPP"):null,colSpan:1,icon:e.jsx(br,{className:"w-3 h-3"})},{label:"Additional Information",value:a==null?void 0:a.additionalInfo,colSpan:2,icon:e.jsx(Es,{className:"w-3 h-3"})}],i=({label:o,value:d})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:o}),e.jsx("p",{className:"font-medium mt-1 text-background",children:d})]},o),c=({label:o,value:d,colSpan:x,isLink:p,icon:m})=>d?e.jsxs("div",{className:`${x===2?"md:col-span-2":""}`,children:[e.jsxs("p",{className:"text-sm text-gray-300 flex items-center gap-1",children:[m,o]}),e.jsx("div",{className:"font-medium mt-1 text-background",children:p?e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline flex items-center gap-1",children:d}):d})]},o):null;return e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-6 h-6 text-green-500"}),e.jsx("h3",{className:"text-lg font-semibold text-background",children:"Shipping Details"})]})}),e.jsxs(M,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:n.map((o,d)=>e.jsx("div",{className:"space-y-5",children:o.section.map(i)},d))}),a&&(r==="Shipped"||r==="Delivered")&&e.jsxs("div",{className:"mt-5 border-t border-brand-end/50 pt-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ds,{className:"w-5 h-5 text-blue-400"}),e.jsx("h4",{className:"text-lg font-semibold text-background",children:"Tracking Information"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 pt-3",children:l.map(c)})]}),t&&e.jsx("div",{className:"mt-5 border-t border-brand-end/50 pt-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yr,{className:"w-4 h-4 text-accent"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Order Notes"})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(Nr,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-background leading-6",children:t})]})]})})]})]})},ka=({selectedStatus:s,setSelectedStatus:t,order:a,user:r,handleStatusUpdate:n,isLoading:l,shippingInfo:i,handleShippingInfoChange:c})=>{var o;return e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ul,{className:"w-6 h-6 text-blue-400"}),e.jsx("h3",{className:"text-xl font-bold text-background",children:"Order Status"})]})}),e.jsxs(M,{children:[e.jsxs(Le,{value:s||a.orderStatus,onValueChange:t,disabled:l||a.orderStatus==="Delivered"||a.orderStatus==="Cancelled"||!["admin","super_admin"].includes(r==null?void 0:r.role),children:[e.jsx(Fe,{className:"bg-background",children:e.jsx(Oe,{children:((o=ke.find(d=>d.value===(s||a.orderStatus)))==null?void 0:o.label)||a.orderStatus})}),e.jsx(Ae,{className:"bg-background",children:ke.filter(d=>zo(a.orderStatus,d.value)&&!(d.value==="Cancelled"&&["admin","super_admin"].includes(r==null?void 0:r.role))).map(d=>e.jsx(ve,{value:d.value,className:"text-foreground cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d.icon,{className:`w-4 h-4 ${d.color}`}),d.label]})},d.id))})]}),s==="Shipped"&&s!==a.orderStatus&&e.jsxs("div",{className:"space-y-5 pt-5",children:[e.jsx("h4",{className:"text-lg font-semibold text-background",children:"Shipping Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{htmlFor:"courier",className:"text-background",children:"Courier Service"}),e.jsx(Q,{id:"courier",placeholder:"Enter courier service name",value:i.courier,onChange:c,required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{htmlFor:"trackingNumber",className:"text-background",children:"Tracking Number"}),e.jsx(Q,{id:"trackingNumber",placeholder:"Enter tracking number",value:i.trackingNumber,onChange:c,required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{htmlFor:"trackingLink",className:"text-background",children:"Tracking Link"}),e.jsx(Q,{id:"trackingLink",placeholder:"Enter tracking link",value:i.trackingLink,onChange:c,required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{htmlFor:"additionalInfo",className:"text-background",children:"Additional Information (Optional)"}),e.jsx(Q,{id:"additionalInfo",placeholder:"Enter any additional shipping information",value:i.additionalInfo,onChange:c})]})]}),a.orderStatus==="Cancelled"&&e.jsxs("div",{className:"pt-5 space-y-3",children:[e.jsxs("div",{className:"text-red-400 font-medium",children:["Cancelled on"," ",a.cancelledAt?Me(new Date(a.cancelledAt),"PPP"):"N/A"]}),a.cancellationReason&&e.jsxs("div",{className:"text-sm text-gray-300",children:["Reason: ",a.cancellationReason]})]}),e.jsx("div",{className:"pt-3",children:e.jsx(O,{variant:"submit",className:"w-full",onClick:n,disabled:!s||s===a.orderStatus||l||!["admin","super_admin"].includes(r==null?void 0:r.role)||s==="Shipped"&&(!i.courier||!i.trackingNumber||!i.trackingLink),children:l?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Updating Status..."]}):"Update Status"})})]})]})},Dm=({user:s,email:t})=>e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-background",children:"Customer Details"})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Name"}),e.jsx("p",{className:"font-medium mt-1 text-background",children:(s==null?void 0:s.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Email"}),e.jsx("p",{className:"font-medium mt-1 text-background",children:t||"N/A"})]}),(s==null?void 0:s.contact_number)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Phone Number"}),e.jsx("p",{className:"font-medium mt-1 text-background",children:s.contact_number})]})]})})]}),Fm=({paymentInfo:s,shippingPrice:t,taxPrice:a,totalPrice:r})=>e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-background",children:"Payment Summary"})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Method"}),e.jsx("span",{className:"font-medium text-background",children:s==null?void 0:s.method})]}),(s==null?void 0:s.method)==="PayPal"&&e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Payer Email"}),e.jsx("span",{className:"text-sm text-background tracking-wide break-all",children:s==null?void 0:s.payerEmail})]}),e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Transaction ID"}),e.jsx("span",{className:"text-sm text-background tracking-wide font-mono",children:s==null?void 0:s.transactionId})]}),e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Status"}),e.jsx(oe,{variant:(s==null?void 0:s.status)==="Success"?"success":"destructive",children:s==null?void 0:s.status})]}),e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{className:"text-background",children:["$",t==null?void 0:t.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{className:"text-background",children:["$",a==null?void 0:a.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"text-background",children:["$",(r-(t+a)).toFixed(2)]})]}),e.jsx("div",{className:"border-t border-brand-end/50 pt-3",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{className:"text-background",children:"Total"}),e.jsxs("span",{className:"text-emerald-400",children:["$",r==null?void 0:r.toFixed(2)]})]})})]})})]}),Am=({isOpen:s,onClose:t,order:a})=>{const[r,n]=g.useState(""),[l,{isLoading:i}]=kd(),{user:c}=ae(u=>u.auth),[o,d]=g.useState({courier:"",trackingNumber:"",trackingLink:"",additionalInfo:""}),x=g.useMemo(()=>a!=null&&a.createdAt?Me(new Date(a.createdAt),"PPP"):"",[a==null?void 0:a.createdAt]);g.useEffect(()=>{a&&n(a.orderStatus)},[a]);const p=u=>{d({...o,[u.target.id]:u.target.value})},m=async()=>{var h;const u={orderStatus:r,...r==="Shipped"&&{shippingInfo:o}};if(!a||u.orderStatus===a.orderStatus){N.info("No changes made to order status");return}try{const j=await l({id:a._id,orderData:u}).unwrap();if(j.success)N.success(`Order status updated to ${u.orderStatus}`),t();else throw new Error(j.message||"Failed to update order status")}catch(j){console.error("Update error:",j),N.error(((h=j.data)==null?void 0:h.message)||"Failed to update order status"),n(a.orderStatus)}};return a?e.jsx(Ke,{open:s,onOpenChange:t,children:e.jsxs(qe,{className:"max-w-7xl",children:[e.jsx(Ve,{children:e.jsxs(ze,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1 text-sm font-medium text-gray-400",children:[e.jsx("span",{children:"Order ID"}),e.jsxs("p",{className:"text-sm md:text-lg font-bold text-background",children:["#",a._id]})]}),e.jsxs("div",{className:"space-y-1 text-sm font-medium text-gray-400",children:[e.jsx("span",{children:"Order Date"}),e.jsx("p",{className:"text-sm md:text-lg font-bold text-background",children:x})]})]})}),e.jsxs("div",{className:"relative grid grid-cols-1 lg:grid-cols-5 gap-5",children:[e.jsx("div",{className:"block lg:hidden",children:e.jsx(ka,{selectedStatus:r,setSelectedStatus:n,order:a,user:c,handleStatusUpdate:m,isLoading:i,shippingInfo:o,handleShippingInfoChange:p})}),e.jsxs("div",{className:"lg:col-span-3 space-y-5",children:[e.jsx(Pm,{orderItems:a.orderItems}),e.jsx(Im,{shippingAddress:a.shippingAddress,orderNotes:a.orderNotes,shippingInfo:a.shippingInfo,orderStatus:a.orderStatus})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"space-y-5 lg:sticky lg:top-3",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(ka,{selectedStatus:r,setSelectedStatus:n,order:a,user:c,handleStatusUpdate:m,isLoading:i,shippingInfo:o,handleShippingInfoChange:p})}),e.jsx(Dm,{user:a.user,email:a.email}),e.jsx(Fm,{paymentInfo:a.paymentInfo,shippingPrice:a.shippingPrice,taxPrice:a.taxPrice,totalPrice:a.totalPrice})]})})]})]})}):null},Tm=()=>{const{data:s,isLoading:t,error:a}=Cd(),[r,n]=g.useState(""),[l,i]=g.useState(null),[c,o]=g.useState(!1),d=m=>{i(m),o(!0)},x=g.useMemo(()=>_m({onViewDetails:d}),[]),p=g.useMemo(()=>s!=null&&s.data?[...s.data].sort((m,u)=>new Date(u.createdAt)-new Date(m.createdAt)).map((m,u)=>{var h;return{id:u+1,_id:m._id,user:m.user,email:m.email,totalItems:((h=m.orderItems)==null?void 0:h.length)||0,totalPrice:m.totalPrice,orderStatus:m.orderStatus,paymentInfo:m.paymentInfo,createdAt:new Date(m.createdAt).toLocaleString(),orderItems:m.orderItems,taxPrice:m.taxPrice,shippingPrice:m.shippingPrice,priority:m.priority,orderNotes:m.orderNotes,deliveredAt:m.deliveredAt,shippingAddress:m.shippingAddress,cancelledAt:m.cancelledAt,cancellationReason:m.cancellationReason,shippingInfo:m.shippingInfo}}):[],[s]);return e.jsxs(e.Fragment,{children:[e.jsx(Be,{title:"Order",description:"Manage customer orders",isLoading:t,error:a,data:p,columns:x,globalFilter:r,setGlobalFilter:n}),e.jsx(Am,{isOpen:c,onClose:()=>o(!1),order:l})]})},Em=(s,t,a)=>Je({handleEdit:s,handleDelete:t,isDeleting:a,hasImageUpload:!1,customColumns:[{header:"Name",accessorKey:"name",size:150,cell:({row:n})=>e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("span",{children:n.original.name}),n.original.isCurrentUser&&e.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(You)"})]})},{header:"Email",accessorKey:"email",size:100},{header:"Username",accessorKey:"username",size:100},{header:"Role",accessorKey:"role",size:100,cell:({row:n})=>{const l=n.original.role.charAt(0).toUpperCase()+n.original.role.slice(1);return e.jsx(oe,{variant:l==="Admin"?"purple":l==="Customer"?"info":l==="Seller"?"warning":l==="Employee"?"purple":"destructive",children:l})}},{header:"Status",accessorKey:"status",size:100,cell:({row:n})=>e.jsx(oe,{variant:n.original.isSuspended?"destructive":"success",children:n.original.isSuspended?"Suspended":"Active"})},{header:"Verified",accessorKey:"is_verified",size:100,cell:({row:n})=>e.jsx(oe,{variant:n.original.is_verified?"success":"secondary",children:n.original.is_verified?"Verified":"Unverified"})},{header:"Last Login",accessorKey:"last_login"}]}),Lm=()=>{const{data:s,isLoading:t,error:a}=Ec(),[r,{isLoading:n}]=Lc(),{user:l}=ae(u=>u.auth),[i,c]=g.useState(""),o=ee(),d=u=>{o(`/admin/update-user/${u._id}`)},x=async u=>{var h;try{const j=await r(u._id).unwrap();N.success(j.message||"User deleted successfully")}catch(j){N.error(((h=j==null?void 0:j.data)==null?void 0:h.message)||"Failed to delete user")}},p=g.useMemo(()=>Em(d,x,n),[d,x,n]),m=g.useMemo(()=>s!=null&&s.data?[...s.data].sort((u,h)=>u._id===(l==null?void 0:l._id)?-1:h._id===(l==null?void 0:l._id)?1:new Date(h.createdAt)-new Date(u.createdAt)).map((u,h)=>({id:h+1,_id:u._id,name:u.name,email:u.email,username:u.username,role:u.role,is_verified:u.is_verified,isSuspended:u.isSuspended,last_login:u.last_login?new Date(u.last_login).toLocaleString():"Never",createdAt:new Date(u.createdAt).toLocaleString(),updatedAt:u.updatedAt?new Date(u.updatedAt).toLocaleString():"Not Updated",contact_number:u.contact_number,isCurrentUser:u._id===(l==null?void 0:l._id)})):[],[s,l]);return e.jsx(Be,{title:"User",description:"Manage system users and their permissions",isLoading:t,error:a,data:m,columns:p,globalFilter:i,setGlobalFilter:c})},Om=()=>[{header:"ID",accessorKey:"id",cell:({row:s})=>e.jsxs("span",{className:"text-sm",children:["#",s.index+1]})},{header:"User",accessorKey:"userName",cell:({row:s})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.original.userName}),e.jsx("span",{className:"text-sm text-gray-400",children:s.original.userEmail})]})},{header:"Product",accessorKey:"productName"},{header:"Rating",accessorKey:"rating",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"w-4 h-4 fill-yellow-500 text-yellow-500"}),e.jsx("span",{children:s.original.rating})]})},{header:"Review",accessorKey:"reviewText",cell:({row:s})=>e.jsxs("div",{className:"max-w-md",children:[e.jsx("p",{className:"text-sm line-clamp-2",children:s.original.reviewText}),s.original.isEdited&&e.jsx("span",{className:"text-xs text-gray-400",children:"(edited)"})]})},{header:"Date",accessorKey:"createdAt",cell:({row:s})=>e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsx("span",{children:s.original.createdAt}),s.original.isEdited&&e.jsxs("span",{className:"text-xs text-gray-400",children:["Updated: ",s.original.updatedAt]})]})}],Rm=()=>{const{data:s,isLoading:t,error:a}=Id(),[r,n]=g.useState(""),l=g.useMemo(()=>Om(),[]),i=g.useMemo(()=>s!=null&&s.reviews?s.reviews.flatMap(c=>c.products.map((o,d)=>{var x,p,m,u,h;return{id:`${c._id}-${d}`,_id:c._id,userName:((x=c.user)==null?void 0:x.name)||"Unknown User",userEmail:((p=c.user)==null?void 0:p.email)||"N/A",productName:o.productName||"Unknown Product",rating:o.rating,reviewText:o.reviewText||o.editedReviewText||"No review text",helpfulVotes:((m=o.helpfulVotes)==null?void 0:m.length)||0,unhelpfulVotes:((u=o.unhelpfulVotes)==null?void 0:u.length)||0,replies:((h=o.replies)==null?void 0:h.length)||0,isEdited:o.isEdited||!1,createdAt:new Date(c.createdAt).toLocaleString(),updatedAt:c.updatedAt?new Date(c.updatedAt).toLocaleString():"Not Updated"}})):[],[s]);return e.jsx(Be,{title:"Review",description:"View and monitor product reviews",isLoading:t,error:a,data:i,columns:l,globalFilter:r,setGlobalFilter:n})},$m=()=>{const{collections:s,handleCollectionClick:t,isLoading:a}=kt(!1);return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Collections"}),e.jsx("section",{className:"p-5",children:e.jsx(ra,{collections:s,onCollectionClick:t,isInView:!0,isLoading:a,type:"collections"})})]})},Mm=s=>{const[t,a]=g.useState(null),r=Object.entries(yi).map(([l,i])=>({value:l,label:i.name,flag:i.emoji})),n={control:l=>({...l,borderRadius:"0.5rem",minHeight:"50px"}),menu:l=>({...l,padding:"4px"}),menuList:l=>({...l,maxHeight:"400px"}),option:(l,i)=>({...l,cursor:"pointer",padding:"10px 12px",marginBottom:"4px",borderRadius:"0.375rem",backgroundColor:i.isSelected?"#facc15":i.isFocused?"#e5e7eb":"transparent",color:"black"})};return g.useEffect(()=>{fetch("https://ipapi.co/json/").then(l=>l.json()).then(l=>{const i=l.country_code,c=r.find(o=>o.value===i);c&&(a(c),s(c.label))}).catch(l=>console.error("Error fetching location:",l))},[]),{userCountry:t,setUserCountry:a,countryOptions:r,customStyles:n}},Um=({isEdit:s,editAddress:t,userName:a})=>{const[r,n]=g.useState({name:"",contact_number:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"",is_default:!1,full_name:a}),[l,i]=g.useState(!1),[c,{isLoading:o}]=Tc(),[d,{isLoading:x}]=zr(),{refetch:p}=Jt(),{userCountry:m,setUserCountry:u,countryOptions:h,customStyles:j}=Mm(w=>y("country",w));g.useEffect(()=>{l&&s&&t&&n({...t,full_name:t.full_name||a})},[l,s,t,a]);const y=(w,k)=>{n(b=>({...b,[w]:k}))},v=w=>{const k={contact_number:"Phone number",address_line1:"Street address",city:"City",state:"State/Province",postal_code:"Postal code",country:"Country"},b=[];for(const[S,_]of Object.entries(k))(!w[S]||w[S].trim()==="")&&b.push(_);return w.contact_number&&!/^\+?[1-9]\d{1,14}$/.test(w.contact_number)?{isValid:!1,error:"Please enter a valid phone number (e.g., +1234567890)"}:w.postal_code&&!/^[A-Z0-9]{3,10}$/i.test(w.postal_code)?{isValid:!1,error:"Please enter a valid postal code (3-10 characters, letters and numbers only)"}:b.length>0?{isValid:!1,error:`Please fill in the following required fields:
${b.join(`
 `)}`}:{isValid:!0}};return{formData:r,handleFieldChange:y,handleSubmit:async w=>{var k;w.preventDefault();try{const b={...r,name:r.name||"Home"},S=v(b);if(!S.isValid){N.error(S.error||"Invalid form data");return}const _=s?await d({id:t._id,addressData:b}).unwrap():await c(b).unwrap();N.success(_.message||"Address added successfully"),await p(),i(!1),n({name:"",contact_number:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"",is_default:!1,full_name:a})}catch(b){N.error(((k=b.data)==null?void 0:k.message)||`Failed to ${s?"update":"add"} address`)}},open:l,setOpen:i,isCreating:o,isUpdating:x,userCountry:m,setUserCountry:u,countryOptions:h,customStyles:j}},et=({isEdit:s=!1,editAddress:t=null,userName:a=""})=>{const{formData:r,handleFieldChange:n,handleSubmit:l,open:i,setOpen:c,isCreating:o,isUpdating:d,userCountry:x,setUserCountry:p,countryOptions:m,customStyles:u,formatOptionLabel:h}=Um({isEdit:s,editAddress:t,userName:a}),j=[{id:"name",label:"Address Label",placeholder:"Home, Work, etc.",type:"text"},{id:"contact_number",label:"Phone Number",placeholder:"Enter Phone Number",type:"tel"}],y=[{id:"address_line1",label:"Street Address",placeholder:"Enter Street Address",type:"text"},{id:"address_line2",label:"Apartment, suite, etc. (optional)",placeholder:"Enter Apartment, suite, etc.",type:"text"}],v=[{id:"city",label:"City",placeholder:"Enter City",type:"text"},{id:"state",label:"State/Province",placeholder:"Enter State/Province",type:"text"},{id:"postal_code",label:"Postal Code",placeholder:"Enter Postal Code",type:"text"}];return e.jsxs(Ke,{open:i,onOpenChange:c,children:[e.jsxs(fn,{className:`flex items-center gap-2 text-background hover:text-background/80 ${s?"opacity-0 group-hover:opacity-100":""}`,children:[s?e.jsx(Wa,{className:"w-4 h-4 text-blue-500 hover:scale-110 transition-all duration-300"}):e.jsx(gs,{className:"w-4 h-4"}),e.jsx("span",{children:s?"":"Add Address"})]}),e.jsx(ns,{className:"sr-only",children:s?"Edit Address":"Add a New Address"}),e.jsxs(qe,{className:"max-w-3xl",children:[e.jsx(Ve,{children:e.jsx(ze,{children:s?"Edit address":"Add a new address"})}),e.jsx("form",{onSubmit:l,children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-background",children:"Country"}),e.jsx(ql,{options:m,value:x,onChange:f=>{p(f),n("country",f.label)},styles:u,placeholder:"Select Country",formatOptionLabel:h,required:!0})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(({id:f,label:w,placeholder:k,type:b})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:f,className:"text-background",children:w}),e.jsx(Q,{id:f,type:b,value:r[f],onChange:S=>n(f,S.target.value),placeholder:k,required:!0})]},f))}),y.map(({id:f,label:w,placeholder:k,type:b})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:f,className:"text-background",children:w}),e.jsx(Q,{id:f,type:b,value:r[f],onChange:S=>n(f,S.target.value),placeholder:k,required:f==="address_line1"})]},f)),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:v.map(({id:f,label:w,placeholder:k,type:b})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:f,className:"text-background",children:w}),e.jsx(Q,{id:f,type:b,value:r[f],onChange:S=>n(f,S.target.value),placeholder:k,required:!0})]},f))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{id:"is_default",checked:r.is_default,onCheckedChange:f=>n("is_default",f),className:"border-white"}),e.jsx(R,{htmlFor:"is_default",className:"text-background",children:"Set as default address"})]}),e.jsxs(O,{variant:"submit",type:"submit",className:"w-full",disabled:o||d,children:[(o||d)&&e.jsx(ie,{className:"h-4 w-4 animate-spin"}),s?d?"Updating address...":"Update address":o?"Adding address...":"Add address"]})]})})]})]})},qm=({user:s,handleImageUpload:t,fileInputRef:a,isUploading:r,addresses:n,phoneNumber:l,setPhoneNumber:i,phoneError:c,setPhoneError:o,isPhoneDialogOpen:d,setIsPhoneDialogOpen:x,handlePhoneUpdate:p,isUpdating:m,handleDeleteClick:u,handleDeleteConfirm:h,isDeleteDialogOpen:j,setIsDeleteDialogOpen:y,isDeleting:v,AddressDetails:f,name:w,setName:k,nameError:b,setNameError:S,isNameDialogOpen:_,setIsNameDialogOpen:P,handleNameUpdate:D})=>{var B,X,V;return e.jsxs($,{className:"bg-brand-dark/50 border-none overflow-hidden",children:[e.jsx("div",{className:"h-32 bg-gradient-to-r from-blue-600 via-purple-600 to-violet-600"}),e.jsxs(M,{className:"relative p-0 -mt-16",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-32 h-32 rounded-full ring-4 ring-accent bg-accent flex items-center justify-center overflow-hidden",children:(B=s==null?void 0:s.profile_picture)!=null&&B.url?e.jsx("img",{src:s.profile_picture.url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-5xl text-foreground font-semibold",children:(V=(X=s==null?void 0:s.name)==null?void 0:X[0])==null?void 0:V.toUpperCase()})}),e.jsx("button",{onClick:()=>{var z;return(z=a.current)==null?void 0:z.click()},disabled:r,className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-all duration-200 rounded-full",children:r?e.jsx(ie,{className:"w-6 h-6 text-white animate-spin"}):e.jsx(Ht,{className:"w-6 h-6 text-white"})}),e.jsx("input",{type:"file",ref:a,onChange:t,accept:"image/*",className:"hidden"})]}),e.jsxs("div",{className:"text-center mt-5 space-y-1",children:[e.jsxs("div",{className:"group relative inline-block",children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:s==null?void 0:s.name}),e.jsx("button",{onClick:()=>{k((s==null?void 0:s.name)||""),P(!0)},className:"absolute -right-6 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx(da,{className:"w-4 h-4 text-blue-500"})})]}),e.jsx("p",{className:"text-sm text-gray-400",children:s==null?void 0:s.email}),e.jsxs("div",{className:"flex items-center justify-center gap-2 py-3",children:[(s==null?void 0:s.is_verified)&&e.jsxs(oe,{variant:"success",className:"flex items-center gap-1.5 text-sm",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{children:"Verified Account"})]}),e.jsx(oe,{variant:"info",className:"capitalize text-sm",children:s==null?void 0:s.role})]})]})]}),e.jsxs("div",{className:"space-y-3 p-5",children:[e.jsx("div",{className:"bg-brand-dark/50 rounded-md border border-brand-end/50 p-5",children:e.jsxs("div",{className:"group flex items-center justify-between",children:[e.jsxs("d",{iv:!0,className:"flex items-start gap-3",children:[e.jsx(qt,{className:"w-5 h-5 text-accent"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-md text-gray-400",children:"Phone Number"}),e.jsx("p",{className:"text-white mt-1 text-sm",children:(s==null?void 0:s.contact_number)||"No phone number added"})]})]}),e.jsx("button",{onClick:()=>{i((s==null?void 0:s.contact_number)||""),x(!0)},className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx(da,{className:"w-4 h-4 text-blue-500"})})]})}),e.jsxs("div",{className:"bg-brand-dark/50 rounded-md border border-brand-end/50 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:" bg-darkBrand/70 rounded-lg",children:e.jsx(Rt,{className:"w-5 h-5 text-blue-500"})}),e.jsx("div",{children:e.jsx("p",{className:"text-md text-gray-400",children:" Addresses"})})]}),e.jsx(et,{userName:s==null?void 0:s.name,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm",buttonText:"Add Addresses"})]}),e.jsx("div",{className:"space-y-3 mt-4",children:(n==null?void 0:n.length)>0?n.map(z=>e.jsx("div",{className:`group relative rounded-lg transition-all duration-200 cursor-pointer p-4 ${z.is_default?"bg-darkBrand/20 border border-blue-500/50":"hover:bg-darkBrand/30 border border-transparent hover:border-white/5"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium capitalize text-white",children:z.name||"Other"}),z.is_default&&e.jsx(oe,{variant:"info",className:"text-xs",children:"Default"})]}),e.jsx(f,{addr:z})]}),e.jsxs("div",{className:"absolute right-4 top-6 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center gap-2",children:[e.jsx(et,{isEdit:!0,editAddress:z,userName:s==null?void 0:s.name,className:"p-1.5 rounded-lg hover:bg-gray-600/50"}),e.jsx(Ct,{onConfirm:()=>h(z._id),title:"Delete Address",itemToDelete:z.name||"this address",isLoading:v})]})]})},z._id)):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Rt,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No addresses added yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add your first delivery address"})]})})]})]}),e.jsx(Ke,{open:d,onOpenChange:x,children:e.jsxs(qe,{className:"bg-brand-start border-none",children:[e.jsx(Ve,{children:e.jsx(ze,{className:"text-white",children:"Update Phone Number"})}),e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{children:[e.jsx(Q,{type:"tel",placeholder:"Enter phone number",value:l,onChange:z=>{i(z.target.value),o("")}}),c&&e.jsx("p",{className:"text-sm text-red-400",children:c})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(O,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsxs(O,{onClick:p,disabled:m,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[m?e.jsx(ie,{className:"w-4 h-4 animate-spin mr-2"}):null,"Save"]})]})]})]})}),e.jsx(Ke,{open:_,onOpenChange:P,children:e.jsxs(qe,{className:"bg-brand-start border-none",children:[e.jsx(Ve,{children:e.jsx(ze,{className:"text-white",children:"Update Name"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{type:"text",placeholder:"Enter your name",value:w,onChange:z=>{k(z.target.value),S("")}}),b&&e.jsx("p",{className:"text-sm text-red-400",children:b})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(O,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsxs(O,{onClick:D,disabled:m,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[m?e.jsx(ie,{className:"w-4 h-4 animate-spin mr-2"}):null,"Save"]})]})]})]})})]})]})},Vm=({stats:s})=>{const t=ee(),a=[{icon:e.jsx(Ta,{className:"w-5 h-5 text-purple-400"}),label:"Orders",value:s.totalOrders,bgColor:"bg-purple-500/10",textColor:"text-purple-400",onClick:()=>s.totalOrders>0&&t("/my-orders?status=all"),isClickable:s.totalOrders>0},{icon:e.jsx(Ie,{className:"w-5 h-5 text-blue-400"}),label:"Cart Items",value:s.cartItems,bgColor:"bg-blue-500/10",textColor:"text-blue-400",isClickable:s.cartItems>0,isCartTrigger:!0},{icon:e.jsx(is,{className:"w-5 h-5 text-yellow-400"}),label:"Reviews",value:s.reviewsGiven,bgColor:"bg-yellow-500/10",textColor:"text-yellow-400",onClick:()=>s.reviewsGiven>0&&t("/my-orders?status=To%20Review&reviewTab=history"),isClickable:s.reviewsGiven>0},{icon:e.jsx(nr,{className:"w-5 h-5 text-green-400"}),label:"Total Spend",value:`$${s.totalSpend.toFixed(2)}`,bgColor:"bg-green-500/10",textColor:"text-green-400",isClickable:!1}];return e.jsx($,{className:"bg-brand-dark/50 border-none",children:e.jsx(M,{className:"p-5",children:a.map((r,n)=>{const l=e.jsxs("div",{className:`flex justify-between items-center p-4 rounded-lg transition-all duration-300 ${r.isClickable?"hover:bg-brand-dark/50 cursor-pointer hover:border-brand-end/50":"cursor-default"} border border-transparent`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${r.bgColor}`,children:r.icon}),e.jsx("span",{className:"text-gray-200 font-medium",children:r.label})]}),e.jsx("span",{className:`text-2xl font-bold ${r.textColor}`,children:r.value})]});return e.jsx("div",{children:r.isCartTrigger?e.jsxs(bs,{children:[e.jsx(ys,{asChild:!0,children:l}),e.jsx(yt,{})]}):e.jsx("div",{onClick:r.onClick,children:l})},n)})})})},zm=({user:s,addresses:t,orders:a})=>{var i,c,o;const r=[{task:"Add phone number",completed:!!(s!=null&&s.contact_number),description:"Add your contact number for delivery updates"},{task:"Add profile picture",completed:!!((i=s==null?void 0:s.profile_picture)!=null&&i.url),description:"Upload a profile picture to personalize your account"},{task:"Add shipping address",completed:!!(t!=null&&t.length),description:"Add at least one shipping address"},{task:"Make your first purchase",completed:!!((c=a==null?void 0:a.data)!=null&&c.length),description:"Complete your first order with us"},{task:"Write a review",completed:(o=a==null?void 0:a.data)==null?void 0:o.some(d=>d.isReviewed),description:"Share your experience by reviewing a purchase"}],n=r.filter(d=>d.completed),l=n.length/r.length*100;return e.jsx($,{className:"bg-brand-dark/50 border-none",children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Complete Your Profile"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l===100?"All tasks completed!":`${r.length-n.length} tasks remaining`})]}),e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-md font-bold text-accent",children:[Math.round(l),"%"]})}),e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"32",cy:"32",r:"28",stroke:"currentColor",strokeWidth:"4",fill:"none",className:"text-gray-800"}),e.jsx("circle",{cx:"32",cy:"32",r:"28",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeDasharray:175.93,strokeDashoffset:175.93-l/100*175.93,className:`transition-all duration-500 ${l===100?"text-green-400":"text-blue-400"}`})]})]})]}),e.jsx("div",{className:"space-y-3 mt-6",children:r.map((d,x)=>e.jsx("div",{className:`group flex items-center justify-between p-4 rounded-lg transition-all duration-300 ${d.completed?"bg-brand-dark/50 border border-brand-end/50":"bg-brand-end/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-1.5 rounded-full flex-shrink-0 ${d.completed?"bg-accent":"bg-brand-dark"}`,children:d.completed?e.jsx(Ot,{className:"w-4 h-4 text-foreground"}):e.jsx(Bt,{className:"w-4 h-4 text-accent"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${d.completed?"text-accent":"text-white"}`,children:d.task}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:d.description})]})]})},x))}),l===100&&e.jsx("div",{className:"mt-6 p-4 bg-brand-dark/50 rounded-lg border border-brand-end/50",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5 text-accent"}),e.jsx("p",{className:"text-emerald-400 text-sm font-medium",children:"Profile completed! You're all set!"})]})})]})})},Bm=()=>{var ye,Pe,we,Ce,Re,We,E;const{data:s,isLoading:t,error:a}=Nt(),{data:r}=Jt(),{data:n}=vn(),{cartItems:l}=ae(F=>F.cart),i=g.useRef(null),[c,{isLoading:o}]=$c(),[d,{isLoading:x}]=Mc(),[p,m]=g.useState(!1),[u,h]=g.useState(""),[j,y]=g.useState(""),[v,{isLoading:f}]=Br(),[w,k]=g.useState(!1),[b,S]=g.useState(null),[_,P]=g.useState(""),[D,B]=g.useState(""),[X,V]=g.useState(!1),{handleImageUpload:z,isUploading:G}=Is({maxSizeMB:1,maxWidthOrHeight:800,maxFileSize:2*1024*1024,onSuccess:async F=>{var A;try{await c({avatar:F}).unwrap(),N.success("Profile picture updated successfully")}catch(W){N.error(((A=W==null?void 0:W.data)==null?void 0:A.message)||"Failed to update profile picture")}}}),se=G||o,de=F=>{z(F)},fe=async()=>{var A;if(!/^\+?[1-9]\d{1,14}$/.test(u)){y("Please enter a valid phone number");return}try{await d({contact_number:u}).unwrap(),N.success("Phone number updated successfully"),m(!1),h(""),y("")}catch(W){N.error(((A=W.data)==null?void 0:A.message)||"Failed to update phone number")}},he=F=>{S(F),k(!0)},I=async()=>{var F;try{await v(b).unwrap(),N.success("Address deleted successfully"),k(!1),S(null)}catch(A){N.error(((F=A.data)==null?void 0:F.message)||"Failed to delete address")}},U=F=>F?[F.address_line1,F.address_line2,F.city,F.state,F.postal_code,F.country].filter(Boolean).join(", "):"No address added",Y={totalOrders:((ye=n==null?void 0:n.data)==null?void 0:ye.length)||0,cartItems:l.length,reviewsGiven:((we=(Pe=n==null?void 0:n.data)==null?void 0:Pe.filter(F=>F.isReviewed))==null?void 0:we.length)||0,totalSpend:((Ce=n==null?void 0:n.data)==null?void 0:Ce.reduce((F,A)=>F+A.totalPrice,0))||0},te=[{task:"Add profile picture",completed:!!((Re=s==null?void 0:s.profile_picture)!=null&&Re.url)},{task:"Add phone number",completed:!!(s!=null&&s.contact_number)},{task:"Add shipping address",completed:!!(r!=null&&r.length)},{task:"Make your first purchase",completed:!!((We=n==null?void 0:n.data)!=null&&We.length)},{task:"Write a review",completed:(E=n==null?void 0:n.data)==null?void 0:E.some(F=>F.isReviewed)}];return{user:s,isUserLoading:t,userError:a,addresses:r,orders:n,stats:Y,profileTasks:te,handleImageUpload:de,fileInputRef:i,isUploading:se,phoneNumber:u,setPhoneNumber:h,phoneError:j,setPhoneError:y,isPhoneDialogOpen:p,setIsPhoneDialogOpen:m,handlePhoneUpdate:fe,isUpdating:x,formatAddress:U,handleDeleteClick:he,handleDeleteConfirm:I,isDeleteDialogOpen:w,setIsDeleteDialogOpen:k,selectedAddressId:b,isDeleting:f,formatDate:F=>Ni(new Date(F),{addSuffix:!0}),getActivityDetails:(F,A)=>{switch(F){case"order":return{color:A==="Delivered"?"text-green-400 bg-green-500/10":A==="Processing"?"text-blue-400 bg-blue-500/10":A==="Cancelled"?"text-red-400 bg-red-500/10":"text-purple-400 bg-purple-500/10",statusColor:A==="Delivered"?"text-green-400":A==="Processing"?"text-blue-400":A==="Cancelled"?"text-red-400":"text-purple-400"};case"review":return{color:"text-yellow-400 bg-yellow-500/10",statusColor:"text-yellow-400"};default:return{color:"text-gray-400 bg-gray-500/10",statusColor:"text-gray-400"}}},generateActivities:()=>{if(!(n!=null&&n.data))return[];const F=[];return n.data.forEach(A=>{F.push({type:"order",title:`Order ${A.orderStatus}`,description:`Order #${A._id.slice(-8)} - ${A.orderItems.length} item${A.orderItems.length>1?"s":""}`,status:A.orderStatus,date:A.createdAt,amount:A.totalPrice}),A.isReviewed&&F.push({type:"review",title:"Review Posted",description:`Reviewed order #${A._id.slice(-8)}`,date:A.updatedAt})}),F.sort((A,W)=>new Date(W.date)-new Date(A.date))},name:_,setName:P,nameError:D,setNameError:B,isNameDialogOpen:X,setIsNameDialogOpen:V,handleNameUpdate:async()=>{var F;if(!_.trim()){B("Name cannot be empty");return}if(_.trim().length<2){B("Name must be at least 2 characters long");return}try{await d({name:_.trim()}).unwrap(),N.success("Name updated successfully"),V(!1),P(""),B("")}catch(A){N.error(((F=A.data)==null?void 0:F.message)||"Failed to update name")}}}},Wm=()=>{const{user:s,handleImageUpload:t,fileInputRef:a,isUploading:r,stats:n,addresses:l,orders:i,phoneNumber:c,setPhoneNumber:o,phoneError:d,setPhoneError:x,isPhoneDialogOpen:p,setIsPhoneDialogOpen:m,handlePhoneUpdate:u,isUpdating:h,formatAddress:j,handleDeleteClick:y,handleDeleteConfirm:v,isDeleteDialogOpen:f,setIsDeleteDialogOpen:w,selectedAddressId:k,isDeleting:b,name:S,setName:_,nameError:P,setNameError:D,isNameDialogOpen:B,setIsNameDialogOpen:X,handleNameUpdate:V}=Bm(),z=({addr:G})=>e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"text-blue-400 text-sm font-medium whitespace-nowrap mt-1",children:G.contact_number}),e.jsx("span",{className:"text-gray-500 mt-0.5",children:""}),e.jsx("span",{className:"text-gray-300 text-sm leading-loose",children:j(G)})]})});return e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-5",children:[e.jsxs("div",{className:"space-y-5 lg:col-span-2",children:[e.jsx(qm,{user:s,handleImageUpload:t,fileInputRef:a,isUploading:r,addresses:l,phoneNumber:c,setPhoneNumber:o,phoneError:d,setPhoneError:x,isPhoneDialogOpen:p,setIsPhoneDialogOpen:m,handlePhoneUpdate:u,isUpdating:h,handleDeleteClick:y,handleDeleteConfirm:v,isDeleteDialogOpen:f,setIsDeleteDialogOpen:w,selectedAddressId:k,isDeleting:b,AddressDetails:z,name:S,setName:_,nameError:P,setNameError:D,isNameDialogOpen:B,setIsNameDialogOpen:X,handleNameUpdate:V}),e.jsx(Vm,{stats:n})]}),e.jsx("div",{className:"lg:col-span-3 space-y-5 lg:sticky lg:top-24 h-fit",children:e.jsx(zm,{user:s,addresses:l,orders:i})})]})})},Hm=()=>{const[s,t]=g.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[a,{isLoading:r}]=Uc(),n=[{label:"Current Password",name:"oldPassword",placeholder:"Enter your current password",type:"password",value:s.oldPassword},{label:"New Password",name:"newPassword",placeholder:"Enter your new password",type:"password",value:s.newPassword},{label:"Confirm New Password",name:"confirmPassword",placeholder:"Confirm your new password",type:"password",value:s.confirmPassword}],l=c=>{const{name:o,value:d}=c.target;t(x=>({...x,[o]:d}))},i=async c=>{var o;c.preventDefault();try{const d=await a(s).unwrap();N.success((d==null?void 0:d.message)||"Password updated successfully"),t({oldPassword:"",newPassword:"",confirmPassword:""})}catch(d){N.error(((o=d==null?void 0:d.data)==null?void 0:o.message)||"Failed to update password")}};return e.jsx("div",{className:"px-3 py-10 md:py-7",children:e.jsx("div",{className:"container mx-auto max-w-xl",children:e.jsx(T.div,{...ce.formContainerVariants,className:"w-full px-5 py-10 border border-brand-end/50 rounded-2xl",children:e.jsxs("div",{children:[e.jsxs(T.div,{className:"mb-8",children:[e.jsx(T.div,{className:"flex items-center gap-2",children:e.jsx(T.h1,{className:"text-3xl md:text-4xl font-bold",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Change Password"})}),e.jsx(T.p,{className:"text-gray-400 text-sm mt-3 leading-5",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Update your password to keep your account secure. Your new password must be at least 6 characters and include at least one letter, one number, and one special character."})]}),e.jsxs("form",{onSubmit:i,className:"space-y-5",children:[n.map((c,o)=>e.jsxs(T.div,{...ce.inputVariants,transition:ce.getInputTransition(o),className:"space-y-2",children:[e.jsx(R,{className:"text-background",children:c.label}),e.jsx(Q,{type:c.type,name:c.name,value:c.value,onChange:l,placeholder:c.placeholder,required:!0})]},c.name)),e.jsx(T.div,{...ce.buttonVariants,className:"pt-2",children:e.jsx(O,{type:"submit",variant:"submit",size:"lg",className:"w-full",disabled:r,children:e.jsx("span",{className:"relative z-10 flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):"Update Password"})})})]})]})})})})},Gm=s=>{const t=ee(),{user:a}=ae(y=>y.auth),[r,n]=g.useState({name:"",price:"",discount:"",stock:"",itemID:"",partID:"",description1:"",description2:"",description3:"",specifications:[{name:"length",value:""},{name:"width",value:""},{name:"height",value:""},{name:"piece_count",value:""}],manufacturer:"",seller:"",tags:"",productCategories:[],productCollections:[],productSubCollections:[],productIncludes:[],skillLevel:"",productDesigner:"",isActive:!1,availability:null,preorder:!1,preorderDate:null,productColors:[]}),{data:l,isLoading:i,isError:c,error:o}=pt(s),[d,{isLoading:x,isError:p,error:m}]=Pi();return g.useEffect(()=>{var y,v,f,w,k,b,S,_,P,D,B,X,V,z,G,se,de,fe,he,I,U,Y,te,pe,be,ue,xe,ye,Pe,we,Ce,Re,We,E,F,A,W,ne,L,q;c&&N.error(((y=o==null?void 0:o.data)==null?void 0:y.message)||"Failed to fetch product details."),l&&n({name:((v=l==null?void 0:l.product)==null?void 0:v.product_name)||"",price:((f=l==null?void 0:l.product)==null?void 0:f.price)||"",discount:((w=l==null?void 0:l.product)==null?void 0:w.discount)||"",stock:((k=l==null?void 0:l.product)==null?void 0:k.stock)||"",itemID:((b=l==null?void 0:l.product)==null?void 0:b.itemID)||"",partID:((S=l==null?void 0:l.product)==null?void 0:S.partID)||"",description1:((_=l==null?void 0:l.product)==null?void 0:_.product_description_1)||"",description2:((P=l==null?void 0:l.product)==null?void 0:P.product_description_2)||"",description3:((D=l==null?void 0:l.product)==null?void 0:D.product_description_3)||"",specifications:[{name:"length",value:((B=l==null?void 0:l.product)==null?void 0:B.product_length)||"0"},{name:"width",value:((X=l==null?void 0:l.product)==null?void 0:X.product_width)||"0"},{name:"height",value:((V=l==null?void 0:l.product)==null?void 0:V.product_height)||"0"},{name:"piece_count",value:((z=l==null?void 0:l.product)==null?void 0:z.product_piece_count)||"1"}],manufacturer:((G=l==null?void 0:l.product)==null?void 0:G.manufacturer)||"",seller:((se=l==null?void 0:l.product)==null?void 0:se.seller)||"",tags:((fe=(de=l==null?void 0:l.product)==null?void 0:de.tags)==null?void 0:fe.join(", "))||"",productCategories:((I=(he=l==null?void 0:l.product)==null?void 0:he.product_category)==null?void 0:I.reduce((J,Ne)=>(J.push(Ne._id),J),[]))||[],productCollections:((Y=(U=l==null?void 0:l.product)==null?void 0:U.product_collection)==null?void 0:Y.map(J=>J._id))||[],productSubCollections:((pe=(te=l==null?void 0:l.product)==null?void 0:te.product_sub_collections)==null?void 0:pe.map(J=>J._id))||[],productIncludes:((ue=(be=l==null?void 0:l.product)==null?void 0:be.product_includes)==null?void 0:ue.split(", "))||[],skillLevel:((ye=(xe=l==null?void 0:l.product)==null?void 0:xe.product_skill_level)==null?void 0:ye._id)||"",productDesigner:((we=(Pe=l==null?void 0:l.product)==null?void 0:Pe.product_designer)==null?void 0:we._id)||"",isActive:((Ce=l==null?void 0:l.product)==null?void 0:Ce.is_active)||!1,availability:((Re=l==null?void 0:l.product)==null?void 0:Re.product_availability)||"In Stock",preorder:((We=l==null?void 0:l.product)==null?void 0:We.is_preorder)||!1,preorderDate:(E=l==null?void 0:l.product)!=null&&E.preorder_date?new Date((F=l==null?void 0:l.product)==null?void 0:F.preorder_date):null,productColors:(A=l==null?void 0:l.product)!=null&&A.product_color?[l.product.product_color._id]:[],productCategory:((ne=(W=l==null?void 0:l.product)==null?void 0:W.product_category)==null?void 0:ne.map(J=>J._id))||[],productSubCategories:((q=(L=l==null?void 0:l.product)==null?void 0:L.product_sub_categories)==null?void 0:q.map(J=>J._id))||[]})},[c,o,l]),g.useEffect(()=>{var y;m&&N.error(((y=m==null?void 0:m.data)==null?void 0:y.message)||"Failed to update product")},[m]),{formData:r,isLoading:i,handleChange:y=>{const{name:v,value:f,type:w}=y.target;["length","width","height","piece_count"].includes(v)?n(k=>({...k,specifications:k.specifications.map(b=>b.name===v?{...b,value:f}:b)})):n(w==="radio"?k=>({...k,[v]:f}):k=>({...k,[v]:f}))},handleCheckboxChange:(y,v,f)=>{n(w=>Array.isArray(w[y])?{...w,[y]:f?[...w[y],v]:w[y].filter(k=>k!==v)}:{...w,[y]:f})},handleSubmit:async y=>{var f,w,k,b,S;if(y.preventDefault(),!r.name){N.error("Product name is required");return}if(!r.productColors||r.productColors.length===0){N.error("Please select a color for the product");return}const v={product_name:r.name,itemID:r.itemID,partID:r.partID,price:parseFloat(r.price)||0,discount:parseFloat(r.discount)||0,stock:parseInt(r.stock,10)||0,product_description_1:r.description1,product_description_2:r.description2||"",product_description_3:r.description3||"",product_category:r.productCategory,product_sub_categories:r.productSubCategories.filter(_=>typeof _=="string"&&/^[0-9a-fA-F]{24}$/.test(_)),product_collection:r.productCollections,product_sub_collections:r.productSubCollections.filter(_=>typeof _=="string"&&/^[0-9a-fA-F]{24}$/.test(_)),product_piece_count:parseInt(((f=r.specifications.find(_=>_.name==="piece_count"))==null?void 0:f.value)||0,10),product_availability:r.availability==="In Stock"?null:r.preorder_availability_date||new Date().toISOString().split("T")[0],product_length:parseFloat(((w=r.specifications.find(_=>_.name==="length"))==null?void 0:w.value)||0),product_width:parseFloat(((k=r.specifications.find(_=>_.name==="width"))==null?void 0:k.value)||0),product_height:parseFloat(((b=r.specifications.find(_=>_.name==="height"))==null?void 0:b.value)||0),product_includes:r.productIncludes.join(", "),product_skill_level:r.skillLevel||null,product_designer:r.productDesigner||null,ratings:0,seller:r.seller||"Brick Extreme",tags:r.tags.split(",").map(_=>_.trim())||[],is_active:r.isActive,manufacturer:r.manufacturer||"Unknown",is_preorder:r.preorder,preorder_date:r.preorderDate?r.preorderDate.toISOString().split("T")[0]:null,product_color:r.productColors[0],createdBy:a==null?void 0:a._id};try{console.log("Updating product with data:",v),await d({id:s,productData:v}).unwrap(),N.success("Product updated successfully!"),t("/admin/products")}catch(_){console.error("Update error:",_),N.error(((S=_==null?void 0:_.data)==null?void 0:S.message)||"Failed to update product")}}}},Km=()=>{const{id:s}=Se(),{formData:t,isLoading:a,handleChange:r,handleCheckboxChange:n,handleSubmit:l,handleDateChange:i}=Gm(s);return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Update Product"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:l,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Update Product"})}),e.jsxs(M,{className:"p-6 space-y-8",children:[e.jsx(en,{formData:t,onChange:r,onCheckboxChange:n}),e.jsx(sn,{formData:t,onChange:r}),e.jsx(tn,{formData:t,onChange:r}),e.jsx(an,{formData:t,onChange:r}),e.jsx(nn,{formData:t,onCheckboxChange:n}),e.jsx(ln,{formData:t,onCheckboxChange:n}),e.jsx(cn,{formData:t,onCheckboxChange:n}),e.jsx(on,{formData:t,onChange:r}),e.jsx(dn,{formData:t,onChange:r}),e.jsx(mn,{formData:t,onChange:r,onCheckboxChange:n,onDateChange:i}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",children:a?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 animate-spin"}),"Updating Product..."]}):"Update Product"})})]})]})})})]})},Ym=(s,t,a)=>Je({handleEdit:s,handleDelete:t,isDeleting:a,hasImageUpload:!1,customColumns:[{header:"Name",accessorKey:"name"},{header:"Created At",accessorKey:"createdAt"},{header:"Updated At",accessorKey:"updatedAt"}]}),Qm=()=>{const{data:s,isLoading:t,error:a}=Ss(),[r,{isLoading:n}]=Ti(),[l,i]=g.useState(""),c=ee();g.useEffect(()=>{var m;a&&N.error(((m=a==null?void 0:a.data)==null?void 0:m.message)||"Failed to fetch categories")},[a]);const o=m=>{c(`/admin/update-category/${m._id}`)},d=async m=>{var u;try{const h=await r(m._id).unwrap();N.success(h.message||"Category deleted successfully")}catch(h){N.error(((u=h==null?void 0:h.data)==null?void 0:u.message)||"Failed to delete category")}},x=g.useMemo(()=>Ym(o,d)),p=g.useMemo(()=>s!=null&&s.categories?[...s.categories].sort((m,u)=>new Date(u.createdAt)-new Date(m.createdAt)).map((m,u)=>({id:u+1,_id:m._id,name:m.name,createdAt:new Date(m.createdAt).toLocaleString(),updatedAt:m.updatedAt?new Date(m.updatedAt).toLocaleString():"Not Updated"})):[],[s]);return e.jsx(Be,{title:"Category",description:"Manage your product categories",addNewPath:"/admin/new-category",isLoading:t,error:a,data:p,columns:x,globalFilter:l,setGlobalFilter:i})},Jm=(s,t,a,r,n,l)=>Je({handleEdit:s,handleDelete:t,handleImageUpload:a,isUploading:r,uploadingId:n,isDeleting:l,hasImageUpload:!0,customColumns:[{header:"Collection Name",accessorKey:"name"},{header:"Description",accessorKey:"description"},{header:"Display Location",accessorKey:"isFeatured",cell:({row:c})=>e.jsx(oe,{variant:c.original.isFeatured?"accent":"info",children:c.original.isFeatured?"Featured Section":"Collections Section"})},{header:"Created At",accessorKey:"createdAt"},{header:"Updated At",accessorKey:"updatedAt"}]}),Zm=()=>{const{data:s,isLoading:t,error:a}=as(),[r,{isLoading:n}]=$i(),[l,{isLoading:i,error:c}]=Hi(),[o,d]=g.useState(""),x=ee();g.useEffect(()=>{var S,_;a&&N.error(((S=a==null?void 0:a.data)==null?void 0:S.message)||"Failed to fetch collections"),c&&N.error(((_=c==null?void 0:c.data)==null?void 0:_.message)||"Failed to upload image")},[a,c]);const p=S=>{x(`/admin/update-collection/${S._id}`)},[m,u]=g.useState(null),h=g.useRef(null),{handleImageUpload:j,isUploading:y}=Is({maxSizeMB:.8,maxWidthOrHeight:600,maxFileSize:2*1024*1024,onSuccess:async S=>{var _;try{const P=h.current;if(!P||!P._id){console.error("No collection ID available for upload"),N.error("Failed to identify collection for upload");return}console.log("Uploading image for collection:",P._id,P.name);const D=await l({id:P._id,body:{image:S}}).unwrap();D.success?N.success(D.message||"Collection image updated successfully"):N.error(D.message||"Failed to update collection image")}catch(P){console.error("Upload error:",P),N.error(((_=P==null?void 0:P.data)==null?void 0:_.message)||"Failed to upload image")}finally{h.current=null}}}),v=y||i,f=(S,_)=>{h.current=S,u(S),j({target:{files:[_]}})},w=async S=>{var _;try{const P=await r(S._id).unwrap();N.success(P.message||"Collection deleted successfully")}catch(P){N.error(((_=P==null?void 0:P.data)==null?void 0:_.message)||"Failed to delete collection")}},k=g.useMemo(()=>Jm(p,w,f,v,m==null?void 0:m._id,n),[p,w,f,v,m,n]),b=g.useMemo(()=>s!=null&&s.collections?[...s.collections].sort((S,_)=>S.isFeatured&&!_.isFeatured?-1:!S.isFeatured&&_.isFeatured?1:new Date(_.createdAt)-new Date(S.createdAt)).map((S,_)=>({id:_+1,_id:S._id,name:S.name,description:S.description||"N/A",isFeatured:S.isFeatured,createdAt:new Date(S.createdAt).toLocaleString(),updatedAt:S.updatedAt?new Date(S.updatedAt).toLocaleString():"Not Updated",image:S.image})):[],[s]);return e.jsx(Be,{title:"Collection",description:"Manage your collections",addNewPath:"/admin/new-collection",isLoading:t,error:a,data:b,columns:k,globalFilter:o,setGlobalFilter:d})},Xm=(s,t,a)=>Je({handleEdit:s,handleDelete:t,isDeleting:a,hasImageUpload:!1,customColumns:[{header:"Skill Level",accessorKey:"name"},{header:"Description",accessorKey:"description"}]}),eu=()=>{const{data:s,isLoading:t,error:a}=gt(),[r,{isLoading:n}]=Ui(),[l,i]=g.useState(""),c=ee(),o=m=>{c(`/admin/update-skill-level/${m._id}`)},d=async m=>{var u;try{const h=await r(m._id).unwrap();N.success(h.message||"Skill level deleted successfully")}catch(h){N.error(((u=h==null?void 0:h.data)==null?void 0:u.message)||"Failed to delete skill level")}},x=g.useMemo(()=>Xm(o,d,n),[o,d,n]),p=g.useMemo(()=>s!=null&&s.skillLevels?[...s.skillLevels].sort((m,u)=>new Date(u.createdAt)-new Date(m.createdAt)).map((m,u)=>({id:u+1,_id:m._id,name:m.name,description:m.description||"N/A"})):[],[s]);return e.jsx(Be,{title:"Skill Level",description:"Manage your product skill levels",addNewPath:"/admin/new-skill-level",isLoading:t,error:a,data:p,columns:x,globalFilter:l,setGlobalFilter:i})},su=(s,t,a)=>Je({handleEdit:s,handleDelete:t,isDeleting:a,hasImageUpload:!1,customColumns:[{header:"Designer Name",accessorKey:"name"},{header:"Bio",accessorKey:"bio"},{header:"Social Links",accessorKey:"links",cell:({row:n})=>e.jsx("div",{children:n.original.links&&Object.entries(n.original.links).map(([l,i])=>i&&e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-1 text-blue-500 hover:text-blue-600 mb-1",children:e.jsx("span",{className:"capitalize",children:l})},l))})}]}),tu=()=>{const{data:s,isLoading:t,error:a}=jt(),[r,{isLoading:n}]=Vi(),[l,i]=g.useState(""),c=ee(),o=m=>{c(`/admin/update-designer/${m._id}`)},d=async m=>{var u;try{const h=await r(m._id).unwrap();N.success(h.message||"Designer deleted successfully")}catch(h){N.error(((u=h==null?void 0:h.data)==null?void 0:u.message)||"Failed to delete designer")}},x=g.useMemo(()=>su(o,d,n),[o,d,n]),p=g.useMemo(()=>s!=null&&s.designers?[...s.designers].sort((m,u)=>new Date(u.createdAt)-new Date(m.createdAt)).map((m,u)=>({id:u+1,_id:m._id,name:m.name,bio:m.bio||"No bio available",links:m.social_links||{}})):[],[s]);return e.jsx(Be,{title:"Designer",description:"Manage your product designers",addNewPath:"/admin/new-designer",isLoading:t,error:a,data:p,columns:x,globalFilter:l,setGlobalFilter:i})},Sa=({children:s,adminOnly:t=!1})=>{const{isAuthenticated:a,user:r}=ae(i=>i.auth),{isLoading:n}=Nt(),l=Te();return n?null:a?t&&!["admin","employee","superAdmin"].includes(r==null?void 0:r.role)?e.jsx(ma,{to:"/",replace:!0}):s||e.jsx(Js,{}):e.jsx(ma,{to:"/login",state:{from:l},replace:!0})},au=()=>{const s=ee(),{user:t}=ae(l=>l.auth),[a,{isLoading:r}]=Fi(),n=async l=>{var d;l.preventDefault();const i=new FormData(l.target),c=i.get("popularityId");if(!c||!/^\d{1,3}$/.test(c)){N.error("Popularity ID must be a number between 001-999");return}const o={name:i.get("name"),popularityId:c.padStart(3,"0"),createdBy:t==null?void 0:t._id,is_active:!0};try{await a(o).unwrap(),N.success("Category created successfully!"),s("/admin/categories")}catch(x){N.error(((d=x==null?void 0:x.data)==null?void 0:d.message)||"Failed to create category")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Add Category"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:n,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Add New Category"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Category Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter category name",required:!0}),e.jsxs(R,{htmlFor:"popularityId",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),"Popularity ID"]}),e.jsx(Q,{id:"popularityId",name:"popularityId",type:"number",min:"001",max:"999",placeholder:"Enter popularity ID (001-999)",required:!0}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4"}),"Creating Category..."]}):"Create Category"})})]})]})})})]})},ru=()=>{var o;const{id:s}=Se(),t=ee(),{user:a}=ae(d=>d.auth),[r,{isLoading:n}]=Ai(),{data:l}=Ss(),i=(o=l==null?void 0:l.categories)==null?void 0:o.find(d=>d._id===s),c=async d=>{var u;d.preventDefault();const x=new FormData(d.target),p=x.get("popularityId");if(!p||!/^\d{1,3}$/.test(p)){N.error("Popularity ID must be a number between 001-999");return}const m={name:x.get("name"),popularityId:p.padStart(3,"0"),updatedBy:a==null?void 0:a._id};try{await r({id:s,...m}).unwrap(),N.success("Category updated successfully!"),t("/admin/categories")}catch(h){N.error(((u=h==null?void 0:h.data)==null?void 0:u.message)||"Failed to update category")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Update Category"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:c,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Update Category"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Category Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter category name",defaultValue:i==null?void 0:i.name,required:!0}),e.jsxs(R,{htmlFor:"popularityId",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),"Popularity ID"]}),e.jsx(Q,{id:"popularityId",name:"popularityId",type:"number",min:"001",max:"999",placeholder:"Enter popularity ID (001-999)",defaultValue:i==null?void 0:i.popularityId,required:!0}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4"}),"Updating Category..."]}):"Update Category"})})]})]})})})]})},nu=()=>{const s=ee(),{user:t}=ae(c=>c.auth),[a,{isLoading:r}]=Ei(),{data:n}=as(),l=ar.useMemo(()=>{var o;return(o=n==null?void 0:n.collections)!=null&&o.length?(Math.max(...n.collections.map(d=>parseInt(d.popularityId,10)))+1).toString().padStart(3,"0"):"001"},[n]),i=async c=>{var x;c.preventDefault();const o=new FormData(c.target),d={name:o.get("name"),description:o.get("description"),popularityId:l,createdBy:t==null?void 0:t._id,is_active:!0,isFeatured:o.get("isFeatured")==="on"};try{await a(d).unwrap(),N.success("Collection created successfully!"),s("/admin/collections")}catch(p){N.error(((x=p==null?void 0:p.data)==null?void 0:x.message)||"Failed to create collection")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Add Collection"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:i,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Add New Collection"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Collection Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter collection name",required:!0}),e.jsxs(R,{htmlFor:"popularityId",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),"Popularity ID"]}),e.jsx(Q,{id:"popularityId",name:"popularityId",type:"text",className:"bg-gray-100",defaultValue:l,readOnly:!0}),e.jsx("p",{className:"text-sm text-gray-500",children:"This ID is automatically generated based on existing collections."}),e.jsxs(R,{htmlFor:"description",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(xt,{className:"h-5 w-5 text-purple-600"}),"Description"]}),e.jsx(_e,{id:"description",name:"description",placeholder:"Enter collection description"}),e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Ue,{name:"isFeatured",id:"isFeatured",className:"border-black data-[state=checked]:bg-accent data-[state=checked]:border-accent"}),e.jsx("span",{className:"text-sm font-medium",children:"Add to Featured Collection"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Creating Collection..."]}):"Create Collection"})})]})]})})})]})},lu=()=>{var o;const{id:s}=Se(),t=ee(),{user:a}=ae(d=>d.auth),[r,{isLoading:n}]=Ri(),{data:l}=as(),i=(o=l==null?void 0:l.collections)==null?void 0:o.find(d=>d._id===s),c=async d=>{var m;d.preventDefault();const x=new FormData(d.target),p=x.get("popularityId");if(!p||!/^\d{1,3}$/.test(p)){N.error("Popularity ID must be a number between 001-999");return}try{await r({id:s,name:x.get("name"),description:x.get("description"),popularityId:p.padStart(3,"0"),isFeatured:x.get("isFeatured")==="on",updatedBy:a==null?void 0:a._id}).unwrap(),N.success("Collection updated successfully!"),t("/admin/collections")}catch(u){N.error(((m=u==null?void 0:u.data)==null?void 0:m.message)||"Failed to update collection")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Update Collection"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:c,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Update Collection"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Collection Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter collection name",defaultValue:i==null?void 0:i.name,required:!0}),e.jsxs(R,{htmlFor:"popularityId",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),"Popularity ID"]}),e.jsx(Q,{id:"popularityId",name:"popularityId",type:"number",min:"001",max:"999",placeholder:"Enter popularity ID (001-999)",defaultValue:i==null?void 0:i.popularityId,required:!0}),e.jsxs(R,{htmlFor:"description",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(xt,{className:"h-5 w-5 text-purple-600"}),"Description"]}),e.jsx(_e,{id:"description",name:"description",placeholder:"Enter collection description",defaultValue:i==null?void 0:i.description}),e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Ue,{name:"isFeatured",id:"isFeatured",defaultChecked:i==null?void 0:i.isFeatured,className:"border-white/10 data-[state=checked]:bg-accent data-[state=checked]:border-accent"}),e.jsx("span",{className:"text-sm font-medium",children:"Add to Featured Collection"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Updating Collection..."]}):"Update Collection"})})]})]})})})]})},iu=()=>{const s=ee(),{user:t}=ae(l=>l.auth),[a,{isLoading:r}]=Li(),n=async l=>{var o;l.preventDefault();const i=new FormData(l.target),c={name:i.get("name"),description:i.get("description"),key:i.get("name").toLowerCase().trim().replace(/\s+/g,"_"),createdBy:t==null?void 0:t._id,updatedBy:t==null?void 0:t._id,is_active:!0};try{await a(c).unwrap(),N.success("Skill level created successfully!"),s("/admin/skill-levels")}catch(d){N.error(((o=d==null?void 0:d.data)==null?void 0:o.message)||"Failed to create skill level")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Add Skill Level"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:n,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Add New Skill Level"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Skill Level Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter skill level name",required:!0}),e.jsxs(R,{htmlFor:"description",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(xt,{className:"h-5 w-5 text-purple-600"}),"Description"]}),e.jsx(_e,{id:"description",name:"description",placeholder:"Enter skill level description"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Creating Skill Level..."]}):"Create Skill Level"})})]})]})})})]})},cu=()=>{var o;const{id:s}=Se(),t=ee(),{user:a}=ae(d=>d.auth),[r,{isLoading:n}]=Mi(),{data:l}=gt(),i=(o=l==null?void 0:l.skillLevels)==null?void 0:o.find(d=>d._id===s),c=async d=>{var m;d.preventDefault();const x=new FormData(d.target),p={name:x.get("name"),description:x.get("description"),key:x.get("name").toLowerCase().trim().replace(/\s+/g,"_"),updatedBy:a==null?void 0:a._id};try{await r({id:s,...p}).unwrap(),N.success("Skill level updated successfully!"),t("/admin/skill-levels")}catch(u){N.error(((m=u==null?void 0:u.data)==null?void 0:m.message)||"Failed to update skill level")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Update Skill Level"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:c,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Update Skill Level"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Skill Level Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter skill level name",defaultValue:i==null?void 0:i.name,required:!0}),e.jsxs(R,{htmlFor:"description",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(xt,{className:"h-5 w-5 text-purple-600"}),"Description"]}),e.jsx(_e,{id:"description",name:"description",placeholder:"Enter skill level description",defaultValue:i==null?void 0:i.description}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Updating Skill Level..."]}):"Update Skill Level"})})]})]})})})]})},ou={public_id:"default_profile_pic",url:"https://example.com/images/default_profile_picture.jpg"},du=()=>{const s=ee(),{user:t}=ae(c=>c.auth),[a,{isLoading:r}]=Oi();g.useState(null);const[n,l]=g.useState(null),i=async c=>{c.preventDefault();const o=new FormData(c.target),d={name:o.get("name"),bio:o.get("bio"),social_links:{instagram:o.get("instagram")},profile_picture:n||ou,createdBy:t==null?void 0:t._id,updatedBy:t==null?void 0:t._id};try{await a(d).unwrap(),N.success("Designer created successfully!"),s("/admin/designers")}catch{N.error("Failed to create designer. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Add Designer"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:i,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Add New Designer"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ge,{className:"h-5 w-5 text-blue-600"}),"Designer Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter designer name",required:!0}),e.jsxs(R,{htmlFor:"bio",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),"Bio"]}),e.jsx(_e,{id:"bio",name:"bio",placeholder:"Enter designer bio"}),e.jsxs(R,{htmlFor:"instagram",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(ct,{className:"h-5 w-5 text-green-600"}),"Instagram Profile"]}),e.jsx(Q,{id:"instagram",name:"instagram",placeholder:"https://instagram.com/username",type:"url"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Creating Designer..."]}):"Create Designer"})})]})]})})})]})},mu=()=>{var o,d;const{id:s}=Se(),t=ee(),{user:a}=ae(x=>x.auth),[r,{isLoading:n}]=qi();g.useState(null);const{data:l}=jt(),i=(o=l==null?void 0:l.designers)==null?void 0:o.find(x=>x._id===s),c=async x=>{var h;x.preventDefault();const p=new FormData(x.target),m=p.get("profile_picture"),u=new FormData;u.append("name",p.get("name")),u.append("bio",p.get("bio")),u.append("social_links[instagram]",p.get("instagram")),m.size>0&&u.append("profile_picture",m),u.append("updatedBy",a==null?void 0:a._id);try{await r({id:s,...Object.fromEntries(u)}).unwrap(),N.success("Designer updated successfully!"),t("/admin/designers")}catch(j){N.error(((h=j==null?void 0:j.data)==null?void 0:h.message)||"Failed to update designer")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Update Designer"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:c,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Update Designer"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ge,{className:"h-5 w-5 text-blue-600"}),"Designer Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter designer name",defaultValue:i==null?void 0:i.name,required:!0}),e.jsxs(R,{htmlFor:"bio",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),"Bio"]}),e.jsx(_e,{id:"bio",name:"bio",placeholder:"Enter designer bio",defaultValue:i==null?void 0:i.bio}),e.jsxs(R,{htmlFor:"instagram",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(ct,{className:"h-5 w-5 text-green-600"}),"Instagram Profile"]}),e.jsx(Q,{id:"instagram",name:"instagram",placeholder:"https://instagram.com/username",defaultValue:(d=i==null?void 0:i.social_links)==null?void 0:d.instagram,type:"url"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Updating Designer..."]}):"Update Designer"})})]})]})})})]})},uu=({isOpen:s,onClose:t,onConfirm:a})=>e.jsx(Ke,{open:s,onOpenChange:t,children:e.jsxs(qe,{children:[e.jsxs(Ve,{children:[e.jsx(ze,{children:"Select Upload Target"}),e.jsx(ns,{children:"Choose whether this image is for the main website or the Minifig Builder site."})]}),e.jsxs(qs,{className:"flex gap-2 justify-end",children:[e.jsx(O,{variant:"secondary",onClick:()=>a("MAIN"),children:"Main Site"}),e.jsx(O,{variant:"accent",onClick:()=>a("MINIFIG_BUILDER"),children:"Minifig Builder Site"})]})]})}),xu=()=>{const s=Se(),t=ee(),a=g.useRef(null),[r,n]=g.useState([]),[l,i]=g.useState([]),[c,o]=g.useState([]),[d,x]=g.useState(0),[p,m]=g.useState(null),[u,h]=g.useState(!1),j=()=>{h(!0)},y=I=>{var U;m(I),h(!1),(U=a.current)==null||U.click()},{data:v}=pt(s==null?void 0:s.id),[f,{isLoading:w,error:k,isError:b,isSuccess:S,data:_}]=zi(),[P,{isSuccess:D,error:B,data:X}]=Bi(),{handleImageUpload:V,isUploading:z}=Is({maxSizeMB:.8,maxWidthOrHeight:1200,maxFileSize:5*1024*1024,onSuccess:I=>{i(U=>[...U,I]),n(U=>[...U,I]),x(U=>Math.max(0,U-1))}});g.useEffect(()=>{var I,U;v!=null&&v.product&&o((I=v==null?void 0:v.product)==null?void 0:I.product_images),b&&N.error((U=k==null?void 0:k.data)==null?void 0:U.message),S&&(N.success((_==null?void 0:_.message)||"Images uploaded successfully"),i([]),t("/admin/products"))},[v,b,S,k,_]),g.useEffect(()=>{var I,U;D&&(N.success((X==null?void 0:X.message)||"Image deleted successfully"),o(((I=X==null?void 0:X.product)==null?void 0:I.product_images)||[])),B&&N.error(((U=B==null?void 0:B.data)==null?void 0:U.message)||"Failed to delete image")},[D,B,X]);const G=I=>{const U=Array.from(I.target.files),Y=10-(c.length+l.length);if(p==="MINIFIG_BUILDER"&&(U.length>1||c.some(te=>te.usage==="MINIFIG_BUILDER"))){N.warning("You can only upload 1 image for Minifig Builder site");return}if(U.length>Y){N.warning(`You can only upload ${Y} more image${Y!==1?"s":""}`);return}x(U.length),U.forEach(te=>{V({...{target:{files:[te]}},onSuccess:be=>{i(ue=>[...ue,be]),n(ue=>[...ue,te]),x(ue=>Math.max(0,ue-1))}})})},se=I=>{n(U=>U.filter(Y=>Y!==I)),i(U=>U.filter(Y=>Y!==I))},de=I=>{P({id:s==null?void 0:s.id,body:{public_id:I}})},fe=async I=>{var U;I.preventDefault();try{const Y=l;await f({id:s==null?void 0:s.id,body:{images:Y,usage:p??"MAIN_SITE"}}).unwrap(),N.success("Images uploaded successfully"),n([]),i([]),t("/admin/products")}catch(Y){N.error(((U=Y==null?void 0:Y.data)==null?void 0:U.message)||"Failed to upload images")}},he=z||d>0;return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Product Images"}),e.jsx(uu,{isOpen:u,onClose:h,onConfirm:y}),e.jsx($,{className:"bg-brand-start shadow-none",children:e.jsxs("form",{onSubmit:fe,children:[e.jsxs(H,{className:"text-background space-y-2",children:[e.jsx(re,{className:"text-3xl font-bold",children:"Product Image Gallery"}),e.jsxs(rs,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-300 text-base",children:"Manage product images and upload new ones"}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-400",children:[e.jsx(Es,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["First image will be the main display (",c.length+l.length,"/10)"]})]})]})]}),e.jsxs(M,{className:"p-5 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[c.length+l.length<10&&e.jsx("button",{type:"button",onClick:j,disabled:he,className:`aspect-square rounded-lg border-2 border-dashed border-brand-end/50 
                    flex flex-col items-center justify-center gap-2 text-white
                    hover:border-blue-500 transition-colors group 
                    ${he?"opacity-50 cursor-not-allowed":""}`,children:he?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 h-8 border-2 border-brand-end/50 border-t-accent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-accent",children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ht,{className:"w-8 h-8 group-hover:text-blue-500"}),e.jsx("span",{className:"text-sm group-hover:text-blue-500",children:"Add Image"})]})}),c.map((I,U)=>e.jsxs("div",{className:`relative group aspect-square rounded-lg overflow-hidden cursor-pointer
                    ${U===0?"ring-2 ring-red-500":"ring-2"}
                  `,children:[e.jsx("img",{src:I.url,alt:`Product ${U+1}`,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(O,{type:"button",variant:"destructive",size:"icon",onClick:()=>de(I==null?void 0:I.public_id),className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx(Vl,{className:"w-4 h-4"})})}),(I==null?void 0:I.usage)==="MAIN_SITE"&&(U===0?e.jsx("div",{className:"absolute top-2 left-2 bg-red-500 px-3 pb-1 rounded-md",children:e.jsx("span",{className:"text-xs text-white font-medium",children:"Main"})}):e.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 px-3 pb-1 rounded-md",children:e.jsxs("span",{className:"text-xs text-white font-medium",children:["Thumbnail ",U]})})),(I==null?void 0:I.usage)==="MINIFIG_BUILDER"&&e.jsx("div",{className:"absolute top-2 left-2 bg-purple-600 px-3 pb-1 rounded-md",children:e.jsx("span",{className:"text-xs text-white font-medium",children:"Minifig Builder Site"})})]},U)),l.map((I,U)=>e.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden ring-2 ring-slate-700 cursor-pointer",children:[e.jsx("img",{src:I,alt:`Preview ${U+1}`,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(O,{type:"button",variant:"destructive",size:"icon",onClick:()=>se(I),className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx(es,{className:"w-4 h-4"})})}),e.jsx("div",{className:"absolute top-2 left-2 bg-green-600 px-3 pb-1 rounded-md",children:e.jsx("span",{className:"text-xs text-white font-medium",children:"New"})})]},`preview-${U}`))]}),e.jsx("input",{type:"file",ref:a,className:"hidden",onChange:G,multiple:!0,accept:"image/*",disabled:he}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{type:"submit",variant:"accent",disabled:r.length<=0||w||he,children:w||he?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 animate-spin"}),w?"Uploading...":"Processing..."]}):"Save Changes"})})]})]})})]})},hu=(s,t,a)=>Je({handleEdit:s,handleDelete:t,isDeleting:a,hasImageUpload:!1,customColumns:[{header:"Name",accessorKey:"name",size:100},{header:"Color",accessorKey:"code",size:100,cell:({row:n})=>e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border",style:{backgroundColor:n.original.code}}),e.jsx("span",{children:n.original.code})]})},{header:"Description",accessorKey:"description",size:100},{header:"Created At",accessorKey:"createdAt",size:100},{header:"Updated At",accessorKey:"updatedAt",size:100}]}),pu=()=>{const{data:s,isLoading:t,error:a}=ft(),[r,{isLoading:n}]=Yi(),[l,i]=g.useState(""),c=ee(),o=m=>{c(`/admin/update-color/${m._id}`)},d=async m=>{var u;try{const h=await r(m._id).unwrap();N.success(h.message||"Color deleted successfully")}catch(h){N.error(((u=h==null?void 0:h.data)==null?void 0:u.message)||"Failed to delete color")}},x=g.useMemo(()=>hu(o,d)),p=g.useMemo(()=>s!=null&&s.prod_color?[...s.prod_color].sort((m,u)=>new Date(u.createdAt)-new Date(m.createdAt)).map((m,u)=>({id:u+1,_id:m._id,name:m.name,code:m.code,description:m.description||"No description",createdAt:new Date(m.createdAt).toLocaleString(),updatedAt:m.updatedAt?new Date(m.updatedAt).toLocaleString():"Not Updated"})):[],[s]);return e.jsx(Be,{title:"Colors",description:"Manage your product colors",addNewPath:"/admin/new-color",isLoading:t,error:a,data:p,columns:x,globalFilter:l,setGlobalFilter:i})},gu=()=>{const s=ee(),{user:t}=ae(d=>d.auth),[a,{isLoading:r}]=Gi(),[n,l]=g.useState(""),i=d=>{let x=d.target.value;x=x.replace("#",""),(x.length===3||x.length===6)&&(x="#"+x),l(x),x.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)&&(document.getElementById("colorPicker").value=x)},c=d=>{const x=d.target.value;l(x),document.getElementById("code").value=x},o=async d=>{var m;d.preventDefault();const x=new FormData(d.target),p={name:x.get("name"),code:n||x.get("code"),description:x.get("description"),createdBy:t==null?void 0:t._id,is_active:!0};try{await a(p).unwrap(),N.success("Color created successfully!"),s("/admin/colors")}catch(u){N.error(((m=u==null?void 0:u.data)==null?void 0:m.message)||"Failed to create color")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Add Color"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:o,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Add New Color"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),"Color Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter color name",required:!0}),e.jsxs(R,{htmlFor:"code",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),"Color Code (HEX)"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[e.jsx("div",{className:"col-span-3",children:e.jsx(Q,{id:"code",name:"code",type:"text",placeholder:"#000000",pattern:"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",required:!0,value:n,onChange:i})}),e.jsx(Q,{id:"colorPicker",type:"color",className:"w-full p-1",onChange:c,value:n.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)?n:"#000000"})]}),e.jsxs(R,{htmlFor:"description",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),"Description"]}),e.jsx(_e,{id:"description",name:"description",placeholder:"Enter color description"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4"}),"Creating Color..."]}):"Create Color"})})]})]})})})]})},ju=()=>{var o;const{id:s}=Se(),t=ee(),{user:a}=ae(d=>d.auth),[r,{isLoading:n}]=Ki(),{data:l}=ft(),i=(o=l==null?void 0:l.prod_color)==null?void 0:o.find(d=>d._id===s),c=async d=>{var m;d.preventDefault();const x=new FormData(d.target),p={name:x.get("name"),code:x.get("code"),description:x.get("description"),updatedBy:a==null?void 0:a._id};try{await r({id:s,...p}).unwrap(),N.success("Color updated successfully!"),t("/admin/colors")}catch(u){N.error(((m=u==null?void 0:u.data)==null?void 0:m.message)||"Failed to update color")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Update Color"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:c,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Update Color"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),"Color Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter color name",defaultValue:i==null?void 0:i.name,required:!0}),e.jsxs(R,{htmlFor:"code",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),"Color Code (HEX)"]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(Q,{id:"code",name:"code",type:"text",placeholder:"#000000",pattern:"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",defaultValue:i==null?void 0:i.code,required:!0}),e.jsx(Q,{type:"color",defaultValue:i==null?void 0:i.code,className:"w-20 h-10 p-1",onChange:d=>{document.getElementById("code").value=d.target.value}})]}),e.jsxs(R,{htmlFor:"description",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),"Description"]}),e.jsx(_e,{id:"description",name:"description",placeholder:"Enter color description",defaultValue:i==null?void 0:i.description}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4"}),"Updating Color..."]}):"Update Color"})})]})]})})})]})},fu=(s,t,a)=>Je({handleEdit:s,handleDelete:t,isDeleting:a,hasImageUpload:!1,customColumns:[{header:"Parent Category",accessorKey:"parentCategory"},{header:"Sub-Category Name",accessorKey:"name"},{header:"Created At",accessorKey:"createdBy"},{header:"Last Updated",accessorKey:"updatedBy"}]}),bu=()=>{const{data:s,isLoading:t,error:a}=bt(),[r,{isLoading:n}]=Zi(),[l,i]=g.useState(""),c=ee(),o=m=>{c(`/admin/update-subcategory/${m._id}`)},d=async m=>{var u;try{const h=await r(m._id).unwrap();N.success(h.message||"Sub-category deleted successfully")}catch(h){N.error(((u=h==null?void 0:h.data)==null?void 0:u.message)||"Failed to delete sub-category")}},x=g.useMemo(()=>fu(o,d,n),[o,d,n]),p=g.useMemo(()=>s!=null&&s.sub_categories?[...s.sub_categories].sort((m,u)=>new Date(u.createdAt)-new Date(m.createdAt)).map((m,u)=>{var h;return{id:u+1,_id:m._id,name:m.name,parentCategory:((h=m.category)==null?void 0:h.name)||"N/A",createdBy:new Date(m.createdAt).toLocaleString(),updatedBy:m.updatedAt?new Date(m.updatedAt).toLocaleString():"Not Updated"}}):[],[s]);return e.jsx(Be,{title:"Sub Category",description:"Manage your product sub-categories",addNewPath:"/admin/new-subcategory",isLoading:t,error:a,data:p,columns:x,globalFilter:l,setGlobalFilter:i})},yu=()=>{var i;const s=ee(),{user:t}=ae(c=>c.auth),[a,{isLoading:r}]=Qi(),{data:n}=Ss(),l=async c=>{var x;c.preventDefault();const o=new FormData(c.target);if(!o.get("category")){N.error("Please select a parent category");return}if(!o.get("name")){N.error("Please enter a sub-category name");return}const d=o.get("popularityId");if(!d||!/^\d{1,3}$/.test(d)){N.error("Popularity ID must be a number between 001-999");return}try{await a({name:o.get("name").trim(),category:o.get("category"),popularityId:d.padStart(3,"0"),createdBy:t==null?void 0:t._id}).unwrap(),N.success("Sub-category created successfully!"),s("/admin/subcategories")}catch(p){N.error(((x=p==null?void 0:p.data)==null?void 0:x.message)||"Failed to create sub-category")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Add Sub-Category"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:l,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Add New Sub-Category"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"category",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),"Parent Category"]}),e.jsxs(Le,{name:"category",required:!0,children:[e.jsx(Fe,{className:"bg-transparent border",children:e.jsx(Oe,{placeholder:"Select a category"})}),e.jsx(Ae,{className:"bg-background",children:(i=n==null?void 0:n.categories)==null?void 0:i.map(c=>e.jsx(ve,{value:c._id,className:"text-foreground",children:c.name},c._id))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Sub-Category Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter sub-category name",required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"popularityId",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),"Popularity ID"]}),e.jsx(Q,{id:"popularityId",name:"popularityId",type:"number",min:"001",max:"999",placeholder:"Enter popularity ID (001-999)",required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Creating Sub-Category..."]}):"Create Sub-Category"})})]})]})})})]})},Nu=()=>{var d,x,p;const{id:s}=Se(),t=ee(),{user:a}=ae(m=>m.auth),[r,{isLoading:n}]=Ji(),{data:l}=bt(),{data:i}=Ss(),c=(d=l==null?void 0:l.sub_categories)==null?void 0:d.find(m=>m._id===s),o=async m=>{var j;m.preventDefault();const u=new FormData(m.target);if(!u.get("category")){N.error("Please select a parent category");return}if(!u.get("name")){N.error("Please enter a sub-category name");return}const h=u.get("popularityId");if(!h||!/^\d{1,3}$/.test(h)){N.error("Popularity ID must be a number between 001-999");return}try{await r({id:s,name:u.get("name").trim(),category:u.get("category"),popularityId:h.padStart(3,"0"),updatedBy:a==null?void 0:a._id}).unwrap(),N.success("Sub-category updated successfully!"),t("/admin/subcategories")}catch(y){N.error(((j=y==null?void 0:y.data)==null?void 0:j.message)||"Failed to update sub-category")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Update Sub-Category"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:o,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Update Sub-Category"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"category",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),"Parent Category"]}),e.jsxs(Le,{name:"category",defaultValue:(x=c==null?void 0:c.category)==null?void 0:x._id,required:!0,children:[e.jsx(Fe,{className:"bg-transparent border",children:e.jsx(Oe,{placeholder:"Select a category"})}),e.jsx(Ae,{className:"bg-background",children:(p=i==null?void 0:i.categories)==null?void 0:p.map(m=>e.jsx(ve,{value:m._id,className:"text-foreground",children:m.name},m._id))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Sub-Category Name"]}),e.jsx(Q,{id:"name",name:"name",defaultValue:c==null?void 0:c.name,placeholder:"Enter sub-category name",required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"popularityId",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),"Popularity ID"]}),e.jsx(Q,{id:"popularityId",name:"popularityId",type:"number",min:"001",max:"999",placeholder:"Enter popularity ID (001-999)",defaultValue:c==null?void 0:c.popularityId,required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Updating Sub-Category..."]}):"Update Sub-Category"})})]})]})})})]})},vu=(s,t,a,r,n,l)=>Je({handleEdit:s,handleDelete:t,handleImageUpload:a,isUploading:r,uploadingId:n,isDeleting:l,hasImageUpload:!0,customColumns:[{header:"Parent Collection",accessorKey:"parentCollection"},{header:"Sub-Collection Name",accessorKey:"name"},{header:"Description",accessorKey:"description"},{header:"Created At",accessorKey:"createdBy"},{header:"Last Updated",accessorKey:"updatedBy"}]}),wu=()=>{const{data:s,isLoading:t,error:a}=_s(),[r,{isLoading:n}]=sc(),[l,{isLoading:i,error:c}]=tc(),[o,d]=g.useState(""),[x,p]=g.useState(null),m=g.useRef(null),u=ee(),h=S=>{u(`/admin/update-subcollection/${S._id}`)},j=async S=>{var _;try{const P=await r(S._id).unwrap();N.success(P.message||"Sub-collection deleted successfully")}catch(P){N.error(((_=P==null?void 0:P.data)==null?void 0:_.message)||"Failed to delete sub-collection")}},{handleImageUpload:y,isUploading:v}=Is({maxSizeMB:.8,maxWidthOrHeight:600,maxFileSize:2*1024*1024,onSuccess:async S=>{var _;try{const P=m.current;if(!P||!P._id){N.error("Failed to identify sub-collection for upload");return}const D=await l({id:P._id,body:{image:S}}).unwrap();D.success?N.success(D.message):N.error("Failed to update sub-collection image")}catch(P){N.error(((_=P==null?void 0:P.data)==null?void 0:_.message)||"Failed to upload image")}finally{m.current=null,p(null)}}}),f=v||i,w=(S,_)=>{m.current=S,p(S),y({target:{files:[_]}})},k=g.useMemo(()=>vu(h,j,w,f,x==null?void 0:x._id,n),[h,j,w,f,x,n]),b=g.useMemo(()=>s!=null&&s.subcollections?[...s.subcollections].sort((S,_)=>new Date(_.createdAt)-new Date(S.createdAt)).map((S,_)=>{var P,D;return{id:_+1,_id:S._id,name:S.name,description:S.description||"N/A",parentCollection:((P=S.collection)==null?void 0:P.name)||"N/A",image:((D=S.image)==null?void 0:D.url)||null,createdBy:new Date(S.createdAt).toLocaleString(),updatedBy:S.updatedAt?new Date(S.updatedAt).toLocaleString():"Not Updated"}}):[],[s]);return e.jsx(Be,{title:"Sub Collection",description:"Manage your product sub-collections",addNewPath:"/admin/new-subcollection",isLoading:t,error:a,data:b,columns:k,globalFilter:o,setGlobalFilter:d})},Cu=()=>{var m;const s=ee(),{user:t}=ae(u=>u.auth),[a,{isLoading:r}]=Xi(),{data:n}=as(),{data:l}=_s(),[i,c]=g.useState(""),[o,d]=g.useState("001");g.useEffect(()=>{if(!i||!(l!=null&&l.subcollections))return;const u=l.subcollections.filter(y=>y.collection._id===i);if(u.length===0){d("001");return}const j=(u.reduce((y,v)=>{const f=parseInt(v.popularityId,10);return f>y?f:y},0)+1).toString().padStart(3,"0");d(j)},[i,l]);const x=u=>{c(u)},p=async u=>{var j;u.preventDefault();const h=new FormData(u.target);if(!h.get("collection")){N.error("Please select a parent collection");return}if(!h.get("name")){N.error("Please enter a sub-collection name");return}try{await a({name:h.get("name").trim(),description:h.get("description"),collection:h.get("collection"),popularityId:o,createdBy:t==null?void 0:t._id}).unwrap(),N.success("Sub-collection created successfully!"),s("/admin/subcollections")}catch(y){N.error(((j=y==null?void 0:y.data)==null?void 0:j.message)||"Failed to create sub-collection")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Add Sub-Collection"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:p,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Add New Sub-Collection"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"collection",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),"Parent Collection"]}),e.jsxs(Le,{name:"collection",required:!0,onValueChange:x,children:[e.jsx(Fe,{className:"bg-transparent border",children:e.jsx(Oe,{placeholder:"Select a collection"})}),e.jsx(Ae,{className:"bg-background",children:(m=n==null?void 0:n.collections)==null?void 0:m.map(u=>e.jsx(ve,{className:"flex items-center gap-2 text-foreground",value:u._id,children:u.name},u._id))})]}),e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Sub-Collection Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter sub-collection name",required:!0}),e.jsxs(R,{htmlFor:"popularityId",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),"Popularity ID"]}),e.jsx(Q,{id:"popularityId",name:"popularityId",value:o,className:"bg-gray-100",disabled:!0}),i&&e.jsx("p",{className:"text-sm text-gray-500",children:"This ID is automatically generated based on existing sub-collections."}),e.jsx(R,{htmlFor:"description",className:"flex items-center gap-2 text-lg font-semibold",children:"Description"}),e.jsx(_e,{id:"description",name:"description",placeholder:"Enter sub-collection description",className:"h-32"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:r||!i,children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Creating Sub-Collection..."]}):"Create Sub-Collection"})})]})]})})})]})},ku=()=>{var d,x,p;const{id:s}=Se(),t=ee(),{user:a}=ae(m=>m.auth),[r,{isLoading:n}]=ec(),{data:l}=_s(),{data:i}=as(),c=(d=l==null?void 0:l.subcollections)==null?void 0:d.find(m=>m._id===s),o=async m=>{var j;m.preventDefault();const u=new FormData(m.target);if(!u.get("collection")){N.error("Please select a parent collection");return}if(!u.get("name")){N.error("Please enter a sub-collection name");return}const h=u.get("popularityId");if(!h||!/^\d{1,3}$/.test(h)){N.error("Popularity ID must be a number between 001-999");return}try{await r({id:s,name:u.get("name").trim(),description:u.get("description"),collection:u.get("collection"),popularityId:h.padStart(3,"0"),updatedBy:a==null?void 0:a._id}).unwrap(),N.success("Sub-collection updated successfully!"),t("/admin/subcollections")}catch(y){N.error(((j=y==null?void 0:y.data)==null?void 0:j.message)||"Failed to update sub-collection")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Update Sub-Collection"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:o,children:e.jsxs($,{className:"bg-background",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Update Sub-Collection"})}),e.jsxs(M,{className:"space-y-5",children:[e.jsxs(R,{htmlFor:"collection",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),"Parent Collection"]}),e.jsxs(Le,{name:"collection",defaultValue:(x=c==null?void 0:c.collection)==null?void 0:x._id,required:!0,children:[e.jsx(Fe,{className:"bg-transparent border",children:e.jsx(Oe,{placeholder:"Select a collection"})}),e.jsx(Ae,{className:"bg-background",children:(p=i==null?void 0:i.collections)==null?void 0:p.map(m=>e.jsx(ve,{className:"flex items-center gap-2 text-foreground",value:m._id,children:m.name},m._id))})]}),e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600"}),"Sub-Collection Name"]}),e.jsx(Q,{id:"name",name:"name",defaultValue:c==null?void 0:c.name,placeholder:"Enter sub-collection name",required:!0}),e.jsxs(R,{htmlFor:"popularityId",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),"Popularity ID"]}),e.jsx(Q,{id:"popularityId",name:"popularityId",type:"number",min:"001",max:"999",placeholder:"Enter popularity ID (001-999)",defaultValue:c==null?void 0:c.popularityId,required:!0}),e.jsx(R,{htmlFor:"description",className:"flex items-center gap-2 text-lg font-semibold",children:"Description"}),e.jsx(_e,{id:"description",name:"description",defaultValue:c==null?void 0:c.description,placeholder:"Enter sub-collection description",className:"h-32"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"submit",type:"submit",className:"w-auto",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin h-4 w-4 mr-2"}),"Updating Sub-Collection..."]}):"Update Sub-Collection"})})]})]})})})]})},Su=({email:s,onEmailChange:t,emailIsValid:a})=>e.jsxs($,{children:[e.jsx(H,{children:e.jsxs(re,{className:"text-background flex items-center gap-2 text-lg",children:[e.jsx(Wt,{className:"w-5 h-5 text-accent"}),"Contact Information"]})}),e.jsxs(M,{className:"px-3 md:px-5",children:[e.jsx(R,{className:"text-background",children:"Email Address"}),e.jsx(Q,{type:"email",placeholder:"Enter your email address",value:s,onChange:t,required:!0,className:"bg-transparent text-background border border-brand-end/50 placeholder:text-gray-300 mt-2"}),s&&!a&&e.jsx("p",{className:"text-sm text-red-400 mt-3",children:"Please enter a valid email address"}),s&&a&&e.jsx("p",{className:"text-xs md:text-sm text-blue-400 mt-3",children:"Order confirmation will be sent to this email address"})]})]}),_u="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='2.11676in'%20height='1.5in'%20viewBox='0%200%20152.407%20108'%3e%3cg%3e%3crect%20width='152.407'%20height='108'%20style='fill:%20none'/%3e%3cg%3e%3crect%20x='60.4117'%20y='25.6968'%20width='31.5'%20height='56.6064'%20style='fill:%20%23ff5f00'/%3e%3cpath%20d='M382.20839,306a35.9375,35.9375,0,0,1,13.7499-28.3032,36,36,0,1,0,0,56.6064A35.938,35.938,0,0,1,382.20839,306Z'%20transform='translate(-319.79649%20-252)'%20style='fill:%20%23eb001b'/%3e%3cpath%20d='M454.20349,306a35.99867,35.99867,0,0,1-58.2452,28.3032,36.00518,36.00518,0,0,0,0-56.6064A35.99867,35.99867,0,0,1,454.20349,306Z'%20transform='translate(-319.79649%20-252)'%20style='fill:%20%23f79e1b'/%3e%3cpath%20d='M450.76889,328.3077v-1.1589h.4673v-.2361h-1.1901v.2361h.4675v1.1589Zm2.3105,0v-1.3973h-.3648l-.41959.9611-.41971-.9611h-.365v1.3973h.2576v-1.054l.3935.9087h.2671l.39351-.911v1.0563Z'%20transform='translate(-319.79649%20-252)'%20style='fill:%20%23f79e1b'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Pu="/assets/visa-afyQHn1c.png",Iu="data:image/svg+xml,%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20x='0'%20y='0'%20viewBox='0%200%20468%20222.5'%20style='enable-background:new%200%200%20468%20222.5'%20xml:space='preserve'%3e%3cstyle%3e.st0{fill-rule:evenodd;clip-rule:evenodd;fill:%23635bff}%3c/style%3e%3cpath%20class='st0'%20d='M414%20113.4c0-25.6-12.4-45.8-36.1-45.8-23.8%200-38.2%2020.2-38.2%2045.6%200%2030.1%2017%2045.3%2041.4%2045.3%2011.9%200%2020.9-2.7%2027.7-6.5v-20c-6.8%203.4-14.6%205.5-24.5%205.5-9.7%200-18.3-3.4-19.4-15.2h48.9c0-1.3.2-6.5.2-8.9zm-49.4-9.5c0-11.3%206.9-16%2013.2-16%206.1%200%2012.6%204.7%2012.6%2016h-25.8zM301.1%2067.6c-9.8%200-16.1%204.6-19.6%207.8l-1.3-6.2h-22v116.6l25-5.3.1-28.3c3.6%202.6%208.9%206.3%2017.7%206.3%2017.9%200%2034.2-14.4%2034.2-46.1-.1-29-16.6-44.8-34.1-44.8zm-6%2068.9c-5.9%200-9.4-2.1-11.8-4.7l-.1-37.1c2.6-2.9%206.2-4.9%2011.9-4.9%209.1%200%2015.4%2010.2%2015.4%2023.3%200%2013.4-6.2%2023.4-15.4%2023.4zM223.8%2061.7l25.1-5.4V36l-25.1%205.3zM223.8%2069.3h25.1v87.5h-25.1zM196.9%2076.7l-1.6-7.4h-21.6v87.5h25V97.5c5.9-7.7%2015.9-6.3%2019-5.2v-23c-3.2-1.2-14.9-3.4-20.8%207.4zM146.9%2047.6l-24.4%205.2-.1%2080.1c0%2014.8%2011.1%2025.7%2025.9%2025.7%208.2%200%2014.2-1.5%2017.5-3.3V135c-3.2%201.3-19%205.9-19-8.9V90.6h19V69.3h-19l.1-21.7zM79.3%2094.7c0-3.9%203.2-5.4%208.5-5.4%207.6%200%2017.2%202.3%2024.8%206.4V72.2c-8.3-3.3-16.5-4.6-24.8-4.6C67.5%2067.6%2054%2078.2%2054%2095.9c0%2027.6%2038%2023.2%2038%2035.1%200%204.6-4%206.1-9.6%206.1-8.3%200-18.9-3.4-27.3-8v23.8c9.3%204%2018.7%205.7%2027.3%205.7%2020.8%200%2035.1-10.3%2035.1-28.2-.1-29.8-38.2-24.5-38.2-35.7z'/%3e%3c/svg%3e",Du="/assets/Paypal-BmYfvmyX.png",st={CREDIT_CARD:"Stripe",PAYPAL:"PayPal",COD:"COD"},Fu={theme:"stripe",variables:{colorPrimary:"#2563eb",colorDanger:"#FFDF00",fontFamily:"'Poppins', sans-serif",spacingUnit:"4px",borderRadius:"4px"},rules:{".Input":{border:"1px solid #334155",boxShadow:"none"},".Input:focus":{border:"1px solid #2563eb"},".Label":{color:"#d2d9e2",padding:"0px 0px 3px 3px"}}},Au=[{type:st.CREDIT_CARD,content:{images:[{src:_u,alt:"MasterCard",className:"h-8 w-auto"},{src:Pu,alt:"Visa",className:"h-8 w-auto"},{src:Iu,alt:"Stripe",className:"h-6 w-auto"}]}},{type:st.PAYPAL,content:{images:[{src:Du,alt:"PayPal",className:"h-20 w-auto"}]}}],Ln={EMAIL:"email",ADDRESS:{FULL_NAME:"full_name",CONTACT_NUMBER:"contact_number",ADDRESS_LINE1:"address_line1",ADDRESS_LINE2:"address_line2",CITY:"city",STATE:"state",POSTAL_CODE:"postal_code",COUNTRY:"country"}},St=()=>{const{data:s,refetch:t}=Nt(),{isAuthenticated:a}=ae(V=>V.auth),[r,n]=g.useState(""),[l,{isLoading:i}]=Br();g.useState(null);const[c,o]=g.useState(st.CREDIT_CARD),[d,x]=g.useState(null),[p,m]=g.useState(""),[u,{isLoading:h}]=zr(),{data:j,isLoading:y,isFetching:v,refetch:f}=Jt(void 0,{refetchOnMountOrArgChange:!0}),k=!r||(V=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(V))(r);g.useEffect(()=>{a&&t().then(()=>{s!=null&&s.email&&n(s.email)})},[a,s==null?void 0:s.email,t]);const b=V=>{n(V.target.value)},S=async V=>{var z;try{const G=await l(V._id).unwrap();G.success&&(N.success(G.message||"Address deleted successfully"),await f())}catch(G){N.error(((z=G==null?void 0:G.data)==null?void 0:z.message)||"Failed to delete address")}};return g.useEffect(()=>{if((j==null?void 0:j.length)>0){const V=j.find(z=>z.is_default)||j.find(z=>z._id===(d==null?void 0:d._id))||j[0];V&&x(V)}},[j]),{email:r,handleEmailChange:b,emailIsValid:k,user:s,isDeleting:i,paymentMethod:c,setPaymentMethod:o,selectedAddress:d,handleAddressSelect:V=>{const z=j.find(G=>G._id===V._id)||V;x(z)},createOrderData:(V,z,G,se,de,fe,he)=>({user:he._id,email:se,shippingAddress:de._id,orderItems:G.map(I=>({product:I._id||I.product,name:I.name,color:I.color,includes:I.includes,quantity:I.quantity,price:I.price,discount:I.discount||0,discountedPrice:I.discounted_price||I.price,image:I.image,isPreOrder:I.isPreOrder||!1,availabilityDate:I.availabilityDate})),paymentInfo:V,taxPrice:0,shippingPrice:0,totalPrice:z.toFixed(2),orderNotes:fe||"",paidAt:new Date().toISOString()}),orderNotes:p,setOrderNotes:m,userAddresses:j,isLoadingAddresses:y,isFetchingAddresses:v,isUpdatingDefault:h,formatAddress:V=>[V.address_line1,V.address_line2,V.city,V.state,V.postal_code,V.country].filter(Boolean).join(", "),handleMakeDefault:async(V,z)=>{var G;z.stopPropagation();try{const se=await u({id:V._id,addressData:{name:V.name,contact_number:V.contact_number,address_line1:V.address_line1,address_line2:V.address_line2,city:V.city,state:V.state,postal_code:V.postal_code,country:V.country,country_code:V.country_code,is_default:!0}}).unwrap();se.success&&(N.success(se.message),await f())}catch(se){console.error("Error setting default address:",se),N.error(((G=se==null?void 0:se.data)==null?void 0:G.message)||(se==null?void 0:se.message)||"Failed to set default address")}},refetchAddresses:f,handleDeleteAddress:S,handlePaymentMethodChange:(V,z)=>{z.preventDefault(),o(V)}}},Tu=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5",children:[e.jsx(Aa,{className:"w-14 h-14 text-gray-400 animate-bounce"}),e.jsx("h3",{className:"text-xl font-semibold mb-3 text-background",children:"No addresses found"}),e.jsx("p",{className:"text-sm text-gray-300 text-center",children:"Add a new address to continue with checkout and complete your purchase"})]}),Eu=()=>e.jsx(Ps,{height:"0px"}),Lu=({addr:s,selectedAddress:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:(t==null?void 0:t._id)===s._id,onChange:()=>{},className:`w-4 h-4 text-accent bg-transparent border-2 border-accent/50 \r
        focus:ring-accent focus:ring-offset-0 focus:ring-1 focus:ring-opacity-50 \r
        checked:bg-accent checked:border-accent \r
        accent-accent`,onClick:a=>a.stopPropagation()}),e.jsx("span",{className:"font-medium capitalize text-background",children:s.name||"Other"}),s.is_default&&e.jsx(oe,{variant:"info",children:"Default"}),(t==null?void 0:t._id)===s._id&&!s.is_default&&e.jsx(oe,{variant:"success",children:"Shipping Address"})]}),Ou=({addr:s,formatAddress:t})=>e.jsxs("div",{className:"flex items-baseline gap-2 mt-2 lg:ml-6",children:[e.jsx("span",{className:"text-blue-400 text-sm font-medium whitespace-nowrap",children:s.contact_number}),e.jsx("span",{className:"text-gray-300",children:""}),e.jsx("span",{className:"text-sm",children:t(s)})]}),Ru=({addr:s,handleDeleteClick:t,userName:a})=>e.jsxs("div",{className:"absolute right-4 top-6 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center gap-1",children:[e.jsx(et,{formFields:Ln.ADDRESS,isEdit:!0,editAddress:s,userName:a}),e.jsx(Ct,{onConfirm:()=>t(s),title:"Delete Address",description:e.jsxs(e.Fragment,{children:["Are you sure you want to delete"," ",e.jsxs("span",{className:"font-medium text-accent",children:[s.name||"Other"," "]}),"address? This action cannot be undone."]})})]}),$u=({selectedAddress:s,handleMakeDefault:t,isUpdatingDefault:a})=>e.jsx(O,{variant:"submit",onClick:r=>t(s,r),className:"w-full",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 animate-spin mr-2"}),"Setting as default..."]}):"Set as default address"}),Mu=({addr:s,selectedAddress:t,handleAddressSelect:a,handleDeleteClick:r,formatAddress:n,userName:l})=>e.jsx("div",{onClick:()=>a(s),className:`group relative rounded-lg transition-all duration-200 cursor-pointer p-4 text-background
      ${(t==null?void 0:t._id)===s._id?" border border-blue-500/50":s.is_default?" border border-brand-end/50":"hover:bg-brand-dark/20 border border-brand-end/50"}
    `,children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(Lu,{addr:s,selectedAddress:t}),e.jsx(Ou,{addr:s,formatAddress:n})]}),e.jsx(Ru,{addr:s,handleDeleteClick:r,userName:l})]})},s._id),Uu=({userName:s})=>{const{userAddresses:t,isLoadingAddresses:a,isFetchingAddresses:r,selectedAddress:n,handleAddressSelect:l,formatAddress:i,handleMakeDefault:c,isUpdatingDefault:o,handleDeleteAddress:d,isDeleting:x}=St();return e.jsxs($,{children:[e.jsxs(H,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5 text-accent"}),e.jsx(re,{className:"text-white text-lg",children:"Shipping Address"})]}),e.jsx(et,{formFields:Ln.ADDRESS,userName:s})]}),e.jsx(rs,{className:"text-gray-400 sr-only",children:"Enter your shipping address"})]}),e.jsx(M,{className:"px-3 md:px-5",children:a||r?e.jsx(Eu,{}):t!=null&&t.length?e.jsxs("div",{className:"space-y-3",children:[t==null?void 0:t.map(p=>e.jsx(Mu,{addr:p,selectedAddress:n,handleAddressSelect:l,handleDeleteClick:d,handleMakeDefault:c,formatAddress:i,userName:s},p._id)),n&&!n.is_default&&e.jsx($u,{selectedAddress:n,handleMakeDefault:c,isUpdatingDefault:o})]}):e.jsx(Tu,{})})]})},Qs=ss({reducerPath:"checkoutApi",baseQuery:ts({baseUrl:"/api/v1",credentials:"include",prepareHeaders:s=>s}),endpoints:s=>({createPayPalOrder:s.mutation({query:t=>({url:"/payment/create-paypal-order",method:"POST",body:t})}),capturePayPalOrder:s.mutation({query:t=>({url:`/payment/capture-paypal-order/${t}`,method:"POST"})}),getStripeApiKey:s.query({query:()=>"/stripeapikey"}),processStripePayment:s.mutation({query:t=>({url:"/payment/process",method:"POST",body:{amount:t}})}),getPayPalCredentials:s.query({query:()=>"/payment/paypal-credentials"}),processRefund:s.mutation({query:t=>({url:"/payment/refund",method:"POST",body:t}),async onQueryStarted(t,{dispatch:a,queryFulfilled:r}){try{await r,a(He.util.invalidateTags(["Product","Products"]))}catch{}}})})}),{useCreatePayPalOrderMutation:uh,useCapturePayPalOrderMutation:xh,useGetStripeApiKeyQuery:qu,useProcessStripePaymentMutation:Vu,useGetPayPalCredentialsQuery:zu,useProcessRefundMutation:Bu}=Qs,Wu=()=>e.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 border border-brand-end/50 rounded-md flex items-center justify-center",children:e.jsx(vr,{className:"w-8 h-8 text-accent"})}),e.jsx("p",{className:"text-accent text-sm leading-loose",children:"Please add items to your cart to proceed with payment"})]}),Hu=({total:s,email:t,selectedAddress:a,orderItems:r,orderNotes:n})=>{const l=Bl(),i=Wl(),c=ee(),[o,d]=g.useState(!1),[x,p]=g.useState(null),[m,u]=g.useState(!1),[h]=Vu(),[j]=Nn(),y=js(),{createOrderData:v}=St(),{user:f}=ae(b=>b.auth),w=g.useCallback(()=>{u(!0)},[]),k=async b=>{var S,_;if(b.preventDefault(),b.stopPropagation(),!(!l||!i||o)){if(!t||!a||!(r!=null&&r.length)||!f){N.error("Please fill in all required fields and ensure you're logged in");return}d(!0),p(null);try{const P=await h(s).unwrap();if(!P.success||!P.client_secret)throw new Error("Failed to create payment intent");const{error:D}=await i.submit();if(D)throw new Error(D.message);const{error:B,paymentIntent:X}=await l.confirmPayment({elements:i,clientSecret:P.client_secret,confirmParams:{return_url:`${window.location.origin}/payment/success`},redirect:"if_required"});if(B)throw new Error(B.message);if(X.status==="succeeded"){const V={method:"Stripe",transactionId:X.id,status:"Success",paidAt:new Date().toISOString()},z=v(V,s,r,t,a,n,f),G=await j(z).unwrap();if(G.success)y(Or()),N.success("Order placed successfully!"),c(`/order/${G.order._id}`);else throw new Error("Failed to create order")}else throw new Error("Payment was not successful")}catch(P){console.error("Payment/Order error:",P),p(((S=P.data)==null?void 0:S.message)||P.message||"An unexpected error occurred"),N.error(((_=P.data)==null?void 0:_.message)||P.message||"Payment failed. Please try again."),console.log("Order Items Structure:",r)}finally{d(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Hl,{onReady:w}),m&&e.jsx(O,{variant:"submit",onClick:k,disabled:o||!l||!i,className:"w-full",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 animate-spin mr-2"}),"Processing..."]}):`Pay $${s.toFixed(2)}`})]})},Gu=({total:s,email:t,selectedAddress:a,orderItems:r,orderNotes:n})=>{const{data:l}=qu(),[i,c]=g.useState(null);if(g.useEffect(()=>{l!=null&&l.stripeApiKey&&!i&&c(vi(l.stripeApiKey))},[l,i]),!i)return e.jsx("div",{className:"text-center py-4",children:"Loading payment system..."});if(!s||s<=0)return e.jsx(Wu,{});const o={mode:"payment",currency:"usd",amount:Math.round(s*100),payment_method_types:["card"],appearance:Fu};return e.jsx(zl,{stripe:i,options:o,children:e.jsx(Hu,{total:s,email:t,selectedAddress:a,orderItems:r,orderNotes:n})})},Ku=()=>e.jsxs("div",{className:"flex flex-col items-center text-center pt-5 space-y-3",children:[e.jsx("div",{className:"w-16 h-16 border border-brand-end/50 rounded-md flex items-center justify-center",children:e.jsx(vr,{className:"w-8 h-8 text-accent"})}),e.jsx("p",{className:"text-background text-sm",children:"Please add items to your cart to proceed with payment"})]}),Yu=()=>e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-brand-dark/90 p-6 rounded-lg shadow-xl text-center space-y-4 border border-brand-end/50",children:[e.jsx(ie,{className:"w-8 h-8 animate-spin mx-auto text-accent"}),e.jsx("p",{className:"text-white",children:"Processing your payment..."}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please don't close this window"})]})}),Qu=({total:s,email:t,selectedAddress:a,orderItems:r,orderNotes:n,onApprove:l})=>{const[{isResolved:i,isPending:c}]=Kl(),[o,d]=g.useState(0),[x,p]=g.useState(!1),[m,u]=g.useState(null),[h,j]=g.useState(!1),[y]=Nn(),v=ee(),f=js(),{user:w}=ae(D=>D.auth),{createOrderData:k}=St();g.useEffect(()=>{d(D=>D+1),u(null),j(!1),p(!1)},[s]),g.useEffect(()=>{if(m){const D=setTimeout(()=>u(null),5e3);return()=>clearTimeout(D)}},[m]),g.useEffect(()=>{const D=B=>{(x||h)&&(B.preventDefault(),B.returnValue="")};return window.addEventListener("beforeunload",D),()=>window.removeEventListener("beforeunload",D)},[x,h]);const b=()=>{if(!t||!a||!(r!=null&&r.length)||!w){const D="Please fill in all required fields and ensure you're logged in";return u(D),N.error(D),!1}if(s<=0){const D="Invalid order amount";return u(D),N.error(D),!1}return!0},S=async(D,B)=>{if(u(null),!b())return B.reject();j(!0);try{return B.order.create({purchase_units:[{amount:{currency_code:"USD",value:s.toFixed(2)},description:`Order for ${t}`}],application_context:{shipping_preference:"NO_SHIPPING",user_action:"PAY_NOW",brand_name:"World of Minifigs"}})}catch{j(!1);const V="Failed to initialize PayPal payment";return u(V),N.error(V),B.reject()}},_=async(D,B)=>{var X;if(!x){p(!0),u(null);try{const V=await B.order.capture();if(V.status!=="COMPLETED")throw new Error("Payment not completed");const z={method:"PayPal",transactionId:V.purchase_units[0].payments.captures[0].id,paypalOrderId:V.id,status:"Success",payerEmail:V.payer.email_address,paidAt:new Date().toISOString()},G=k(z,s,r,t,a,n,w),se=await y(G).unwrap();if(se.success)l&&l(se),f(Or()),N.success("Order placed successfully!"),v(`/order/${se.order._id}`);else throw new Error(se.message||"Failed to create order")}catch(V){console.error("Payment/Order error:",V);const z=((X=V.data)==null?void 0:X.message)||V.message||"Payment failed. Please try again.";u(z),N.error(z)}finally{p(!1),j(!1)}}},P=()=>{j(!1),u("Payment cancelled"),N.info("Payment cancelled"),p(!1)};return!i||c?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):!s||s<=0?e.jsx(Ku,{}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"text-center text-sm text-gray-400 py-2",children:["Complete your purchase securely with PayPal",e.jsx("br",{}),e.jsxs("h4",{className:"font-bold text-lg text-emerald-500 mt-2",children:["Total: $",s.toFixed(2)]})]}),x&&e.jsx(Yu,{}),e.jsx(Yl,{style:{layout:"vertical",color:"blue",shape:"rect",label:"pay",height:48},createOrder:S,onApprove:_,onCancel:P,disabled:x,forceReRender:[o,s]},o)]})},Ju=s=>{const{data:t,isLoading:a,isError:r}=zu();if(a)return e.jsx(Ps,{height:"h-40"});if(r||!(t!=null&&t.clientId))return console.warn("PayPal credentials not available"),e.jsx("div",{children:"PayPal configuration error"});const n={"client-id":t.clientId,currency:"USD",intent:"capture",components:"buttons","disable-funding":"card"};return e.jsx(Gl,{options:n,children:e.jsx(Qu,{...s})})},Zu=({paymentMethod:s,handlePaymentMethodChange:t,total:a,email:r,selectedAddress:n,orderItems:l,orderNotes:i,onSubmit:c,handleStripeSuccess:o,onPayPalApprove:d})=>e.jsxs($,{children:[e.jsx(H,{children:e.jsxs(re,{className:"text-background flex items-center gap-2 text-lg",children:[e.jsx(dt,{className:"w-5 h-5 text-accent"}),"Payment Details"]})}),e.jsxs(M,{className:"space-y-3 px-3 md:px-5",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Au.map(x=>e.jsx(O,{onClick:p=>t(x.type,p),type:"button",variant:s===x.type?"accent":"secondary",className:"hover:scale-100 transition-all duration-200",children:e.jsx("div",{className:"flex items-center",children:x.content.images.map((p,m)=>e.jsx("img",{src:p.src,alt:p.alt,className:p.className},m))})},x.type))}),s===st.CREDIT_CARD?e.jsx(Gu,{total:a,email:r,selectedAddress:n,orderItems:l,orderNotes:i,onSubmit:c,handleStripeSuccess:o}):e.jsx(Ju,{total:a,email:r,selectedAddress:n,orderItems:l,orderNotes:i,onApprove:d})]})]}),On=()=>{const s=js(),t=Te(),a=new URLSearchParams(t.search),r=a.get("mode"),n=a.get("externalCart"),l=ae(h=>h.cart.cartItems),i=ae(h=>h.cart.externalItems),c=ae(h=>h.buyNow.item),o=ae(Tr),d=ae(kc),x=g.useCallback(()=>{if(n)try{const h=JSON.parse(decodeURIComponent(n)),j=(Array.isArray(h)?h:[h]).map(y=>({product:y._id,name:y.product_name,image:y.image,price:y.price,discounted_price:y.discounted_price??y.price,discount:y.discount??0,color:y.color,includes:y.includes,quantity:y.quantity??1,stock:y.stock}));s(r==="buy_now"?am(j):_c(j))}catch(h){console.error("Invalid externalCart payload:",h),N.error("Failed to load external cart data.")}},[n,r,s]);g.useEffect(()=>{x()},[x]);const p=g.useMemo(()=>r==="buy_now"?c?[c]:[]:[...l,...i],[r,c,l,i]),m=g.useMemo(()=>r==="buy_now"?c?c.quantity*(c.discounted_price??c.price):0:o+d,[r,c,o,d]),u=g.useCallback((h,j)=>{const y=i.find(v=>v.product===h);if(y){j<1?s($r(h)):j>y.stock?N.error(`Only ${y.stock} items available in stock`):s(Rr({_id:h,quantity:j}));return}if(r==="buy_now"){if(j<1){N.error("Quantity cannot be less than 1");return}if(c&&j>c.stock){N.error(`Only ${c.stock} items available in stock`);return}s(tm(j));return}j<1?s(Er(h)):s(Lr({product:h,quantity:j}))},[s,i,c,r]);return{mode:r,displayItems:p,subtotal:m,displayTotal:m,handleQuantityUpdate:u}},Xu=({subtotal:s,total:t})=>e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs("div",{className:"flex justify-between text-gray-400 text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",s.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-white font-medium pt-5 border-t border-brand-end/50",children:[e.jsx("span",{children:"Total"}),e.jsx("div",{children:e.jsxs("span",{className:"text-emerald-400 text-xl",children:["$",t.toFixed(2)]})})]})]}),ex=({onOrderNotesChange:s,orderNotes:t})=>{const{displayItems:a,subtotal:r,displayTotal:n,handleQuantityUpdate:l}=On();return a!=null&&a.length?e.jsxs($,{className:"bg-brand-dark/20 border border-brand-end/50",children:[e.jsx(H,{children:e.jsxs(re,{className:"text-white flex items-center gap-2 text-lg",children:[e.jsx(Ie,{className:"w-5 h-5 text-accent"}),"Order Summary"]})}),e.jsx(M,{className:"px-3 md:px-5",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("ul",{className:"space-y-6",children:a.map(i=>e.jsx(Fr,{item:i,onQuantityUpdate:(c,o)=>l(c,o)},i.product))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(_e,{placeholder:"Add any special instructions or notes for your order...",value:t,onChange:i=>s(i.target.value),className:"bg-transparent border-brand-end/50 min-h-[100px] text-white placeholder:text-white/50 focus-visible:ring-accent"}),e.jsx(Xu,{subtotal:r,total:n})]})]})})]}):e.jsx($,{className:"bg-brand-dark/20 border border-brand-end/50",children:e.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ie,{className:"w-12 h-12 text-accent mb-4"}),e.jsx("p",{className:"text-white text-center",children:"No items to display"})]})})},Et=({title:s,height:t="h-[200px]"})=>e.jsxs($,{className:"bg-brand-dark/20 border border-brand-end/50",children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-6 w-48"})," "]})}),e.jsxs(M,{children:[s==="Contact"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{className:"w-full h-8"})," ",e.jsx(C,{className:"w-3/4 h-4"})," "]}),s==="Shipping"&&e.jsx("div",{className:"space-y-4",children:[1,2].map(a=>e.jsxs("div",{className:"p-4 border border-brand-end/50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 rounded-full"})," ",e.jsx(C,{className:"w-48 h-5"})," "]}),e.jsxs("div",{className:"lg:ml-6 space-y-2",children:[e.jsx(C,{className:"w-28 h-4"})," ",e.jsx(C,{className:"w-full h-4"})," "]})]},a))}),s==="Payment"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(C,{className:"w-full h-12"})," ",e.jsx(C,{className:"w-full h-12"})," "]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{className:"w-full h-10"})," ",e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(C,{className:"w-full h-10"})," ",e.jsx(C,{className:"w-full h-10"})," "]}),e.jsx(C,{className:"w-full h-12"})," "]})]})]})]}),sx=()=>e.jsxs("div",{className:"flex gap-3 items-center pb-5 border-b border-brand-end/50 last:border-0",children:[e.jsx(C,{className:"w-20 h-20 rounded-lg"})," ",e.jsxs("div",{className:"flex-1 flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(C,{className:"h-5 w-3/4"})," ",e.jsx(C,{className:"h-4 w-1/2"})," ",e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-24"})," "]})]}),e.jsx(C,{className:"h-5 w-20"})," "]})]}),tx=()=>e.jsxs($,{className:"bg-brand-dark/20 border border-brand-end/50",children:[e.jsx(H,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(C,{className:"h-6 w-36"})})}),e.jsxs(M,{className:"space-y-6",children:[[1,2].map(s=>e.jsx(sx,{},s)),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{className:"w-full h-16"})," ",e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(C,{className:"h-4 w-16"})," ",e.jsx(C,{className:"h-4 w-24"})," "]}),e.jsxs("div",{className:"flex justify-between pt-5 border-t border-brand-end/50",children:[e.jsx(C,{className:"h-4 w-16"})," ",e.jsx(C,{className:"h-4 w-24"})," "]})]})]})]})]}),ax=()=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 p-5",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(Et,{title:"Contact"}),e.jsx(Et,{title:"Shipping"}),e.jsx(Et,{title:"Payment"})]}),e.jsx("div",{className:"lg:sticky lg:top-24 h-fit",children:e.jsx(tx,{})})]}),rx=()=>{const{email:s,handleEmailChange:t,emailIsValid:a,user:r,orderNotes:n,setOrderNotes:l,isLoading:i,paymentMethod:c,handlePaymentMethodChange:o,selectedAddress:d,processing:x,error:p,handleStripePayment:m,handleSuccessfulPayment:u}=St(),{displayItems:h,displayTotal:j}=On();return i?e.jsx(ax,{}):e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 p-3 md:p-5",children:[e.jsxs("form",{className:"space-y-5",children:[e.jsx(Su,{email:s,onEmailChange:t,emailIsValid:a}),e.jsx(Uu,{userName:r==null?void 0:r.name}),e.jsx(Zu,{paymentMethod:c,handlePaymentMethodChange:o,total:j,email:s,selectedAddress:d,orderItems:h,orderNotes:n,processing:x,error:p,onStripePayment:m,onPaymentSuccess:u})]}),e.jsx("div",{className:"lg:sticky lg:top-24 h-fit",children:e.jsx(ex,{onOrderNotesChange:l,orderNotes:n})})]})]})},nx=["Changed my mind about the purchase","Found a better price elsewhere","Ordered by mistake","Shipping time is too long","Payment issues","Ordered wrong item/size","Other"],lx=({open:s,onOpenChange:t,orderId:a,selectedReasons:r,otherReason:n,isProcessingRefund:l,handleReasonChange:i,handleCancelOrder:c,setOtherReason:o,isOtherSelected:d,isCancelButtonDisabled:x})=>e.jsx(Ke,{open:s,onOpenChange:t,children:e.jsxs(qe,{children:[e.jsxs(Ve,{children:[e.jsx(ze,{children:"Cancel Order"}),e.jsx(ns,{className:"text-gray-300",children:"Please select reason(s) for cancelling your order."})]}),nx.map(p=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(Ue,{id:p,checked:r.includes(p),onCheckedChange:()=>i(p),className:"border-background"}),e.jsx(R,{htmlFor:p,className:"text-background",children:p})]}),p==="Other"&&d&&e.jsx("div",{className:"mt-2 ml-7",children:e.jsx(Q,{placeholder:"Please specify your reason",value:n,onChange:m=>o(m.target.value)})})]},p)),e.jsxs(qs,{children:[e.jsx(O,{variant:"secondary",onClick:()=>t(!1),children:"Cancel"}),e.jsx(O,{variant:"destructive",onClick:()=>c(a,t),disabled:x,className:"flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 animate-spin"}),"Cancelling..."]}):"Confirm"})]})]})}),ix=({order:s,statusConfig:t,StatusIcon:a,setShowCancelDialog:r})=>e.jsx($,{children:e.jsx(H,{children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-brand-dark border border-brand-end/50",children:e.jsx(a,{className:`w-7 h-7 ${t.color}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs(re,{className:"text-sm md:text-lg text-background",children:["Order #",s._id]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm text-gray-300",children:["Placed on ",Me(new Date(s.createdAt),"PPP")]}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsxs("p",{className:"text-sm text-gray-300",children:[s.orderItems.length," ",s.orderItems.length===1?"item":"items"]})]})]})]}),s.orderStatus==="Pending"&&e.jsx(O,{variant:"destructive",onClick:()=>r(!0),className:"hidden sm:flex",children:"Cancel Order"})]}),s.orderStatus==="Pending"&&e.jsx(O,{variant:"destructive",onClick:()=>r(!0),className:"sm:hidden mt-3",children:"Cancel Order"})]})})}),cx=({order:s,filteredOrderStatus:t})=>e.jsx($,{children:e.jsx(M,{className:"p-4",children:e.jsx("div",{className:"flex justify-between items-center",children:t.map((a,r)=>{const n=t.map(c=>c.value),l=r<=n.indexOf(s.orderStatus)||s.orderStatus==="Cancelled"&&r===0,i=a.icon;return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors duration-200
                ${l?`bg-brand-dark/50 ${a.color}`:"bg-brand-dark/50 text-gray-400"}`,children:e.jsx(i,{className:"w-5 h-5"})}),e.jsx("span",{className:`text-sm ${l?a.color:"text-gray-400"}`,children:a.value})]},a.id)})})})}),ox=({order:s})=>{const t=Me(new Date(s.cancelledAt),"PPP 'at' p");return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-red-500 rounded-t-md"}),e.jsx($,{className:"text-background",children:e.jsx(M,{className:"pt-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-1",children:e.jsx(it,{className:"text-red-400 w-5 h-5","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-md md:text-lg font-semibold",children:["Order ",e.jsx("span",{className:"text-red-400",children:"Cancelled"})," on"," ",t]}),s!=null&&s.cancellationReason?e.jsxs("p",{className:"mt-2 text-sm text-gray-300",children:[e.jsx("strong",{children:"Reason:"})," ",s.cancellationReason]}):e.jsx("p",{className:"mt-2 text-sm text-gray-300 italic",children:"No reason provided."})]})]})})})]})},dx=({orderItems:s})=>e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Os,{className:"w-6 h-6 text-blue-400"}),e.jsx("h3",{className:"text-xl font-bold text-background",children:"Order Items"})]})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-4",children:s.map((t,a)=>e.jsxs("div",{className:"flex items-start gap-3 border-b border-brand-end/50 rounded-lg pb-5 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"relative bg-brand-dark rounded-lg overflow-hidden",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-32 h-32 object-cover"}),t.price>t.discountedPrice&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsxs(oe,{className:"bg-accent text-foreground",children:[t.discount,"% OFF"]})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-1",children:[e.jsx("p",{className:"font-semibold text-md md:text-lg text-background line-clamp-1",children:t.name}),e.jsxs("p",{className:"hidden sm:block font-bold text-lg text-emerald-400",children:["$",(t.quantity*t.discountedPrice).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center mt-1 gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-300",children:["$",t.discountedPrice.toFixed(2)," each"]}),t.price>t.discountedPrice&&e.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["$",t.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex flex-col text-sm text-gray-300 space-y-1 mt-1",children:[t.color&&e.jsx("span",{children:t.color}),t.includes&&e.jsx("span",{className:"line-clamp-1",children:t.includes}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-start",children:[e.jsxs("span",{children:["Quantity: ",t.quantity]}),e.jsxs("span",{className:"sm:hidden font-bold text-emerald-400 text-lg",children:["$",(t.quantity*t.discountedPrice).toFixed(2)]})]})]})]})]},a))})})]}),mx=({shippingAddress:s,orderNotes:t,shippingInfo:a,orderStatus:r})=>{const n=[{section:[{label:"Contact Number",value:s.contact_number||"N/A"},{label:"Address",value:`${s.address_line1}${s.address_line2?`, ${s.address_line2}`:""}`}]},{section:[{label:"City & State",value:`${s.city}, ${s.state}`},{label:"Country",value:s.country}]},{section:[{label:"Postal Code",value:s.postal_code}]}],l=[{label:"Courier Service",value:a==null?void 0:a.courier,colSpan:1},{label:"Tracking Number",value:a==null?void 0:a.trackingNumber,colSpan:1},{label:"Track Package",value:a==null?void 0:a.trackingLink,colSpan:2,isLink:!0},{label:"Shipped On",value:a!=null&&a.shippedAt?Me(new Date(a.shippedAt),"PPP"):null,colSpan:1,icon:e.jsx(br,{className:"w-3 h-3"})},{label:"Additional Information",value:a==null?void 0:a.additionalInfo,colSpan:2,icon:e.jsx(Es,{className:"w-3 h-3"})}],i=({label:o,value:d})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:o}),e.jsx("p",{className:"font-medium mt-1 text-background",children:d})]},o),c=({label:o,value:d,colSpan:x,isLink:p,icon:m})=>d?e.jsxs("div",{className:`${x===2?"md:col-span-2":""}`,children:[e.jsxs("p",{className:"text-sm text-gray-300 flex items-center gap-1",children:[m,o]}),e.jsx("div",{className:"font-medium mt-1 text-background",children:p?e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline flex items-center gap-1",children:d}):d})]},o):null;return e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-6 h-6 text-green-500"}),e.jsx("h3",{className:"text-lg font-semibold text-background",children:"Shipping Details"})]})}),e.jsxs(M,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:n.map((o,d)=>e.jsx("div",{className:"space-y-5",children:o.section.map(i)},d))}),a&&(r==="Shipped"||r==="Delivered")&&e.jsxs("div",{className:"mt-5 border-t border-brand-end/50 pt-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ds,{className:"w-5 h-5 text-blue-400"}),e.jsx("h4",{className:"text-lg font-semibold text-background",children:"Tracking Information"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 pt-3",children:l.map(c)})]}),t&&e.jsx("div",{className:"mt-5 border-t border-brand-end/50 pt-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yr,{className:"w-4 h-4 text-accent"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Order Notes"})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(Nr,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-background leading-6",children:t})]})]})})]})]})},ux=({user:s})=>e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-background",children:"Customer Details"})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Name"}),e.jsx("p",{className:"font-medium mt-1 text-background",children:s.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Email"}),e.jsx("p",{className:"font-medium mt-1 text-background",children:s.email})]}),s.contact_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Phone Number"}),e.jsx("p",{className:"font-medium mt-1 text-background",children:s.contact_number})]})]})})]}),xx=({paymentInfo:s,totalPrice:t,taxPrice:a,shippingPrice:r})=>e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-background",children:"Payment Summary"})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Method"}),e.jsx("span",{className:"font-medium text-background",children:s==null?void 0:s.method})]}),e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",(t-(r+a)).toFixed(2)]})]}),e.jsx("div",{className:"border-t border-brand-end/50 pt-3",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{className:"text-background",children:"Total"}),e.jsxs("span",{className:"text-emerald-400",children:["$",t.toFixed(2)]})]})})]})})]}),hx=()=>e.jsx($,{className:"bg-brand-dark/20 border border-brand-end/50",children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(C,{className:"p-2.5 h-12 w-12 rounded-xl"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(C,{className:"h-6 w-64"}),e.jsx("div",{className:"flex flex-col mt-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-3 w-32 sm:w-36"}),e.jsx(C,{className:"h-3 w-16"})]})})]})]}),e.jsx(C,{className:"hidden sm:block h-10 w-32"})]}),e.jsx(C,{className:"sm:hidden h-10 w-full"})]})})}),px=()=>e.jsx($,{className:"bg-brand-dark/20 border border-brand-end/50",children:e.jsx(M,{className:"p-4",children:e.jsx("div",{className:"flex justify-between items-center",children:[...Array(4)].map((s,t)=>e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(C,{className:"w-10 h-10 rounded-full"}),e.jsx(C,{className:"h-4 w-16"})]},t))})})}),gx=()=>e.jsxs($,{className:"bg-brand-dark/20 border border-brand-end/50",children:[e.jsx(H,{children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(C,{className:"h-7 w-40"})})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-4",children:[...Array(2)].map((s,t)=>e.jsxs("div",{className:"flex items-start gap-3 border-b border-brand-end/50 pb-5 last:border-b-0 last:pb-0",children:[e.jsx("div",{className:"relative bg-brand-dark rounded-lg overflow-hidden",children:e.jsx(C,{className:"w-32 h-32"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-1",children:[e.jsx(C,{className:"h-6 w-48"}),e.jsx(C,{className:"hidden sm:block h-5 w-24"})]}),e.jsxs("div",{className:"flex items-center mt-5 gap-2",children:[e.jsx(C,{className:"h-4 w-20"}),e.jsx(C,{className:"h-3 w-16"})]}),e.jsxs("div",{className:"flex flex-col space-y-3 mt-5",children:[e.jsx(C,{className:"h-4 w-32"}),e.jsx(C,{className:"h-4 w-40"})]})]})]},t))})})]}),jx=()=>e.jsxs($,{className:"bg-brand-dark/20 border border-brand-end/50",children:[e.jsx(H,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(C,{className:"h-6 w-36"})})}),e.jsxs(M,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(C,{className:"h-4 w-28"}),e.jsx(C,{className:"h-5 w-40 mt-3"})]}),e.jsxs("div",{children:[e.jsx(C,{className:"h-4 w-20"}),e.jsx(C,{className:"h-5 w-full mt-1"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(C,{className:"h-4 w-24"}),e.jsx(C,{className:"h-5 w-40 mt-1"})]}),e.jsxs("div",{children:[e.jsx(C,{className:"h-4 w-20"}),e.jsx(C,{className:"h-5 w-28 mt-1"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(C,{className:"h-4 w-24"}),e.jsx(C,{className:"h-5 w-20 mt-1"})]})})]}),e.jsxs("div",{className:"mt-5 border-t border-brand-end/50 pt-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(C,{className:"w-5 h-5 rounded-full"}),e.jsx(C,{className:"h-6 w-40"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 pt-3",children:[...Array(4)].map((s,t)=>e.jsxs("div",{className:t>=2?"md:col-span-2":"",children:[e.jsx(C,{className:"h-4 w-28"}),e.jsx(C,{className:"h-5 w-full mt-1"})]},t))})]}),e.jsx("div",{className:"mt-5 border-t border-brand-end/50 pt-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 rounded-full"}),e.jsx(C,{className:"h-4 w-24"})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(C,{className:"w-4 h-4 mt-0.5 flex-shrink-0 rounded-full"}),e.jsx(C,{className:"h-16 w-full"})]})]})})]})]}),fx=()=>e.jsxs($,{className:"bg-brand-dark/20 border border-brand-end/50",children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 rounded-full"}),e.jsx(C,{className:"h-6 w-36"})]})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,t)=>e.jsxs("div",{children:[e.jsx(C,{className:"h-4 w-16"}),e.jsx(C,{className:"h-5 w-full mt-1"})]},t))})})]}),bx=()=>e.jsxs($,{className:"bg-brand-dark/20 border border-brand-end/50",children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 rounded-full"}),e.jsx(C,{className:"h-6 w-36"})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(C,{className:"h-5 w-16"}),e.jsx(C,{className:"h-5 w-20"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(C,{className:"h-5 w-20"}),e.jsx(C,{className:"h-5 w-20"})]}),e.jsx("div",{className:"border-t border-brand-end/50 pt-3",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(C,{className:"h-6 w-16"}),e.jsx(C,{className:"h-6 w-24"})]})})]})})]}),yx=()=>e.jsx("div",{className:"px-5 py-8",children:e.jsxs("div",{className:"space-y-5",children:[e.jsx(hx,{}),e.jsx(px,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsx(gx,{}),e.jsx(jx,{})]}),e.jsxs("div",{className:"space-y-3 lg:sticky lg:top-24 h-fit",children:[e.jsx(fx,{}),e.jsx(bx,{})]})]})]})}),Rn=()=>{var ne;const{data:s,isLoading:t,error:a}=vn(),[r,n]=ms(),l=r.get("status"),i=r.get("reviewTab"),c=ee(),[o,d]=g.useState(l||"Pending"),[x,p]=g.useState(i||"pending"),[m,u]=g.useState(window.innerWidth<768),[h,j]=g.useState("All Orders"),[y,v]=g.useState(null),[f,w]=g.useState(!1),{data:k}=aa(y,{skip:!y||!f||y==="undefined"});g.useEffect(()=>{l&&d(l),i&&p(i)},[l,i]),g.useEffect(()=>{const L=()=>{u(window.innerWidth<1e3)};return window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]),g.useEffect(()=>{if(o==="all"||!o)j("All Orders");else{const L=ke.find(q=>q.value===o);L&&j(L.label)}},[o]);const b=g.useMemo(()=>s!=null&&s.data?s.data.reduce((L,q)=>{const J=q.orderStatus;return J==="Delivered"&&(L["To Review"]||(L["To Review"]={pending:[],history:[]}),q.isReviewed?L["To Review"].history.push(q):L["To Review"].pending.push(q)),L[J]||(L[J]=[]),L[J].push(q),L},{}):{},[s]),S=g.useMemo(()=>ke.filter(L=>!["Cancelled","On Hold"].includes(L.value)),[]),_=g.useMemo(()=>ke.filter(L=>["Cancelled","On Hold"].includes(L.value)),[]),P=g.useMemo(()=>[{id:"all",value:"all",label:"All Orders",icon:Ie},...ke],[]),D=g.useMemo(()=>[{id:"all",value:"all",label:"All Orders"},...ke].map(q=>{var J,Ne,$e;return{...q,count:q.value==="all"?((J=s==null?void 0:s.data)==null?void 0:J.length)||0:q.value==="To Review"?((Ne=b["To Review"])==null?void 0:Ne.pending.length)||0:(($e=b[q.value])==null?void 0:$e.length)||0}}),[b,s]),B=L=>{d(L),n({status:L})},X=L=>{if(B(L),L==="all")j("All Orders");else{const q=ke.find(J=>J.value===L);q&&j(q.label)}},V=L=>{p(L),n({status:"To Review",reviewTab:L})},z=L=>ke.find(q=>q.value===L)||{color:"text-gray-400",bgColor:"bg-gray-500/20"},G=g.useMemo(()=>ke.filter(L=>["Pending","Processing","Shipped","Delivered"].includes(L.value)),[]),{id:se}=Se(),{data:de,isLoading:fe,error:he}=wd(se,{skip:!se||se==="undefined"}),I=(ne=de==null?void 0:de.data)==null?void 0:ne.orderStatus,U=g.useMemo(()=>z(I),[I]),Y=U==null?void 0:U.icon,te=I==="Cancelled",[pe,be]=g.useState([]),[ue,xe]=g.useState(""),[ye,{isLoading:Pe}]=Bu(),we=L=>{be(q=>q.includes(L)?(L==="Other"&&xe(""),q.filter(J=>J!==L)):[...q,L])},Ce=async(L,q)=>{var J;if(pe.length>0){const $e=pe.map(Ee=>Ee==="Other"?`Other: ${ue}`:Ee).join(", ");try{await ye({orderId:L,reason:$e}).unwrap(),N.success("Order cancelled and refund initiated successfully"),q(!1),c("/my-orders?status=Cancelled")}catch(Ee){N.error(((J=Ee==null?void 0:Ee.data)==null?void 0:J.message)||"Failed to process refund")}}},Re=L=>{L&&c(`/order/${L}`)},We=(L,q)=>{L&&(q?(v(L),w(!0)):Re(L))},E=()=>{w(!1),v(null)},F=()=>{w(!1)},A=pe.includes("Other"),W=pe.length===0||A&&!ue.trim()||Pe;return{orders:(s==null?void 0:s.data)||[],ordersByStatus:b,isLoading:t,error:a,selectedStatus:o,selectedReviewTab:x,statusesWithCounts:D,handleStatusChange:B,handleReviewTabChange:V,getStatusConfig:z,filteredOrderStatus:G,orderDetails:de==null?void 0:de.data,isLoadingDetails:fe,errorDetails:he,statusConfig:U,StatusIcon:Y,isOrderCancelled:te,selectedReasons:pe,otherReason:ue,isProcessingRefund:Pe,handleReasonChange:we,handleCancelOrder:Ce,setOtherReason:xe,isOtherSelected:A,isCancelButtonDisabled:W,selectedOrderId:y,showReviewDetails:f,reviewData:k,handleOrderClick:Re,handleOrderCardClick:We,handleReviewDetailsClose:E,handleReviewEditClick:F,setShowReviewDetails:w,isMobile:m,selectedLabel:h,mainStatus:S,dropdownStatus:_,allStatuses:P,handleTabChange:X}},Nx=()=>{const[s,t]=g.useState(!1),{orderDetails:a,isLoadingDetails:r,errorDetails:n,statusConfig:l,StatusIcon:i,isOrderCancelled:c,filteredOrderStatus:o,selectedReasons:d,otherReason:x,isProcessingRefund:p,handleReasonChange:m,handleCancelOrder:u,setOtherReason:h,isOtherSelected:j,isCancelButtonDisabled:y}=Rn();return r?e.jsx(yx,{}):n?e.jsx(je,{title:"Error Loading Order",message:"There was a problem loading the order details. Please try again later."}):!a||Object.keys(a).length===0?e.jsx(je,{title:"Order Not Found",message:"We couldn't find the order you're looking for. Please check your order ID and try again."}):e.jsxs(e.Fragment,{children:[e.jsx(le,{title:`Order #${a._id}`}),e.jsxs("div",{className:"px-5 py-8",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx(ix,{order:a,statusConfig:l,StatusIcon:i,setShowCancelDialog:t}),!c&&e.jsx(cx,{order:a,filteredOrderStatus:o}),c&&e.jsx(ox,{order:a}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsx(dx,{orderItems:a.orderItems}),e.jsx(mx,{shippingAddress:a.shippingAddress,orderNotes:a.orderNotes,shippingInfo:a.shippingInfo,orderStatus:a.orderStatus})]}),e.jsxs("div",{className:"space-y-3 lg:sticky lg:top-24 h-fit",children:[e.jsx(ux,{user:a.user}),e.jsx(xx,{paymentInfo:a.paymentInfo,totalPrice:a.totalPrice,taxPrice:a.taxPrice,shippingPrice:a.shippingPrice})]})]})]}),e.jsx(lx,{open:s,onOpenChange:t,orderId:a._id,selectedReasons:d,otherReason:x,isProcessingRefund:p,handleReasonChange:m,handleCancelOrder:u,setOtherReason:h,isOtherSelected:j,isCancelButtonDisabled:y})]})]})},na=Ql,_t=g.forwardRef(({className:s,...t},a)=>e.jsx(wr,{ref:a,className:K("inline-flex h-10 items-center justify-center rounded-md bg-brand-dark/50 p-1 text-muted-foreground",s),...t}));_t.displayName=wr.displayName;const xs=g.forwardRef(({className:s,...t},a)=>e.jsx(Cr,{ref:a,className:K("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm gap-2 hover:bg-brand-start text-background",s),...t}));xs.displayName=Cr.displayName;const ps=g.forwardRef(({className:s,...t},a)=>e.jsx(kr,{ref:a,className:K("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));ps.displayName=kr.displayName;const vx=()=>e.jsxs("div",{className:"rounded-lg border border-brand-end/50 bg-brand-dark/20 overflow-hidden",children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-10 w-10 rounded-xl"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"h-6 w-64"}),e.jsx(C,{className:"h-3 w-24"})]})]}),e.jsx(C,{className:"hidden sm:block h-8 w-28 rounded-full"})]})}),e.jsx("div",{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-between pt-4 border-t border-brand-end/50",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 order-2 sm:order-1 w-full sm:w-auto",children:[e.jsx(C,{className:"h-4 w-16"}),e.jsx(C,{className:"sm:hidden h-8 w-28 rounded-full"})]}),e.jsx("div",{className:"flex justify-between sm:block order-1 sm:order-2",children:e.jsx(C,{className:"h-6 w-24"})})]})})]}),wx=()=>e.jsxs("div",{className:"w-full flex items-center justify-between p-3 bg-brand-dark/20 rounded-lg border border-brand-end/50 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 rounded-full"}),e.jsx(C,{className:"h-5 w-40"})]}),e.jsx(C,{className:"h-4 w-4"})]}),Cx=()=>e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 mb-8",children:[e.jsx(C,{className:"h-8 w-40"}),e.jsx(C,{className:"h-5 w-32"})]}),kx=()=>{const[s,t]=g.useState(window.innerWidth<1e3);g.useEffect(()=>{const r=()=>{t(window.innerWidth<1e3)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const a=[...Array(4)];return e.jsxs("div",{className:"px-5 py-8",children:[e.jsx(Cx,{}),e.jsxs(na,{defaultValue:"loading",children:[s?e.jsx(wx,{}):e.jsxs(_t,{className:"grid grid-cols-7 gap-2 bg-gray-900/50",children:[e.jsx(C,{className:"h-8"}),[...Array(5)].map((r,n)=>e.jsx(C,{className:"h-8"},n)),e.jsx(C,{className:"h-8"})]}),e.jsx(ps,{value:"loading",className:"mt-5",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.map((r,n)=>e.jsx(vx,{},n))})})]})]})},Sx=({totalOrders:s})=>e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 mb-8",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-background",children:"My Orders"}),e.jsxs("div",{className:"text-accent text-sm font-medium",children:["Total Orders: ",s]})]}),_x=({statusParam:s,selectedLabel:t,totalOrders:a,ordersByStatus:r,onTabChange:n,allStatuses:l})=>{const i=s&&s!=="all"?l.find(o=>o.value===s):{value:"all",label:"All Orders",icon:Ie},c=()=>{if(i){const o=i.icon||Ie;return e.jsx(o,{className:"w-5 h-5 mr-2"})}return e.jsx(Ie,{className:"w-5 h-5 mr-2"})};return e.jsxs(Le,{value:s||"all",onValueChange:n,children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-center",children:[c(),e.jsxs(Oe,{placeholder:"Select status",children:[t,s==="all"&&a>0&&e.jsx("span",{className:"ml-1 text-xs bg-accent px-1.5 py-0.5 rounded-full text-foreground",children:a})]})]})}),e.jsx(Ae,{children:l.map(o=>{var m;const d=o.value==="all"||o.value==="To Review"?!0:((m=r[o.value])==null?void 0:m.length)>0,p=(()=>{var u,h,j;return o.value==="all"&&a>0?a:o.value==="To Review"&&((h=(u=r["To Review"])==null?void 0:u.pending)==null?void 0:h.length)>0?r["To Review"].pending.length:((j=r[o.value])==null?void 0:j.length)>0?r[o.value].length:null})();return e.jsx(ve,{value:o.value,disabled:o.value!=="all"&&!d,className:"py-3 focus:bg-brand-end/50 focus:text-background",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[o.icon&&e.jsx(o.icon,{className:`w-5 h-5 ${o.color||""}`}),e.jsx("span",{children:o.label})]}),p&&e.jsx("span",{className:"ml-3 text-xs bg-accent px-1.5 py-0.5 rounded-full text-foreground",children:p})]})},o.id||o.value)})})]})},Px=({totalOrders:s,ordersByStatus:t,statusParam:a,onTabChange:r,isMobile:n,selectedLabel:l,mainStatus:i,dropdownStatus:c,allStatuses:o,handleTabChange:d})=>n?e.jsx(_x,{statusParam:a,selectedLabel:l,totalOrders:s,ordersByStatus:t,onTabChange:d||r,allStatuses:o}):e.jsxs(_t,{className:"grid grid-cols-7 gap-2",children:[e.jsxs(xs,{value:"all",onClick:()=>(d||r)("all"),children:["All Orders",e.jsx("span",{className:"ml-1 text-xs bg-accent text-foreground px-1.5 py-0.5 rounded-full",children:s})]}),i.map(x=>{var m,u;const p=x.value==="To Review"?!0:((m=t[x.value])==null?void 0:m.length)>0;return e.jsxs(xs,{value:x.value,disabled:x.value!=="To Review"&&!p,onClick:()=>(d||r)(x.value),children:[x.icon&&e.jsx(x.icon,{className:`w-4 h-4 ${x.color}`}),e.jsx("span",{children:x.label}),x.value!=="To Review"&&((u=t[x.value])==null?void 0:u.length)>0&&e.jsx("span",{className:"ml-1 text-xs bg-accent px-1.5 py-0.5 rounded-full text-foreground",children:t[x.value].length})]},x.id)}),e.jsxs(Gr,{children:[e.jsx(Kr,{asChild:!0,children:e.jsxs(xs,{value:a,children:[e.jsx("span",{className:"hidden md:inline",children:"More"}),e.jsx("div",{className:"flex items-center mt-1 ml-1",children:e.jsx(ur,{className:"w-4 h-4"})})]})}),e.jsx(Xt,{className:"w-[200px] mt-1 ml-2",children:c.map(x=>{var p,m;return e.jsxs(Xs,{onClick:()=>r(x.value),disabled:!t[x.value]||((p=t[x.value])==null?void 0:p.length)===0,children:[x.icon&&e.jsx(x.icon,{className:`w-4 h-4 ${x.color}`}),x.label,((m=t[x.value])==null?void 0:m.length)>0&&e.jsx("span",{className:"ml-auto text-xs bg-accent px-1.5 py-0.5 rounded-full text-foreground",children:t[x.value].length})]},x.id)})})]})]}),Ix=({existingReview:s,orderId:t})=>e.jsxs(Ve,{children:[e.jsx(ze,{children:s!=null&&s.review?"Edit Your Review":"Share Your Experience"}),e.jsxs(ns,{className:"text-sm text-gray-300",children:["Order ID: ",t]})]}),Dx=({existingReview:s})=>s!=null&&s.review?e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-brand-dark/50 border border-accent text-accent",children:[e.jsx(it,{className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"font-medium text-base",children:"You are editing an existing review."}),e.jsx("p",{className:"mt-1 text-gray-300",children:"You can only edit your review once. Further modifications will not be permitted after the initial update."})]})]}):null,Fx=({onOpenChange:s,handleSubmit:t,isCreating:a,isUpdating:r,existingReview:n})=>{const l=a||r;return e.jsxs(qs,{className:"gap-2",children:[e.jsx(O,{variant:"secondary",onClick:()=>s(!1),className:"w-auto",disabled:l,children:"Cancel"}),e.jsx(O,{variant:"submit",onClick:t,disabled:l,className:"w-auto",children:l?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 mr-2 animate-spin"}),r?"Updating...":"Submitting..."]}):e.jsx(e.Fragment,{children:n!=null&&n.review?"Update Review":"Submit Review"})})]})},Ax=({productId:s,images:t,fileInputRefs:a,handleImageUpload:r,handleRemoveImage:n,disabled:l})=>{const i=t[s]||[];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-background",children:"Add Photos"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[i.length,"/3 images"]})]}),i.length===0&&e.jsx(_a,{productId:s,fileInputRefs:a,handleImageUpload:c=>r(s,c),disabled:l,fullWidth:!0}),i.length>0&&e.jsxs("div",{className:"flex gap-3",children:[i.map((c,o)=>e.jsx(Tx,{image:c,index:o,disabled:l,onRemove:()=>n(s,o)},`${s}-${o}`)),i.length<3&&e.jsx(_a,{productId:s,fileInputRefs:a,handleImageUpload:c=>r(s,c),disabled:l})]})]})},Tx=({image:s,index:t,disabled:a,onRemove:r})=>e.jsxs("div",{className:"relative w-36 h-36 rounded-lg overflow-hidden border border-brand-end/50",children:[e.jsx("img",{src:typeof s=="string"?s:URL.createObjectURL(s),alt:`Review ${t+1}`,className:"w-full h-full object-cover",onLoad:n=>{typeof s!="string"&&URL.revokeObjectURL(n.target.src)}}),!a&&e.jsx(O,{variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-6 h-6",onClick:n=>{n.stopPropagation(),r()},children:e.jsx(es,{className:"w-4 h-4"})})]}),_a=({productId:s,fileInputRefs:t,handleImageUpload:a,disabled:r,fullWidth:n=!1})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:a,ref:l=>t.current[s]=l,disabled:r}),e.jsx(O,{variant:"ghost",className:`${n?"w-full":"aspect-square"} rounded-lg border-2 border-dashed border-brand-end hover:border-blue-400 hover:bg-brand-dark/30 text-gray-300 min-h-[145px]`,onClick:()=>{var l;return(l=t.current[s])==null?void 0:l.click()},disabled:r,children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(Kt,{className:"w-8 h-8"}),e.jsx("span",{className:"text-sm",children:"Add Photos"}),n&&e.jsx("span",{className:"text-xs text-gray-400",children:"Drag and drop or click to upload"})]})})]}),Ex=({item:s,ratings:t,reviews:a,images:r,fileInputRefs:n,showReviewBox:l,handleRating:i,handleReviewChange:c,handleImageUpload:o,handleRemoveImage:d,handleBuyAgain:x,toggleReviewBox:p,isProductEdited:m,processingImages:u,isCompressing:h,existingReview:j})=>{const y=window.innerWidth<640,v=!!a[s.product._id],f=!y||l||v;return e.jsx("div",{className:"p-4 rounded-xl bg-brand-dark/30 border border-brand-end/50",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative bg-brand-dark rounded-lg overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-32 h-32 object-cover"}),s.discount>0&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsxs(oe,{variant:"accent",children:[s.discount,"% OFF"]})})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(Lx,{item:s,ratings:t,handleRating:i,isProductEdited:m})})]}),y&&e.jsx($x,{item:s,ratings:t,handleRating:i,handleBuyAgain:x,toggleReviewBox:p,isProductEdited:m,existingReview:j,hasReviewText:v}),f&&e.jsx(Mx,{productId:s.product._id,reviews:a,handleReviewChange:c,isProductEdited:m}),f&&e.jsx(Ax,{productId:s.product._id,images:r,fileInputRefs:n,handleImageUpload:o,handleRemoveImage:d,disabled:m,processingImages:u,isCompressing:h}),m&&e.jsxs("div",{className:"text-accent text-sm flex items-center gap-2 mt-3",children:[e.jsx(hs,{className:"w-4 h-4"}),"This review has already been edited and cannot be modified further."]})]})})},Lx=({item:s,ratings:t,handleRating:a,isProductEdited:r})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-1",children:[e.jsx("p",{className:"font-semibold text-md md:text-lg text-background line-clamp-1",children:s.name}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Xe,{rating:t[s.product._id]||0,size:"lg",interactive:!r,onRatingChange:n=>a(s.product._id,n),disabled:r})})]}),e.jsx(Ox,{item:s}),e.jsx(Rx,{item:s})]}),Ox=({item:s})=>e.jsxs("div",{className:"flex items-center mt-1 gap-2",children:[e.jsxs("span",{className:"font-bold text-emerald-400 text-lg",children:["$",(s.quantity*s.discountedPrice).toFixed(2)]}),s.quantity>1&&e.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["$",s.discountedPrice.toFixed(2)," each"]})]}),Rx=({item:s})=>e.jsxs("div",{className:"flex flex-col text-sm text-gray-300 space-y-1 mt-1",children:[s.color&&e.jsx("span",{children:s.color}),s.includes&&e.jsx("span",{className:"line-clamp-1",children:s.includes}),e.jsxs("span",{children:["Quantity: ",s.quantity]})]}),$x=({item:s,ratings:t,handleRating:a,handleBuyAgain:r,toggleReviewBox:n,isProductEdited:l,existingReview:i,hasReviewText:c})=>e.jsxs("div",{className:"sm:hidden space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-gray-200 font-semibold text-lg",children:"Quick Review"}),e.jsx(Xe,{rating:t[s.product._id]||0,size:"lg",interactive:!l,onRatingChange:o=>a(s.product._id,o),disabled:l})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{variant:"cart",className:"w-full hover:scale-100 text-background",onClick:r,children:"Buy Again"}),!c&&e.jsx(O,{variant:"accent",className:"w-full hover:scale-100",onClick:n,disabled:l,children:i?"Update Review":"Write a Review"})]})]}),Mx=({productId:s,reviews:t,handleReviewChange:a,isProductEdited:r})=>{var n,l;return e.jsxs("div",{className:"w-full text-background",children:[e.jsxs("div",{className:"flex items-center justify-between my-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:"Write a Feedback"})}),e.jsxs("span",{className:`text-sm ${((n=t[s])==null?void 0:n.length)>450?"text-red-500":"text-gray-300"}`,children:[((l=t[s])==null?void 0:l.length)||0,"/500"]})]}),e.jsx(_e,{placeholder:"Share your thoughts",maxLength:500,className:"min-h-32 md:min-h-24 bg-transparent placeholder:text-gray-200",value:t[s]||"",onChange:i=>a(s,i.target.value),disabled:r})]})},Ux=(s,t)=>{var fe,he;const[a,r]=g.useState({}),[n,l]=g.useState({}),[i,c]=g.useState({}),[o,d]=g.useState({}),[x,p]=g.useState({}),[m,u]=g.useState({}),h=g.useRef({}),j=js(),y=ee(),[v,{isLoading:f}]=Sd(),[w,{isLoading:k}]=_d(),{data:b}=aa(s==null?void 0:s._id,{skip:!(s!=null&&s._id)||!(s!=null&&s.isReviewed)}),{handleImageUpload:S,isUploading:_}=Is({maxSizeMB:.8,maxWidthOrHeight:1200,maxFileSize:5*1024*1024,onSuccess:(I,U)=>{c(Y=>({...Y,[U]:[...Y[U]||[],I]})),p(Y=>({...Y,[U]:Math.max(0,(Y[U]||0)-1)}))},onError:I=>{N.error(I.message),p(U=>({...U,[productId]:Math.max(0,(U[productId]||0)-1)}))}});g.useEffect(()=>{var I;if((I=b==null?void 0:b.review)!=null&&I.products){const U=b.review.products.reduce((Y,te)=>{var be;const pe=te.product;return{ratings:{...Y.ratings,[pe]:te.rating},reviews:{...Y.reviews,[pe]:te.editedReviewText||te.reviewText},images:{...Y.images,[pe]:((be=te.images)==null?void 0:be.map(ue=>ue.url))||[]},editedProducts:{...Y.editedProducts,[pe]:te.isEdited||!1}}},{ratings:{},reviews:{},images:{},editedProducts:{}});r(U.ratings),l(U.reviews),c(U.images),d(U.editedProducts)}},[b]);const P=I=>{var U,Y;return(Y=(U=b==null?void 0:b.review)==null?void 0:U.products)==null?void 0:Y.find(te=>te.product===I&&te.isEdited)},D=((he=(fe=b==null?void 0:b.review)==null?void 0:fe.products)==null?void 0:he.some(I=>I.isEdited&&I.editedAt))||!1;return{ratings:a,reviews:n,images:i,fileInputRefs:h,processingImages:x,showReviewBox:m,existingReview:b,isCreating:f,isUpdating:k,isCompressing:_,hasEditedProducts:D,handleRating:(I,U)=>{if(P(I)){N.error("This review has already been edited and cannot be modified further.");return}r(Y=>({...Y,[I]:U})),d(Y=>({...Y,[I]:!0}))},handleReviewChange:(I,U)=>{if(P(I)){N.error("This review has already been edited and cannot be modified further.");return}l(Y=>({...Y,[I]:U})),d(Y=>({...Y,[I]:!0}))},handleImageUpload:(I,U)=>{if(P(I)){N.error("This review has already been edited and cannot be modified further.");return}const Y=Array.from(U.target.files);if((i[I]||[]).length+Y.length>3){N.error("Maximum 3 images allowed per review");return}Y.forEach(pe=>{const be=new FileReader;be.onload=()=>{if(be.readyState===2){const ue=be.result;c(xe=>({...xe,[I]:[...xe[I]||[],ue]})),d(xe=>({...xe,[I]:!0}))}},be.readAsDataURL(pe)})},handleRemoveImage:(I,U)=>{if(P(I)){N.error("This review has already been edited and cannot be modified further.");return}c(Y=>{const te={...Y};return te[I]&&(URL.revokeObjectURL(te[I][U]),te[I]=te[I].filter((pe,be)=>be!==U)),te})},handleBuyAgain:I=>{const U={product:I.product._id,name:I.name,discounted_price:I.discountedPrice,price:I.price,discount:I.discount,image:I.image,quantity:1,color:I.color||null,includes:I.includes||""};j(Fn(U)),y("/checkout?mode=buy_now")},handleSubmit:async()=>{var I,U,Y;try{if(!((I=s==null?void 0:s.orderItems)==null?void 0:I.some(ue=>{var Ce;const xe=ue.product._id,ye=a[xe]!==void 0,Pe=n[xe]!==void 0,we=((Ce=i[xe])==null?void 0:Ce.length)>0;return ye||Pe||we}))){N.error("No changes have been made to the review");return}const pe=(U=s==null?void 0:s.orderItems)==null?void 0:U.map(ue=>{var Pe,we;const xe=ue.product._id,ye=(we=(Pe=b==null?void 0:b.review)==null?void 0:Pe.products)==null?void 0:we.find(Ce=>Ce.product===xe);return{product:xe,productName:ue.name,rating:a[xe]||(ye==null?void 0:ye.rating),reviewText:n[xe]||(ye==null?void 0:ye.reviewText)||"",images:i[xe]||[]}});(await(b!=null&&b.review?w({reviewId:b.review._id,reviewData:{products:pe}}):v({order:s._id,products:pe})).unwrap()).success&&(N.success(b!=null&&b.review?"Review updated successfully!":"Review submitted successfully!"),t(!1))}catch(te){console.error("Error submitting review:",te),N.error(((Y=te.data)==null?void 0:Y.message)||"Failed to submit review")}},toggleReviewBox:I=>{u(U=>({...U,[I]:!U[I]}))},isProductEdited:P}},qx=({open:s,onOpenChange:t,order:a,existingReview:r})=>{var b;const{ratings:n,reviews:l,images:i,fileInputRefs:c,processingImages:o,isCreating:d,isUpdating:x,isCompressing:p,handleRating:m,handleReviewChange:u,handleImageUpload:h,handleRemoveImage:j,handleBuyAgain:y,handleSubmit:v,isProductEdited:f,showReviewBox:w,toggleReviewBox:k}=Ux(a,t);return a?e.jsx(Ke,{open:s,onOpenChange:t,children:e.jsxs(qe,{className:"max-w-3xl",children:[e.jsx(Ix,{existingReview:r,orderId:a==null?void 0:a._id}),e.jsx(Dx,{existingReview:r}),(b=a==null?void 0:a.orderItems)==null?void 0:b.map((S,_)=>e.jsx(Ex,{item:S,ratings:n,reviews:l,images:i,fileInputRefs:c,handleRating:m,handleReviewChange:u,handleImageUpload:h,handleRemoveImage:j,handleBuyAgain:()=>y(S),isProductEdited:f(S.product._id),processingImages:o,isCompressing:p,showReviewBox:w[S.product._id],toggleReviewBox:()=>k(S.product._id),existingReview:r},`${a==null?void 0:a._id}-${S._id}-${_}`)),e.jsx(Fx,{onOpenChange:t,handleSubmit:v,isCreating:d,isUpdating:x,existingReview:r})]})}):null},Vx=({open:s,onOpenChange:t,review:a,order:r})=>{if(!a||!r)return null;const n=l=>r.orderItems.find(i=>i.product._id===l);return e.jsx(Ke,{open:s,onOpenChange:t,children:e.jsxs(qe,{className:"max-w-3xl",children:[e.jsxs(Ve,{children:[e.jsx(ze,{children:"Your Review"}),e.jsxs(ns,{className:"text-gray-300 text-xs md:text-sm",children:["Order #",r._id,"  Submitted on"," ",Me(new Date(a.createdAt),"PPP")]})]}),e.jsx("div",{className:"space-y-5",children:a.products.map(l=>{var c,o;const i=n(l.product);return e.jsx("div",{className:"p-5 rounded-md bg-brand-dark/30 border border-brand-end/50",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[i&&e.jsxs("div",{className:"relative bg-brand-dark rounded-lg overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-32  h-32 object-cover"}),i.discount>0&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsxs(oe,{variant:"discount",children:[i.discount,"% OFF"]})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-1",children:[e.jsx("h3",{className:"font-semibold text-md md:text-lg text-background line-clamp-1",children:l.productName}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Xe,{rating:l.rating,size:"lg"})})]}),i&&e.jsxs("div",{className:"flex items-center mt-1 gap-2",children:[e.jsxs("span",{className:"font-bold text-emerald-400 text-lg",children:["$",(i.quantity*i.discountedPrice).toFixed(2)]}),i.quantity>1&&e.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["$",i.discountedPrice.toFixed(2)," each"]})]}),i&&e.jsxs("div",{className:"flex flex-col text-sm text-gray-300 space-y-1 mt-1",children:[i.color&&e.jsx("span",{children:i.color}),i.includes&&e.jsx("span",{className:"line-clamp-1",children:i.includes}),e.jsxs("span",{children:["Quantity: ",i.quantity]})]})]})]}),e.jsxs("div",{className:"w-full border-t border-brand-end/30 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-md font-medium text-indigo-200 hidden sm:block",children:"Your Review"}),e.jsx("div",{className:"sm:hidden",children:e.jsx(Xe,{rating:l.rating,size:"md"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gr,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:((c=l.helpfulVotes)==null?void 0:c.length)||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(jr,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:((o=l.unhelpfulVotes)==null?void 0:o.length)||0})]})]})]}),e.jsx("p",{className:"text-gray-300 bg-transparent rounded-md",children:l.editedReviewText||l.reviewText||"No written review provided."})]}),l.images&&l.images.length>0&&e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex flex-wrap gap-3",children:l.images.map((d,x)=>e.jsx("img",{src:d.url,alt:`Review ${x+1}`,className:"w-24 h-24 object-cover rounded-lg"},x))})})]})},l.product)})})]})})},Mt=({order:s,onClick:t,showReviewButton:a,showReviewedBadge:r})=>{var y,v;const[n,l]=g.useState(!1),[i,c]=g.useState(!1),{data:o}=aa(s._id,{skip:!(s!=null&&s._id)||!(s!=null&&s.isReviewed)}),d=(v=(y=o==null?void 0:o.review)==null?void 0:y.products)==null?void 0:v.some(f=>f.isEdited&&f.editedAt),x=()=>{var w;if(!((w=o==null?void 0:o.review)!=null&&w.products))return null;const f=o.review.products.filter(k=>k.isEdited&&k.editedAt).map(k=>new Date(k.editedAt));return f.length>0?Math.max(...f):null},p=ke.find(f=>f.value===s.orderStatus),m=()=>{r&&(o!=null&&o.review)?c(!0):a||s!=null&&s._id&&t(s._id)},u=f=>{f.stopPropagation(),l(!0)},h=f=>{f.stopPropagation(),l(!0)},j=()=>e.jsx(oe,{className:`${p==null?void 0:p.bgColor}`,children:e.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[(p==null?void 0:p.icon)&&e.jsx(p.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:s.orderStatus})]})});return e.jsxs(e.Fragment,{children:[e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.01},className:"cursor-pointer",onClick:m,children:e.jsxs($,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex flex-row gap-3 justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-brand-dark border border-brand-end/50",children:e.jsx(Os,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(re,{className:"text-sm text-background",children:["Order #",s._id]}),e.jsx("p",{className:"text-xs text-gray-300",children:Me(new Date(s.createdAt),"MMM dd, yyyy")})]})]}),e.jsx("div",{className:"hidden sm:block self-center",children:e.jsx(j,{})})]})}),e.jsxs(M,{className:"pb-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-between py-5 border-t border-brand-end/50",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 order-2 sm:order-1 w-full sm:w-auto pt-2",children:[e.jsxs("p",{className:"text-sm text-gray-300",children:[s.orderItems.length," ",s.orderItems.length===1?"item":"items"]}),e.jsx("div",{className:"sm:hidden",children:e.jsx(j,{})})]}),e.jsxs("div",{className:"flex justify-between sm:block order-1 sm:order-2",children:[e.jsx("span",{className:"text-sm text-gray-300 sm:hidden",children:"Total:"}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["$",s.totalPrice.toFixed(2)]})})]})]}),(a||r)&&e.jsx("div",{className:"py-5 border-t border-brand-end/50",children:a?e.jsxs(O,{variant:"accent",onClick:u,className:"w-full hover:scale-100",children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Write a Review"]}):r?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[e.jsx("div",{className:"flex flex-col gap-1",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(Zs,{className:"w-4 h-4"}),"Reviewed",d&&x()&&e.jsxs("span",{className:"text-xs text-accent",children:["(Edited on"," ",Me(new Date(x()),"MMM dd, yyyy"),")"]})]})}),e.jsxs(O,{variant:"outline",className:"hover:bg-input",size:"sm",onClick:h,disabled:d,children:[e.jsx(fr,{className:"w-4 h-4 mr-2"}),d?"Already Edited":"Edit Review"]})]}):null})]})]})}),e.jsx(qx,{open:n,onOpenChange:l,order:s,existingReview:o}),e.jsx(Vx,{open:i,onOpenChange:c,review:o==null?void 0:o.review,order:s})]})},zx=({ordersByStatus:s,selectedReviewTab:t,onReviewTabChange:a,handleOrderCardClick:r})=>{var l,i,c,o,d,x;const n=({type:p,orders:m,emptyTitle:u,emptyMessage:h,showReviewButton:j,showReviewedBadge:y})=>!m||!m.length?e.jsx(je,{title:u,message:h,minHeight:"min-h-[300px]"}):e.jsx("div",{className:`grid grid-cols-1 ${m.length>1?"md:grid-cols-1 lg:grid-cols-2":""} gap-4`,children:m.map(v=>e.jsx(Mt,{order:v,onClick:f=>r(f,p==="history"),showReviewButton:j,showReviewedBadge:y,"data-order-id":v._id},v._id))});return e.jsxs(na,{defaultValue:t,className:"w-full",onValueChange:a,children:[e.jsxs(_t,{className:"grid grid-cols-2 gap-2 bg-gray-900/50 mb-5",children:[e.jsxs(xs,{value:"pending",children:[e.jsx(Zs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Pending Reviews"}),e.jsx("span",{className:"sm:hidden",children:"Pending"}),e.jsx("span",{className:"ml-1 text-xs bg-accent px-1.5 py-0.5 rounded-full text-foreground",children:((i=(l=s["To Review"])==null?void 0:l.pending)==null?void 0:i.length)||0})]}),e.jsxs(xs,{value:"history",children:[e.jsx(Jl,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Review History"}),e.jsx("span",{className:"sm:hidden",children:"History"}),e.jsx("span",{className:"ml-1 text-xs bg-accent px-1.5 py-0.5 rounded-full text-foreground",children:((o=(c=s["To Review"])==null?void 0:c.history)==null?void 0:o.length)||0})]})]}),e.jsx(ps,{value:"pending",children:e.jsx(n,{type:"pending",orders:((d=s["To Review"])==null?void 0:d.pending)||[],emptyTitle:"No Pending Reviews",emptyMessage:"You don't have any products waiting to be reviewed.",showReviewButton:!0})}),e.jsx(ps,{value:"history",children:e.jsx(n,{type:"history",orders:((x=s["To Review"])==null?void 0:x.history)||[],emptyTitle:"No Review History",emptyMessage:"You haven't reviewed any products yet.",showReviewedBadge:!0})})]})},Bx=({ordersByStatus:s,orderStatus:t,onReviewTabChange:a,onOrderClick:r,orders:n,selectedReviewTab:l,showReviewDetails:i,reviewData:c,handleOrderCardClick:o,setShowReviewDetails:d,handleReviewEditClick:x})=>e.jsxs(e.Fragment,{children:[t.map(p=>{const m=s[p.value]||[],u=m.length===1;return e.jsx(ps,{value:p.value,className:"mt-5",children:p.value==="To Review"?e.jsx(zx,{ordersByStatus:s,onOrderClick:r,selectedReviewTab:l,onReviewTabChange:a,showReviewDetails:i,reviewData:c,handleOrderCardClick:o,setShowReviewDetails:d,handleReviewEditClick:x}):e.jsx("div",{className:`grid grid-cols-1 ${u?"":"md:grid-cols-1 lg:grid-cols-2"} gap-4`,children:m.map(h=>e.jsx(Mt,{order:h,onClick:r},h._id))})},p.id)}),e.jsx(ps,{value:"all",className:"mt-5",children:n.length>0?e.jsx("div",{className:`grid gap-4 grid-cols-1 ${n.length>1?"md:grid-cols-1 lg:grid-cols-2":""}`,children:n.map(p=>e.jsx(Mt,{order:p,onClick:r},p._id))}):e.jsx(je,{title:"No Orders Found",message:"You haven't placed any orders yet.",minHeight:"min-h-[300px]"})})]}),Wx=()=>{const{orders:s,ordersByStatus:t,isLoading:a,error:r,selectedStatus:n,handleStatusChange:l,handleReviewTabChange:i,selectedReviewTab:c,handleOrderClick:o,isMobile:d,selectedLabel:x,mainStatus:p,dropdownStatus:m,allStatuses:u,handleTabChange:h,showReviewDetails:j,reviewData:y,handleOrderCardClick:v,setShowReviewDetails:f,handleReviewEditClick:w}=Rn();return a?e.jsx(kx,{}):!s.length||(r==null?void 0:r.status)===404?e.jsx(je,{title:"No Orders Found",message:"You haven't placed any orders yet."}):e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"My Orders"}),e.jsxs("div",{className:"px-5 py-8",children:[e.jsx(Sx,{totalOrders:s.length}),e.jsxs(na,{value:n,onValueChange:l,children:[e.jsx(Px,{totalOrders:s.length,ordersByStatus:t,statusParam:n,onTabChange:l,orderStatus:ke,isMobile:d,selectedLabel:x,mainStatus:p,dropdownStatus:m,allStatuses:u,handleTabChange:h}),e.jsx(Bx,{ordersByStatus:t,selectedStatus:n,orderStatus:ke,onReviewTabChange:i,onOrderClick:o,orders:s,selectedReviewTab:c,showReviewDetails:j,reviewData:y,handleOrderCardClick:v,setShowReviewDetails:f,handleReviewEditClick:w})]})]})]})},Hx=()=>{var l,i;const{id:s}=Se(),{subCollections:t,collectionDetails:a,handleSubCollectionClick:r,isLoading:n}=kt(!1,s);return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:(l=a==null?void 0:a.collection)!=null&&l.name?`${a.collection.name}`:"Sub-Collections"}),e.jsx("section",{className:"p-5",children:e.jsx(ra,{collections:t,onCollectionClick:r,isInView:!0,isLoading:n,type:"sub-collections",collectionName:(i=a==null?void 0:a.collection)==null?void 0:i.name})})]})},Ut=g.forwardRef(({className:s,...t},a)=>e.jsx(Sr,{className:K("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:e.jsx(Zl,{className:K("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ut.displayName=Sr.displayName;const Gx=()=>{var o,d,x,p,m,u,h;const{id:s}=Se(),t=ee(),{user:a}=ae(j=>j.auth),[r,{isLoading:n}]=Rc(),{data:l,isLoading:i}=Oc(s),c=async j=>{var f;j.preventDefault();const y=new FormData(j.target),v={name:y.get("name"),username:y.get("username"),contact_number:y.get("contact_number"),role:y.get("role"),is_verified:y.get("is_verified")==="on",isSuspended:y.get("isSuspended")==="on"};try{await r({id:s,...v}).unwrap(),N.success("User updated successfully!"),t("/admin/users")}catch(w){N.error(((f=w==null?void 0:w.data)==null?void 0:f.message)||"Failed to update user")}};return i||!l?e.jsx("div",{className:"flex justify-center items-center h-48",children:e.jsx(Ps,{})}):e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Update User"}),e.jsx("div",{className:"p-3 md:p-5",children:e.jsx("form",{onSubmit:c,children:e.jsxs($,{className:"border-t-4 border-t-accent",children:[e.jsx(H,{children:e.jsx(re,{className:"text-2xl",children:"Update User"})}),e.jsxs(M,{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"email",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Wt,{className:"h-5 w-5 text-green-600"}),"Email Address"]}),e.jsx(Q,{id:"email",value:(o=l==null?void 0:l.data)==null?void 0:o.email,className:"bg-gray-100",disabled:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ge,{className:"h-5 w-5 text-blue-600"}),"Full Name"]}),e.jsx(Q,{id:"name",name:"name",placeholder:"Enter full name",defaultValue:(d=l==null?void 0:l.data)==null?void 0:d.name,required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"username",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ge,{className:"h-5 w-5 text-purple-600"}),"Username"]}),e.jsx(Q,{id:"username",name:"username",placeholder:"Enter username",defaultValue:(x=l==null?void 0:l.data)==null?void 0:x.username,required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"contact_number",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(qt,{className:"h-5 w-5 text-orange-600"}),"Contact Number"]}),e.jsx(Q,{id:"contact_number",name:"contact_number",placeholder:"Enter contact number",defaultValue:(p=l==null?void 0:l.data)==null?void 0:p.contact_number,required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{htmlFor:"role",className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(ut,{className:"h-5 w-5 text-indigo-600"}),"Role"]}),e.jsxs(Le,{name:"role",required:!0,defaultValue:(m=l==null?void 0:l.data)==null?void 0:m.role,children:[e.jsx(Fe,{children:e.jsx(Oe,{placeholder:"Select role"})}),e.jsxs(Ae,{children:[e.jsx(ve,{value:"customer",children:"Customer"}),e.jsx(ve,{value:"employee",children:"Employee"}),e.jsx(ve,{value:"seller",children:"Seller"}),(a==null?void 0:a.role)==="superAdmin"&&e.jsx(ve,{value:"admin",children:"Admin"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ut,{id:"is_verified",name:"is_verified",defaultChecked:(u=l==null?void 0:l.data)==null?void 0:u.is_verified}),e.jsx(R,{htmlFor:"is_verified",children:"Verified User"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ut,{id:"isSuspended",name:"isSuspended",defaultChecked:(h=l==null?void 0:l.data)==null?void 0:h.isSuspended}),e.jsx(R,{htmlFor:"isSuspended",children:"Suspended"})]})]}),e.jsx("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:e.jsx(O,{type:"submit",variant:"submit",disabled:n,className:"w-auto",children:n?"Updating...":"Update User"})})]})]})})})]})},Kx=()=>{const{token:s}=Se(),t=ee(),[a,r]=g.useState(5),[n]=zc(),[l,i]=g.useState("pending"),[c,o]=g.useState(""),d=g.useRef(!1);g.useEffect(()=>{let p;return s?(async()=>{var u,h;if(!d.current){d.current=!0;try{const j=await n(s).unwrap();i("success"),N.success(j.message,{toastId:"verification-success"}),p=setInterval(()=>{r(y=>y<=1?(clearInterval(p),t("/login"),0):y-1)},1e3)}catch(j){i("error"),o(((u=j==null?void 0:j.data)==null?void 0:u.message)||"Verification failed. Please try again."),N.error(((h=j==null?void 0:j.data)==null?void 0:h.message)||"Verification failed",{toastId:"verification-error"}),p=setInterval(()=>{r(y=>y<=1?(clearInterval(p),t("/login"),0):y-1)},1e3)}}})():(i("error"),o("Invalid verification link. Please request a new one.")),()=>{p&&clearInterval(p)}},[s,n,t]);const x=()=>{switch(l){case"success":return e.jsx(ir,{className:"w-16 h-16 text-green-500",strokeWidth:1.5});case"error":return e.jsx(ua,{className:"w-16 h-16 text-red-500",strokeWidth:1.5});default:return e.jsx(Xl,{className:"w-16 h-16 text-blue-500 animate-pulse",strokeWidth:1.5})}};return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-gradient",children:e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full mx-4 p-8 rounded-3xl backdrop-blur-lg shadow-2xl bg-gradient-to-br from-brand-start/40 to-brand-end/40 border border-white/20",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:x()}),l==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Verifying your email..."}),e.jsx("p",{className:"text-light/90",children:"Please wait while we verify your email address."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:l==="success"?"Email Verification Successful!":"Email Verification Failed"}),e.jsx("p",{className:"text-light/90",children:c}),e.jsxs("p",{className:"text-light/90",children:["Redirecting to login page in ",a," seconds..."]}),e.jsx("button",{onClick:()=>t("/login"),className:"mt-4 px-6 py-2 bg-gradient-to-r from-brand-start to-brand-end text-white rounded-lg hover:opacity-90 transition-opacity",children:"Go to Login"})]})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-gradient",children:e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full mx-4 p-8 rounded-3xl backdrop-blur-lg shadow-2xl bg-gradient-to-br from-brand-start/40 to-brand-end/40 border border-white/20",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ua,{className:"w-16 h-16 text-red-500 mx-auto",strokeWidth:1.5}),e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Invalid Verification Link"}),e.jsx("p",{className:"text-light/90",children:"Please request a new verification link."}),e.jsx("button",{onClick:()=>t("/login"),className:"mt-4 px-6 py-2 bg-gradient-to-r from-brand-start to-brand-end text-white rounded-lg hover:opacity-90 transition-opacity",children:"Go to Login"})]})})})},Yx=()=>{const[s,t]=g.useState(""),[a,{isLoading:r}]=Bc(),n=async l=>{var i;l.preventDefault();try{const c=await a({email:s}).unwrap();N.success(c==null?void 0:c.message),t("")}catch(c){N.error(((i=c==null?void 0:c.data)==null?void 0:i.message)||"An error occurred")}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Forgot Password"}),e.jsx("div",{className:"px-3 py-10",children:e.jsx("div",{className:"container mx-auto max-w-md",children:e.jsx(T.div,{...ce.formContainerVariants,className:"w-full md:px-5 py-10 md:border border-brand-end/50 rounded-2xl",children:e.jsxs("div",{children:[e.jsxs(T.div,{className:"mb-8",children:[e.jsx(T.h1,{className:"md:text-4xl text-3xl font-bold",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Forgot Password"}),e.jsx(T.p,{className:"text-gray-400 text-sm mt-2",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Enter your email address and we'll send you a link to reset your password"})]}),e.jsxs("form",{onSubmit:n,className:"space-y-5",children:[e.jsxs(T.div,{...ce.inputVariants,transition:ce.getInputTransition(0),className:"space-y-2",children:[e.jsx(R,{className:"text-background",children:"Email Address"}),e.jsx(Q,{type:"email",placeholder:"Enter your email",value:s,onChange:l=>t(l.target.value),required:!0})]}),e.jsx(T.div,{...ce.buttonVariants,className:"pt-2",children:e.jsx(O,{type:"submit",variant:"submit",size:"lg",className:"w-full flex items-center justify-center gap-2",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 animate-spin"}),"Sending Reset Link..."]}):"Send Reset Link"})})]})]})})})})]})},Qx=()=>{const[s,t]=g.useState(""),[a,r]=g.useState(""),[n,l]=g.useState(""),[i,c]=g.useState(!1),[o,{isLoading:d}]=Wc(),{token:x}=Se(),p=ee(),[m,u]=g.useState({minLength:!1,hasUppercase:!1,hasLowercase:!1,hasNumber:!1,hasSpecial:!1}),h=({met:f,text:w})=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[f?e.jsx(Ls,{className:"w-4 h-4 text-green-500 mt-0.5"}):e.jsx(es,{className:"w-4 h-4 text-red-500 mt-0.5"}),e.jsx("span",{className:f?"text-green-500":"text-gray-300",children:w})]}),j=[{key:"minLength",text:"At least 6 characters"},{key:"hasUppercase",text:"One uppercase letter"},{key:"hasLowercase",text:"One lowercase letter"},{key:"hasNumber",text:"One number"},{key:"hasSpecial",text:"One special character (!@#$%^&*_)"}],y=f=>{u({minLength:f.length>=6,hasUppercase:/[A-Z]/.test(f),hasLowercase:/[a-z]/.test(f),hasNumber:/\d/.test(f),hasSpecial:/[!@#$%^&*_]/.test(f)})},v=async f=>{var k;if(f.preventDefault(),!Object.values(m).every(b=>b)){N.error("Please meet all password requirements");return}if(s!==a){N.error("Passwords do not match");return}try{const b=await o({token:x,password:s,confirmPassword:a}).unwrap();N.success((b==null?void 0:b.message)||"Password reset successfully"),p("/login")}catch(b){const S=((k=b==null?void 0:b.data)==null?void 0:k.message)||"An error occurred";l(S)}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Reset Password"}),e.jsx("div",{className:"px-3 py-10",children:e.jsx("div",{className:"container mx-auto max-w-lg",children:e.jsx(T.div,{...ce.formContainerVariants,className:"w-full md:px-5 py-10 md:border border-brand-end/50 rounded-2xl",children:e.jsxs("div",{children:[e.jsxs(T.div,{className:"mb-8",children:[e.jsx(T.h1,{className:"text-4xl font-bold",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Reset Password"}),e.jsx(T.p,{className:"text-gray-400 text-sm mt-2",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Enter your new password"}),n&&e.jsx("p",{className:"text-red-500 text-sm bg-red-100/10 p-3 rounded-lg mt-3",children:n})]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs(T.div,{...ce.inputVariants,transition:ce.getInputTransition(0),className:"space-y-2",children:[e.jsx(R,{className:"text-background",children:"New Password"}),e.jsx(Q,{type:"password",placeholder:"Enter new password",value:s,onChange:f=>{t(f.target.value),y(f.target.value)},onFocus:()=>c(!0),onBlur:()=>c(!1),required:!0,disabled:!!n}),i&&e.jsx(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-2",children:e.jsxs("div",{className:"pt-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Password Requirements:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:j.map(f=>e.jsx(h,{met:m[f.key],text:f.text},f.key))})]})})]}),e.jsxs(T.div,{...ce.inputVariants,transition:ce.getInputTransition(1),className:"space-y-2",children:[e.jsx(R,{className:"text-background",children:"Confirm Password"}),e.jsx(Q,{type:"password",placeholder:"Confirm new password",value:a,onChange:f=>r(f.target.value),required:!0,disabled:!!n})]}),e.jsx(T.div,{...ce.buttonVariants,className:"pt-2",children:e.jsx(O,{type:"submit",variant:"submit",size:"lg",className:"w-full flex items-center justify-center gap-2",disabled:d||!!n,children:d?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 animate-spin"}),"Resetting Password..."]}):"Reset Password"})})]})]})})})})]})},Jx=()=>{const s="March 1, 2025",t=[{id:"information-collected",title:"1. Information We Collect",content:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Personal Information:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{className:"text-sm",children:"Name"}),e.jsx("li",{className:"text-sm",children:"Shipping and billing address"}),e.jsx("li",{className:"text-sm",children:"Email address"}),e.jsx("li",{className:"text-sm",children:"Phone number"}),e.jsx("li",{className:"text-sm",children:"Payment information (processed by our secure payment processors)"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Order Information:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{className:"text-sm",children:"Details of the products you purchase"}),e.jsx("li",{className:"text-sm",children:"Order history"}),e.jsx("li",{className:"text-sm",children:"Shipping information"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Website Usage Information:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{className:"text-sm",children:"IP address"}),e.jsx("li",{className:"text-sm",children:"Browser type"}),e.jsx("li",{className:"text-sm",children:"Device information"}),e.jsx("li",{className:"text-sm",children:"Pages visited"}),e.jsx("li",{className:"text-sm",children:"Cookies and similar technologies (see section 3)"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Communication Information:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{className:"text-sm",children:"Information you provide when you contact us with inquiries or support requests"}),e.jsx("li",{className:"text-sm",children:"Information provided when you subscribe to our newsletter"})]})]})]})},{id:"how-we-use",title:"2. How We Use Your Information",content:e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"To Process and Fulfill Orders:"})," ","To process your orders, ship products, and provide order updates."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"To Provide Customer Support:"})," To respond to your inquiries, resolve issues, and provide assistance."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"To Improve Our Services:"})," To analyze website usage, improve our products and services, and enhance user experience."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"To Communicate with You:"})," To send order confirmations, shipping updates, promotional emails (with your consent), and important notices."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"To Prevent Fraud and Ensure Security:"})," ","To protect against fraud, unauthorized transactions, and other security risks."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"To Comply with Legal Obligations:"})," ","To comply with applicable laws and regulations."]})]})},{id:"cookies",title:"3. Cookies and Similar Technologies",content:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:"We use cookies and similar technologies to collect website usage information and enhance your browsing experience. Cookies are small data files stored on your device that allow us to:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{className:"text-sm",children:"Remember your preferences"}),e.jsx("li",{className:"text-sm",children:"Track website traffic"}),e.jsx("li",{className:"text-sm",children:"Analyze website performance"}),e.jsx("li",{className:"text-sm",children:"Personalize your experience"})]}),e.jsx("p",{className:"text-sm",children:"You can control cookies through your browser settings. However, disabling cookies may affect your ability to use certain features of our website."})]})},{id:"sharing",title:"4. Sharing Your Information",content:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:"We may share your information with the following third parties:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Service Providers:"})," We share information with third-party service providers who assist us with payment processing, shipping, website hosting, and other services."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Payment Processors:"})," We use secure payment processors to process your payments. We do not store your credit card information on our servers."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Shipping Carriers:"})," We share your shipping information with shipping carriers to deliver your orders."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Legal Compliance:"})," We may share your information when required by law or to protect our rights and interests."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Business Transfers:"})," Your information may be transferred to the acquiring entity in the event of a merger, acquisition, or sale of assets."]})]})]})},{id:"security",title:"5. Data Security",content:e.jsx("p",{className:"text-sm",children:"We take reasonable measures to protect your information from unauthorized access, use, or disclosure. However, no method of transmission over the Internet or electronic storage is completely secure."})},{id:"retention",title:"6. Data Retention",content:e.jsx("p",{className:"text-sm",children:"We retain your information for as long as necessary to fulfill the purposes outlined in this Privacy Policy, unless a longer retention period is required or permitted by law."})},{id:"rights",title:"7. Your Rights",content:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:"You have the following rights regarding your personal information:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{className:"text-sm",children:"Access: You can request access to the personal information we hold about you."}),e.jsx("li",{className:"text-sm",children:"Correction: You can request to correct any inaccurate or incomplete information."}),e.jsx("li",{className:"text-sm",children:"Deletion: You can request to delete your personal information, subject to legal limitations."}),e.jsx("li",{className:"text-sm",children:"Opt-Out: You can opt out of receiving promotional emails by following the unsubscribe instructions in the emails."}),e.jsx("li",{className:"text-sm",children:"Data Portability: You can request a copy of your personal data in a machine-readable format."})]}),e.jsx("p",{className:"text-sm",children:"To exercise these rights, please contact us at brickextremeofficial@gmail.com"})]})},{id:"children",title:"8. Children's Privacy",content:e.jsx("p",{className:"text-sm",children:"Our website is not intended for children under the age of 13. We do not knowingly collect personal information from children under 13. If you believe we have collected information from a child under 13, please contact us immediately."})},{id:"changes",title:"9. Changes to This Privacy Policy",content:e.jsx("p",{className:"text-sm",children:"We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on our website. Your continued use of our website after the changes are posted constitutes your acceptance of the updated policy."})},{id:"contact",title:"10. Contact Us",content:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:"If you have any questions or concerns about this Privacy Policy, please contact us via email at brickextremeofficial@gmail.com"}),e.jsxs("div",{className:"text-sm ml-5",children:[e.jsx("p",{children:"World of Minifigs/ Brick Extreme LLC"}),e.jsx("p",{children:"Lehi, Utah, 84043"}),e.jsx("p",{children:"build.wom@gmail.com"}),e.jsx("p",{children:"brickextremeofficial@gmail.com"})]})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Privacy Policy"}),e.jsxs("div",{className:"bg-background p-5",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Privacy Policy"}),e.jsx("p",{className:"text-gray-700 text-xs md:text-sm leading-6 mb-2",children:"Welcome to Brick Extreme! We are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy outlines how we collect, use, and share information when you visit our website (www.brickextreme.com) or make a purchase from us."}),e.jsx(vt,{type:"single",collapsible:!0,children:t.map(a=>e.jsxs($s,{value:a.id,children:[e.jsx(Ms,{children:a.title}),e.jsx(Us,{children:a.content})]},a.id))}),e.jsxs("div",{className:"py-4 text-right text-sm text-foreground",children:["Last Updated: ",s]})]})]})},Zx=()=>{const s="March 28, 2025",t=[{id:"acceptance",title:"1. Acceptance of Terms",content:"Your use of this website constitutes your acceptance of these Terms. We reserve the right to modify these Terms at any time. Any changes will be posted on this page, and your continued use of the website after such changes have been posted will constitute your acceptance of the revised Terms."},{id:"product",title:"2. Product Information and Authenticity",content:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"font-semibold mb-2",children:"We provide the following guarantees regarding our products:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Authentic LEGO Parts:"})," We guarantee that all LEGO parts, minifigure pieces, heads, torsos, and other products sold on this website are authentic LEGO products."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Product Descriptions:"})," We make every effort to provide accurate descriptions and images of our products. However, we do not warrant that the descriptions, images, or other content on this website are accurate, complete, reliable, current, or error-free."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Availability:"})," Product availability is subject to change without notice."]})]})]})},{id:"orders",title:"3. Orders and Payment",content:e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Order Acceptance:"})," Your order constitutes an offer to purchase our products. We reserve the right to accept or reject any order for any reason."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," Payment must be made in full at the time of purchase. We accept [List accepted payment methods, e.g., credit cards, PayPal]."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Pricing:"})," Prices are subject to change without notice. We are not responsible for typographical errors regarding pricing or product information."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Sales Tax:"})," Applicable sales tax will be added to your order based on your shipping address and the prevailing laws of Utah. ."]})]})},{id:"shipping",title:"4. Shipping and Delivery",content:e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Shipping:"})," We will ship your order to the address provided during checkout. Shipping times may vary."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Risk of Loss:"})," The risk of loss and title for all items purchased from us pass to you upon our delivery to the carrier."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"International Shipping:"})," If we offer international shipping, you are responsible for any customs duties, taxes, and fees."]})]})},{id:"returns",title:"5. Returns and Refunds",content:e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Return Policy:"})," Returns are accepted within 30 days of receipt for unopened items. Customers are responsible for return shipping."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Refunds:"})," Refunds will be issued to the original payment method."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Damaged or Defective Items:"})," If you receive a damaged or defective item, please contact us immediately."]})]})},{id:"ip",title:"6. Intellectual Property",content:e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Copyright:"})," All content on this website, including text, images, logos, and designs, is the property of World of Minifigs or its licensors and is protected by copyright laws."]}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Trademarks:"}),' "World of Minifigs" and our logo are trademarks of World of Minifigs/Brick Extreme. You may not use our trademarks without our prior written consent.']}),e.jsxs("li",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"LEGO Trademarks:"})," LEGO, the LEGO logo, the Minifigure, and the Brick and Knob configurations are trademarks of the LEGO Group of Companies, which does not sponsor, authorize, or endorse this site."]})]})},{id:"liability",title:"7. Limitation of Liability",content:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:"To the fullest extent permitted by law, World of Minifigs shall not be liable for any direct, indirect, incidental, consequential, or punitive damages arising from your use of this website or the purchase of our products."}),e.jsx("p",{className:"text-sm",children:"In no event shall our total liability to you for all damages, losses, or causes of action exceed the amount paid by you for the products in question."})]})},{id:"governing",title:"8. Governing Law and Jurisdiction",content:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:"These Terms shall be governed by and construed following the laws of the State of Utah, without regard to its conflict of law principles."}),e.jsx("p",{className:"text-sm",children:"Any dispute arising out of or relating to these Terms shall be subject to the exclusive jurisdiction of the state and federal courts located in Lehi, Utah."})]})},{id:"conduct",title:"9. User Conduct",content:e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{className:"text-sm",children:"You agree not to use this website for any unlawful purpose."}),e.jsx("li",{className:"text-sm",children:"You agree not to upload or transmit any harmful or malicious code."}),e.jsx("li",{className:"text-sm",children:"You agree not to interfere with the operation of this website."})]})},{id:"contact",title:"10. Contact Information",content:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:"If you have any questions about these Terms, please contact us at:"}),e.jsxs("div",{className:"text-sm ml-5",children:[e.jsx("p",{children:"World of Minifigs/ Brick Extreme LLC"}),e.jsx("p",{children:"Lehi, Utah, 84043"}),e.jsx("p",{children:"build.wom@gmail.com"}),e.jsx("p",{children:"brickextremeofficial@gmail.com"})]})]})},{id:"severability",title:"11. Severability",content:e.jsx("p",{className:"text-sm",children:"If any provision of these Terms is held to be invalid or unenforceable, the remaining provisions shall continue to be valid and enforceable."})},{id:"entire",title:"12. Entire Agreement",content:e.jsx("p",{className:"text-sm",children:"These Terms constitute the entire agreement between you and World of Minifigs concerning the use of this website and the purchase of our products."})}];return e.jsxs("div",{className:"bg-background p-5",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Terms of Use"}),e.jsx("p",{className:"text-gray-700 text-xs md:text-sm leading-6 mb-2",children:'Welcome to the World of Minifigs! By accessing and using our website (www.worldofminifigs.com) and purchasing products from us, you agree to be bound by these Terms of Use ("Terms"). If you do not agree with any part of these Terms, you must not use our website.'}),e.jsx(vt,{type:"single",collapsible:!0,children:t.map(a=>e.jsxs($s,{value:a.id,children:[e.jsx(Ms,{children:a.title}),e.jsx(Us,{children:a.content})]},a.id))}),e.jsxs("div",{className:"py-4 text-right text-sm text-foreground",children:["Last Updated: ",s]})]})},Xx=e.jsxs(e.Fragment,{children:[e.jsx(Z,{index:!0,element:e.jsx($d,{})}),e.jsx(Z,{path:"products",element:e.jsx(Zd,{})}),e.jsx(Z,{path:"collections",element:e.jsx($m,{})}),e.jsx(Z,{path:"collections/:id",element:e.jsx(Hx,{})}),e.jsx(Z,{path:"products/best-selling/:id",element:e.jsx(Tt,{})}),e.jsx(Z,{path:"products/latest/:id",element:e.jsx(Tt,{})}),e.jsx(Z,{path:"products/:id",element:e.jsx(Tt,{})}),e.jsx(Z,{path:"about",element:e.jsx(id,{})}),e.jsx(Z,{path:"contact",element:e.jsx(xd,{})}),e.jsx(Z,{path:"login",element:e.jsx(mo,{})}),e.jsx(Z,{path:"register",element:e.jsx(xo,{})}),e.jsx(Z,{path:"verify_user/:token",element:e.jsx(Kx,{})}),e.jsx(Z,{path:"password/forgot-password",element:e.jsx(Yx,{})}),e.jsx(Z,{path:"password/reset-password/:token",element:e.jsx(Qx,{})}),e.jsx(Z,{path:"privacy-policy",element:e.jsx(Jx,{})}),e.jsx(Z,{path:"terms-of-use",element:e.jsx(Zx,{})}),e.jsxs(Z,{element:e.jsx(Sa,{}),children:[e.jsx(Z,{path:"profile",element:e.jsx(Wm,{})}),e.jsx(Z,{path:"settings",element:e.jsx(Hm,{})}),e.jsx(Z,{path:"checkout",element:e.jsx(rx,{})}),e.jsx(Z,{path:"my-orders",element:e.jsx(Wx,{})}),e.jsx(Z,{path:"order/:id",element:e.jsx(Nx,{})})]}),e.jsxs(Z,{path:"admin",element:e.jsx(Sa,{adminOnly:!0,children:e.jsx(Js,{})}),children:[e.jsx(Z,{index:!0,element:e.jsx(Zo,{})}),e.jsx(Z,{path:"products",element:e.jsx(Sm,{})}),e.jsx(Z,{path:"new-product",element:e.jsx(So,{})}),e.jsx(Z,{path:"update-product/:id",element:e.jsx(Km,{})}),e.jsx(Z,{path:"product-gallery/:id",element:e.jsx(xu,{})}),e.jsx(Z,{path:"colors",element:e.jsx(pu,{})}),e.jsx(Z,{path:"new-color",element:e.jsx(gu,{})}),e.jsx(Z,{path:"update-color/:id",element:e.jsx(ju,{})}),e.jsx(Z,{path:"categories",element:e.jsx(Qm,{})}),e.jsx(Z,{path:"new-category",element:e.jsx(au,{})}),e.jsx(Z,{path:"update-category/:id",element:e.jsx(ru,{})}),e.jsx(Z,{path:"subcategories",element:e.jsx(bu,{})}),e.jsx(Z,{path:"new-subcategory",element:e.jsx(yu,{})}),e.jsx(Z,{path:"update-subcategory/:id",element:e.jsx(Nu,{})}),e.jsx(Z,{path:"collections",element:e.jsx(Zm,{})}),e.jsx(Z,{path:"new-collection",element:e.jsx(nu,{})}),e.jsx(Z,{path:"update-collection/:id",element:e.jsx(lu,{})}),e.jsx(Z,{path:"subcollections",element:e.jsx(wu,{})}),e.jsx(Z,{path:"new-subcollection",element:e.jsx(Cu,{})}),e.jsx(Z,{path:"update-subcollection/:id",element:e.jsx(ku,{})}),e.jsx(Z,{path:"skill-levels",element:e.jsx(eu,{})}),e.jsx(Z,{path:"new-skill-level",element:e.jsx(iu,{})}),e.jsx(Z,{path:"update-skill-level/:id",element:e.jsx(cu,{})}),e.jsx(Z,{path:"designers",element:e.jsx(tu,{})}),e.jsx(Z,{path:"new-designer",element:e.jsx(du,{})}),e.jsx(Z,{path:"update-designer/:id",element:e.jsx(mu,{})}),e.jsx(Z,{path:"users",element:e.jsx(Lm,{})}),e.jsx(Z,{path:"update-user/:id",element:e.jsx(Gx,{})}),e.jsx(Z,{path:"orders",element:e.jsx(Tm,{})}),e.jsx(Z,{path:"reviews",element:e.jsx(Rm,{})})]})]}),eh=()=>e.jsx("div",{children:e.jsx("h1",{children:"404 Not Found"})}),$n=wi({reducer:{auth:Ac,cart:Pc,buyNow:rm,[He.reducerPath]:He.reducer,[Gs.reducerPath]:Gs.reducer,[Ds.reducerPath]:Ds.reducer,[Qs.reducerPath]:Qs.reducer,[Fs.reducerPath]:Fs.reducer,[Ks.reducerPath]:Ks.reducer,[Ys.reducerPath]:Ys.reducer,[Hs.reducerPath]:Hs.reducer},middleware:s=>s().concat([He.middleware,Gs.middleware,Ds.middleware,Qs.middleware,Fs.middleware,Ks.middleware,Ys.middleware,Hs.middleware])}),sh=()=>e.jsx(_r,{store:$n,children:e.jsxs(ei,{children:[e.jsx(si,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"toast-container",toastClassName:"toast-item",bodyClassName:"toast-body",progressClassName:"toast-progress"}),e.jsx(ti,{children:e.jsxs(Z,{element:e.jsx(io,{}),children:[Xx,e.jsx(Z,{path:"*",element:e.jsx(eh,{})})]})})]})});ai(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(_r,{store:$n,children:e.jsx(sh,{})})}));
